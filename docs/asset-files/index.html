<!DOCTYPE html><html lang="zh-CN" dir="ltr" data-layout="sandwich"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>资源文件 - 有渔前端团队</title><meta name="description" content="描述资源文件如何存放"><link rel="shortcut icon" href="/assets/favicon-622dec389ae4e3d07eca53ad857a69f4.png"><link rel="icon" href="/assets/favicon-5a093adcde5c588c8e4ea9dcd77bdf4c.ico"><link rel="stylesheet" href="/assets/global-f6051d0acaeb7b340ffb8269928978be.css"><link rel="stylesheet" href="/assets/pages/docs-05e3e5f36f590b4c2c0a3cf79248d9eb.css"> <script src="/assets/global-77affd817a80e5e121d5c932a82860bf.js"></script><!--[if lt IE 9]><script src="/assets/support_ie8-88800734a0bafc4f91fe1d1fe0ce2289.js"></script><![endif]--></head><body itemscope itemtype="http://schema.org/WebPage" class="layout--sandwich" data-page="none"> <header class="layout-header"><div class="navbar navbar-static-top"><div class="container"><div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".Header-navs"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><h1 class="Header-brand navbar-brand"> <a href="/" title="有渔前端团队"> <span class="sr-only">有渔前端团队</span> <img src="/assets/logo-9fd24fb216fe5f9895da9e80e08e37a6.png" srcset="/assets/logo@2x-811b7b581c8fe20b05b670aae3268199.png 2x" class="Header-logo"> </a></h1></div> <nav class="Header-navs navbar-collapse collapse"><ul class="Menu nav navbar-nav navbar-right"><li><a href=" /" title="首页">首页</a></li><li class="is-selected"><a href="/docs/" title="文档">文档</a></li><li><a href="/demos/" title="演示">演示</a></li><li><a href="/about/" title="关于">关于</a></li></ul> </nav></div></div> </header> <main class="layout-container"><div class="layout-content"> <nav class="layout-breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">首页</a></li><li><a href="/docs/">文档</a></li><li class="active">资源文件</li></ol></div> </nav><header class="Doc-header"><div class="container"><h1>资源文件</h1><p>描述资源文件如何存放</p></div> </header><div class="Doc-container container"><div class="row"> <section class="Doc-content col-md-9"> <header><h1>资源文件</h1><p class="lead">本文档的内容是关于前端文件的置放、命名等方面的规则/规范。</p></header><h2>目录</h2><ul class="Doc-content--toc"><li> <a href="#naming">命名</a></li><li> <a href="#coding">编写</a></li><li> <a href="#structure">结构</a></li></ul><h2 id="naming">命名</h2><p>页面指定文件的引用集合所在的文件要以那些文件所在的目录命名并置放在相应的 <code>stylesheets</code> 或 <code>javascripts</code> 文件夹的 <code>pages</code> 文件夹中，Sass 文件要在最前面加上下划线 <code>_</code>。</p><p>页面指定文件用页面 controller 的名字。假如 controller 文件叫 <code>users_controller.rb</code>，那么相应的 page-specific 文件分别为 <code>_users.scss</code> 和 <code>users.coffee</code>。</p><h2 id="coding">编写</h2><p>同一个 controller 所管辖的页面的前端代码都写在相同的 <code>.scss</code> 或 <code>.coffee</code> page-specific 文件中。若 controller 文件叫 <code>users_controller.rb</code>，则 <code>.scss</code> 文件的内容为：</p><div class="Example-code"><div class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="c1">// pages/front/_users.scss 文件中</span>

<span class="nt">body</span><span class="o">[</span><span class="nt">data-page</span><span class="o">=</span><span class="s2">"users-index"</span><span class="o">],</span>
<span class="nt">body</span><span class="o">[</span><span class="nt">data-page</span><span class="o">=</span><span class="s2">"users-show"</span><span class="o">]</span> <span class="p">{</span>
  <span class="nc">...</span>
<span class="p">}</span>

<span class="nt">body</span><span class="o">[</span><span class="nt">data-page</span><span class="o">=</span><span class="s2">"users-show"</span><span class="o">]</span> <span class="p">{</span>
  <span class="nc">...</span>
<span class="p">}</span></code></pre></div></div><p>为了减少上线后的资源请求，前台、后台等页面的 page-specific 的 CSS 及 JavaScript 文件分别通过一个特定文件集中引用，如：</p><div class="Example-code"><div class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="c1">// pages/front.scss 文件中</span>

<span class="k">@import</span> <span class="s2">"./front/_users"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s2">"./front/courses"</span><span class="p">;</span></code></pre></div></div><h2 id="structure">结构</h2><p>项目文件在 <code>app</code> 目录下，第三方的库、插件等在 <code>vendor</code> 目录下；<code>app</code> 目录下的文件结构拿最为复杂的 <code>javascripts</code> 目录举例，<code>stylesheets</code>、<code>images</code> 目录同理。</p><div class="Example-code"><div class="highlight"> <pre><code>.
├─┬─ app
│ └─┬─ assets
│   ├─┬─ images
│   │ └─── ...
│   │
│   ├─┬─ javascripts
│   │ │
│   │ ├─┬─ components                === 自定义组件的定义和事件绑定
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ config                    === 项目中所用到的一些配置
│   │ │ ├─┬─ locales                 --- 区域/语言
│   │ │ │ └─── ...
│   │ │ ├─── apis.coffee             --- Web APIs
│   │ │ ├─── assets.coffee.erb       --- 通用资源（图片等）
│   │ │ ├─── routes.coffee           --- 页面 URL
│   │ │ └─── templates.coffee        --- HTML 模板的引用路径
│   │ │
│   │ ├─┬─ initializers              === 全局性的非自定义组件的初始化
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ pages                     === 所有页面指定文件
│   │ │ ├─┬─ {page-specific}         --- layout 的页面指定文件
│   │ │ │ └─── ...
│   │ │ ├─── {page-specific}.coffee  --- layout 的页面指定文件的引用集合
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ plugins                   === 自己开发人员所编写的插件
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ project                   === 项目通用文件
│   │ │ ├─┬─ extensions              --- 项目相关的对 YouYu 对象扩展
│   │ │ │ └─── ...
│   │ │ └─── rails.coffee            --- 覆盖 jquery_ujs 的一些设置
│   │ │
│   │ ├─┬─ templates                 === HTML 模板
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ themes                    === 与某个特定主题相关联的操作
│   │ │ └─── ...
│   │ │
│   │ ├─┬─ youyu                     === YouYu 对象（底层库）
│   │ │ ├─┬─ templates               --- YouYu 对象内部构建用 HTML 模板
│   │ │ │ └─── ...
│   │ │ ├─── compatibility.coffee    --- 处理浏览器和第三方插件兼容性
│   │ │ ├─── component.coffee        --- 添加自定义组件
│   │ │ └─── core.coffee.erb         --- 一些工具方法
│   │ │
│   │ ├─── application.coffee        --- 引用了必须的全局文件
│   │ ├─── components.coffee         --- 引用 components 文件夹下的文件
│   │ ├─── config.coffee             --- 引用 config 文件夹下的文件
│   │ ├─── initializers.coffee       --- 引用 initializers 文件夹下的文件
│   │ ├─── main.coffee               --- 引用了非营销页面所用到的文件
│   │ ├─── project.coffee            --- 引用 project 文件夹下的文件
│   │ ├─── youyu.coffee              --- 引用 youyu 文件夹下的文件
│   │ └─── {layout-specific}.coffee  --- 引用了指定 layout 所需文件
│   │
│   └─┬─ stylesheets
│     └─── ...
└─┬─ vendor
  └─── ...</code></pre></div></div><p><b>在添加代码时注意代码所起到的「职责」，不要加错地方！</b>尤其是在想往 <code>project</code> 相关文件中添加代码之前，考虑下是否应该放到 <code>components</code> 或者 <code>initializers</code> 中。</p></section><div class="Doc-toc col-md-3"></div></div></div></div> </main> <script src="/assets/pages/docs-f88a7a1d43da6d1b6a95f37b50fcb764.js"></script></body></html>