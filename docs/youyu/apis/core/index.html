<!DOCTYPE html><html lang="zh-CN" dir="ltr" data-layout="sandwich"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>核心 - 有渔前端团队</title><meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
"><link rel="shortcut icon" href="/assets/favicon-622dec389ae4e3d07eca53ad857a69f4.png"><link rel="icon" href="/assets/favicon-5a093adcde5c588c8e4ea9dcd77bdf4c.ico"><link rel="stylesheet" href="/assets/global-48c8778aeb205f000acc02ecbbe574f9.css"><link rel="stylesheet" href="/assets/pages/docs-4ac0c4b1d13e43949a2ad5f9d4e30a6c.css"> <script src="/assets/global-ffa0c1e070945cb11a021c5eee534de7.js"></script><!--[if lt IE 9]><script src="/assets/support_ie8-88800734a0bafc4f91fe1d1fe0ce2289.js"></script><![endif]--></head><body itemscope itemtype="http://schema.org/WebPage" class="layout--sandwich" data-page="none"> <header class="layout-header"><div class="navbar navbar-static-top"><div class="container"><div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".Header-navs"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><h1 class="Header-brand navbar-brand"> <a href="/" title="有渔前端团队"> <span class="sr-only">有渔前端团队</span> <img src="/assets/logo-9fd24fb216fe5f9895da9e80e08e37a6.png" srcset="/assets/logo@2x-811b7b581c8fe20b05b670aae3268199.png 2x" class="Header-logo"> </a></h1></div> <nav class="Header-navs navbar-collapse collapse"><ul class="Menu nav navbar-nav navbar-right"><li><a href=" /" title="首页">首页</a></li><li class="is-selected"><a href="/docs/" title="文档">文档</a></li><li><a href="/demos/" title="演示">演示</a></li><li><a href="/about/" title="关于">关于</a></li></ul> </nav></div></div> </header> <main class="layout-container"><div class="layout-content"> <nav class="layout-breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">首页</a></li><li><a href="/docs/">文档</a></li><li><a href="/docs/youyu/">YouYu 对象</a></li><li class="active">核心</li></ol></div> </nav><header class="Doc-header"><div class="container"><h1>API</h1><p>了解如何去用 YouYu 对象</p></div> </header><div class="Doc-container container"><div class="row"> <section class="Doc-content col-md-9"> <header><h1 id="core">核心</h1> </header><h2>目录</h2><ul class="Doc-content--toc"><li> <a href="#Setting">名称设置</a><ul><li><a href="#Setting-mask">mask</a></li><li><a href="#Setting-alias">alias</a></li></ul></li><li> <a href="#Extension">扩展能力</a><ul><li><a href="#Extension-mixin">mixin</a></li><li><a href="#Extension-extend">extend</a></li></ul></li></ul><h2 id="Setting">名称设置</h2><h3 id="Setting-mask">mask</h3><p>更改 YouYu 依附在全局对象上的名字。</p><div class="Api"> <code class="Api-invoke">YouYu.mask(guise)</code> <span class="Api-returnValue">Boolean</span><dl class="Api-parameters"><dt>guise</dt><dd><p>[String]</p></dd></dl></div><p>原来的名字会被删除，即访问 <code>YouYu</code> 会报错。</p><div class="example-code"><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">YouYu</span><span class="p">.</span><span class="nx">mask</span><span class="p">(</span><span class="s2">"YouYu_new"</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="kc">true</span>

<span class="nx">YouYu_new</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">Object</span> <span class="p">{</span><span class="nx">mixin</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">hasProp</span><span class="o">:</span> <span class="kd">function</span><span class="err">…</span><span class="p">}</span>

<span class="nx">YouYu</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nx">ReferenceError</span><span class="o">:</span> <span class="nx">YouYu</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">defined</span></code></pre></div></div><h3 id="Setting-alias">alias</h3><p>为 YouYu 起个别名。</p><div class="Api"> <code class="Api-invoke">YouYu.alias(name)</code> <span class="Api-returnValue">Object</span><dl class="Api-parameters"><dt>name</dt><dd><p>[String]</p></dd></dl></div><p>用别名也可以访问 YouYu 对象。</p><p class="note">只能设置一个别名，若在已设置别名的情况下再次调用该方法，则上次设置的别名会被销毁。</p><div class="example-code"><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">YouYu</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s2">"TTM"</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="nb">Object</span> <span class="p">{</span><span class="nx">mixin</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">hasProp</span><span class="o">:</span> <span class="kd">function</span><span class="err">…</span><span class="p">}</span>

<span class="nx">TTM</span> <span class="o">===</span> <span class="nx">YouYu</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="kc">true</span>

<span class="nx">YouYu</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s2">"FFF"</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="nb">Object</span> <span class="p">{</span><span class="nx">mixin</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">hasProp</span><span class="o">:</span> <span class="kd">function</span><span class="err">…</span><span class="p">}</span>

<span class="nx">FFF</span> <span class="o">===</span> <span class="nx">YouYu</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="kc">true</span>

<span class="nx">TTM</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nx">ReferenceError</span><span class="o">:</span> <span class="nx">TTM</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">defined</span></code></pre></div></div><h2 id="Extension">扩展能力</h2><h3 id="Extension-mixin">mixin</h3><p>扩展指定对象</p><div class="Api"> <code class="Api-invoke">YouYu.mixin(target[, object1][, objectN])</code> <span class="Api-returnValue">Object</span><dl class="Api-parameters"><dt>target</dt><dd><p>[Object]</p></dd><dt>object1</dt><dd><p>[Object]</p></dd><dt>objectN</dt><dd><p>[Object]</p></dd></dl></div><p>可以传入任意多个类型为 Object 的参数，如果具有相同的 key，则后者覆盖前者，否则附加到前者上。当只传入一个参数时，则扩展 YouYu 本身。返回值为被扩展的对象，即 <code>target</code>。</p><div class="example-code"><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// 扩展 YouYu 自身</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">mixin</span><span class="p">({</span><span class="nx">foo</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">bar</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>

<span class="nx">YouYu</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="kc">true</span>

<span class="nx">YouYu</span><span class="p">.</span><span class="nx">bar</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="kc">false</span>

<span class="c1">// 返回新对象</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">mixin</span><span class="p">({},</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">bar</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">bar</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>

<span class="nx">YouYu</span><span class="p">.</span><span class="nx">mixin</span><span class="p">();</span>
<span class="o">=&gt;</span> <span class="p">{}</span></code></pre></div></div><div class="Api"> <code class="Api-invoke">YouYu.mixin(deep, target, object1[, objectN])</code> <span class="Api-returnValue">Object</span><dl class="Api-parameters"><dt>deep</dt><dd><p>[Boolean]</p> 如果是 true 的话则进行深度复制。</dd><dt>target</dt><dd><p>[Object]</p></dd><dt>object1</dt><dd><p>[Object]</p></dd><dt>objectN</dt><dd><p>[Object]</p></dd></dl></div><div class="example-code"><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">foo</span><span class="o">:</span> <span class="s2">"foo"</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">bar</span><span class="o">:</span> <span class="s2">"bar"</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="c1">// 普通扩展</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">mixin</span><span class="p">({},</span> <span class="nx">obj1</span><span class="p">,</span> <span class="nx">obj2</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="p">{</span><span class="nx">bar</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">}}</span>

<span class="c1">// 深度复制</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">obj1</span><span class="p">,</span> <span class="nx">obj2</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span> <span class="s2">"foo"</span><span class="p">,</span> <span class="nx">bar</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">}}</span></code></pre></div></div><h3 id="Extension-extend">extend</h3><p>使用特定格式的数据扩充指定对象。内置「预处理」功能。</p><div class="Api"> <code class="Api-invoke">YouYu.extend(data[, target])</code> <span class="Api-returnValue">Object</span><dl class="Api-parameters"><dt>data</dt><dd><p>[Array / Plain object]</p> 具备特定格式的数据</dd><dt>target</dt><dd><p>[Object]</p> 被扩充的对象。忽略此参数则扩充到 YouYu 上。</dd></dl></div><p>返回值为包含通过 <code>data</code> 构造的方法的对象。</p><p><code>data</code> 的基本结构为：</p> <pre><code>{
  validator: function() {},
  value: "",
  handlers: [
    {
      name: "methodName",
      handler: function() {},
      validator: function() {},
      value: ""
    }
  ]
}</code></pre><p>其中 <code>validator</code> 用于验证参数合法性，<code>value</code> 为验证不通过时的返回值，它们都是可省略的。</p><div class="example-code"><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">GeometryMethods</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">Graphic</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">Circle</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">radius</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">typeof</span> <span class="nx">radius</span> <span class="o">===</span> <span class="s2">"number"</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">value</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">handlers</span><span class="o">:</span> <span class="p">[{</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s2">"perimeter"</span><span class="p">,</span>
            <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">radius</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}]</span>
      <span class="p">},</span>
      <span class="nx">Rectangle</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="o">:</span> <span class="p">[{</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s2">"area"</span><span class="p">,</span>
            <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">},</span>
            <span class="nx">validator</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="k">typeof</span> <span class="nx">width</span> <span class="o">===</span> <span class="s2">"number"</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">height</span> <span class="o">===</span> <span class="s2">"number"</span><span class="p">;</span>
            <span class="p">},</span>
            <span class="nx">value</span><span class="o">:</span> <span class="mi">0</span>
          <span class="p">}]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="c1">// 扩展 YouYu 自身</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">GeometryMethods</span><span class="p">);</span>

<span class="k">typeof</span> <span class="nx">YouYu</span><span class="p">.</span><span class="nx">perimeter</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="s2">"function"</span>

<span class="c1">// 创建新对象</span>
<span class="kd">var</span> <span class="nx">Geometry</span> <span class="o">=</span> <span class="nx">YouYu</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">GeometryMethods</span><span class="p">,</span> <span class="p">{});</span>

<span class="nx">Geometry</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">Object</span> <span class="p">{</span><span class="nx">perimeter</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">area</span><span class="o">:</span> <span class="kd">function</span><span class="p">}</span>

<span class="c1">// 扩展新建的对象</span>
<span class="nx">YouYu</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">handlers</span><span class="o">:</span> <span class="p">[{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">"volume"</span><span class="p">,</span>
    <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">h</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">h</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">},</span> <span class="nx">Geometry</span><span class="p">);</span>

<span class="nx">Geometry</span><span class="p">;</span>
<span class="o">=&gt;</span> <span class="nb">Object</span> <span class="p">{</span><span class="nx">perimeter</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">area</span><span class="o">:</span> <span class="kd">function</span><span class="p">,</span> <span class="nx">volume</span><span class="o">:</span> <span class="kd">function</span><span class="p">}</span></code></pre></div></div></section><div class="Doc-toc col-md-3"> <nav><ul class="Doc-navs"><li><a href="/docs/youyu/">介绍</a></li><li class="is-selected"> <a href="/docs/youyu/apis/core/">API</a><ul class="Doc-subnavs"><li class="is-selected"><a href="/docs/youyu/apis/core/">核心</a></li><li><a href="/docs/youyu/apis/utils/">工具</a></li><li><a href="/docs/youyu/apis/project/">项目开发</a></li></ul></li><li><a href="/docs/youyu/turbolinks/">兼容 Turbolinks</a></li></ul> </nav></div></div></div></div> </main> <script src="/assets/pages/docs-5f637d73a1aa37cf57078d02481b5931.js"></script></body></html>