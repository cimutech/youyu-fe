(function(){var t;t="YouYuNotificationTimer",YouYu.addComponent("notification",function(e,i){var n,o;return null==i&&(i="warning"),n=$(".Notification"),0===n.size()?(n=$('<div class="Notification"><p class="Notification-content"></p><button class="Notification-button--close" type="button">&times;</button></div>'),$("body").append(n)):(clearTimeout(n.data(t)),$.each(["success","warning","error"],function(t,e){return n.removeClass("Notification--"+e)})),n.addClass("Notification--"+i).children(".Notification-content").html(String(e)),o=setTimeout(function(){return n.remove()},3e3),n.data(t,o),n}),$("body").on("click",".Notification-button--close",function(){var e;return e=$(".Notification"),clearTimeout(e.data(t)),e.remove()})}).call(this),function(){var t,e,i;t=["webkit","moz",""],i=function(e,i){var n;return n=!1,null!=("undefined"!=typeof CSS&&null!==CSS?CSS.supports:void 0)&&$.each(t,function(t,o){return o&&(o="-"+o+"-"),!(n=CSS.supports(""+o+e,i))}),n},e=function(t,e){var i,n;return n=t.text(),n.length?(i=[],$.each(n.split(""),function(t,n){return i.push('<span class="punc-'+e+'">'+n+"</span>")}),t.removeClass("punc-"+e).html(""),t.append($(i.join(""))),t.children().unwrap()):void 0},CM.addComponent("punctuate",function(t){return t.each(function(){var t;if(t=$(this),t.hasClass("punc-emphasis")){if(!i("text-emphasis-style","dot")||!i("text-emphasis-position","under"))return e(t,"emphasis")}else if(t.hasClass("punc-guillemet")&&(!i("text-decoration-style","wavy")||!i("text-decoration-line","underline")))return e(t,"guillemet")})})}.call(this),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return In.apply(null,arguments)}function e(t){In=t}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function o(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t,e){for(var i in e)r(e,i)&&(t[i]=e[i]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return Me(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function d(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=a(0/0);return null!=t?s(c(e),t):c(e).userInvalidated=!0,e}function h(t,e){var i,n,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=c(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Pn.length>0)for(i in Pn)n=Pn[i],o=e[n],"undefined"!=typeof o&&(t[n]=o);return t}function p(e){h(this,e),this._d=new Date(null!=e._d?e._d.getTime():0/0),Fn===!1&&(Fn=!0,t.updateOffset(this),Fn=!1)}function f(t){return t instanceof p||null!=t&&null!=t._isAMomentObject}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=m(e)),i}function v(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&s++;return s+r}function y(){}function b(t){return t?t.toLowerCase().replace("_","-"):t}function _(t){for(var e,i,n,o,r=0;r<t.length;){for(o=b(t[r]).split("-"),e=o.length,i=b(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=w(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&v(o,i,!0)>=e-1)break;e--}r++}return null}function w(t){var e=null;if(!Bn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Yn._abbr,require("./locale/"+t),k(e)}catch(i){}return Bn[t]}function k(t,e){var i;return t&&(i="undefined"==typeof e?x(t):C(t,e),i&&(Yn=i)),Yn._abbr}function C(t,e){return null!==e?(e.abbr=t,Bn[t]=Bn[t]||new y,Bn[t].set(e),k(t),Bn[t]):(delete Bn[t],null)}function x(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Yn;if(!i(t)){if(e=w(t))return e;t=[t]}return _(t)}function S(t,e){var i=t.toLowerCase();Hn[i]=Hn[i+"s"]=Hn[e]=t}function T(t){return"string"==typeof t?Hn[t]||Hn[t.toLowerCase()]:void 0}function D(t){var e,i,n={};for(i in t)r(t,i)&&(e=T(i),e&&(n[e]=t[i]));return n}function M(e,i){return function(n){return null!=n?(A(this,e,n),t.updateOffset(this,i),this):E(this,e)}}function E(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function A(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function O(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function N(t,e,i){var n=""+Math.abs(t),o=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function R(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(zn[t]=o),e&&(zn[e[0]]=function(){return N(o.apply(this,arguments),e[1],e[2])}),i&&(zn[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function I(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,i,n=t.match(Ln);for(e=0,i=n.length;i>e;e++)n[e]=zn[n[e]]?zn[n[e]]:I(n[e]);return function(o){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(o,t):n[e];return r}}function P(t,e){return t.isValid()?(e=F(e,t.localeData()),Wn[e]=Wn[e]||Y(e),Wn[e](t)):t.localeData().invalidDate()}function F(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Un.lastIndex=0;n>=0&&Un.test(t);)t=t.replace(Un,i),Un.lastIndex=0,n-=1;return t}function B(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function H(t,e,i){oo[t]=B(e)?e:function(t){return t&&i?i:e}}function L(t,e){return r(oo,t)?oo[t](e._strict,e._locale):new RegExp(U(t))}function U(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=g(t)}),i=0;i<t.length;i++)ro[t[i]]=n}function z(t,e){W(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function j(t,e,i){null!=e&&r(ro,t)&&ro[t](e,i._a,i,t)}function q(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function $(t){return this._months[t.month()]}function G(t){return this._monthsShort[t.month()]}function V(t,e,i){var n,o,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function K(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),q(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function Z(e){return null!=e?(K(this,e),t.updateOffset(this,!0),this):E(this,"Month")}function Q(){return q(this.year(),this.month())}function J(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[ao]<0||i[ao]>11?ao:i[lo]<1||i[lo]>q(i[so],i[ao])?lo:i[co]<0||i[co]>24||24===i[co]&&(0!==i[uo]||0!==i[ho]||0!==i[po])?co:i[uo]<0||i[uo]>59?uo:i[ho]<0||i[ho]>59?ho:i[po]<0||i[po]>999?po:-1,c(t)._overflowDayOfYear&&(so>e||e>lo)&&(e=lo),c(t).overflow=e),t}function X(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function te(t,e){var i=!0;return s(function(){return i&&(X(t+"\n"+(new Error).stack),i=!1),e.apply(this,arguments)},e)}function ee(t,e){go[t]||(X(e),go[t]=!0)}function ie(t){var e,i,n=t._i,o=vo.exec(n);if(o){for(c(t).iso=!0,e=0,i=yo.length;i>e;e++)if(yo[e][1].exec(n)){t._f=yo[e][0];break}for(e=0,i=bo.length;i>e;e++)if(bo[e][1].exec(n)){t._f+=(o[6]||" ")+bo[e][0];break}n.match(eo)&&(t._f+="Z"),we(t)}else t._isValid=!1}function ne(e){var i=_o.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(ie(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function oe(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return 1970>t&&a.setFullYear(t),a}function re(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function se(t){return ae(t)?366:365}function ae(t){return t%4===0&&t%100!==0||t%400===0}function le(){return ae(this.year())}function ce(t,e,i){var n,o=i-e,r=i-t.day();return r>o&&(r-=7),o-7>r&&(r+=7),n=Ee(t).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function de(t){return ce(t,this._week.dow,this._week.doy).week}function ue(){return this._week.dow}function he(){return this._week.doy}function pe(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function fe(t){var e=ce(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function me(t,e,i,n,o){var r,s=6+o-n,a=re(t,0,1+s),l=a.getUTCDay();return o>l&&(l+=7),i=null!=i?1*i:o,r=1+s+7*(e-1)-l+i,{year:r>0?t:t-1,dayOfYear:r>0?r:se(t-1)+r}}function ge(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function ve(t,e,i){return null!=t?t:null!=e?e:i}function ye(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function be(t){var e,i,n,o,r=[];if(!t._d){for(n=ye(t),t._w&&null==t._a[lo]&&null==t._a[ao]&&_e(t),t._dayOfYear&&(o=ve(t._a[so],n[so]),t._dayOfYear>se(o)&&(c(t)._overflowDayOfYear=!0),i=re(o,0,t._dayOfYear),t._a[ao]=i.getUTCMonth(),t._a[lo]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[co]&&0===t._a[uo]&&0===t._a[ho]&&0===t._a[po]&&(t._nextDay=!0,t._a[co]=0),t._d=(t._useUTC?re:oe).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[co]=24)}}function _e(t){var e,i,n,o,r,s,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,s=4,i=ve(e.GG,t._a[so],ce(Ee(),1,4).year),n=ve(e.W,1),o=ve(e.E,1)):(r=t._locale._week.dow,s=t._locale._week.doy,i=ve(e.gg,t._a[so],ce(Ee(),r,s).year),n=ve(e.w,1),null!=e.d?(o=e.d,r>o&&++n):o=null!=e.e?e.e+r:r),a=me(i,n,o,s,r),t._a[so]=a.year,t._dayOfYear=a.dayOfYear}function we(e){if(e._f===t.ISO_8601)return void ie(e);e._a=[],c(e).empty=!0;var i,n,o,r,s,a=""+e._i,l=a.length,d=0;for(o=F(e._f,e._locale).match(Ln)||[],i=0;i<o.length;i++)r=o[i],n=(a.match(L(r,e))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&c(e).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),d+=n.length),zn[r]?(n?c(e).empty=!1:c(e).unusedTokens.push(r),j(r,n,e)):e._strict&&!n&&c(e).unusedTokens.push(r);c(e).charsLeftOver=l-d,a.length>0&&c(e).unusedInput.push(a),c(e).bigHour===!0&&e._a[co]<=12&&e._a[co]>0&&(c(e).bigHour=void 0),e._a[co]=ke(e._locale,e._a[co],e._meridiem),be(e),J(e)}function ke(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Ce(t){var e,i,n,o,r;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=h({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],we(e),d(e)&&(r+=c(e).charsLeftOver,r+=10*c(e).unusedTokens.length,c(e).score=r,(null==n||n>r)&&(n=r,i=e));s(t,i||e)}function xe(t){if(!t._d){var e=D(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],be(t)}}function Se(t){var e=new p(J(Te(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Te(t){var e=t._i,o=t._f;return t._locale=t._locale||x(t._l),null===e||void 0===o&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),f(e)?new p(J(e)):(i(o)?Ce(t):o?we(t):n(e)?t._d=e:De(t),t))}function De(e){var r=e._i;void 0===r?e._d=new Date:n(r)?e._d=new Date(+r):"string"==typeof r?ne(e):i(r)?(e._a=o(r.slice(0),function(t){return parseInt(t,10)}),be(e)):"object"==typeof r?xe(e):"number"==typeof r?e._d=new Date(r):t.createFromInputFallback(e)}function Me(t,e,i,n,o){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=t,r._f=e,r._strict=n,Se(r)}function Ee(t,e,i,n){return Me(t,e,i,n,!1)}function Ae(t,e){var n,o;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Ee();for(n=e[0],o=1;o<e.length;++o)(!e[o].isValid()||e[o][t](n))&&(n=e[o]);return n}function Oe(){var t=[].slice.call(arguments,0);return Ae("isBefore",t)}function Ne(){var t=[].slice.call(arguments,0);return Ae("isAfter",t)}function Re(t){var e=D(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,d=e.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=x(),this._bubble()}function Ie(t){return t instanceof Re}function Ye(t,e){R(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+N(~~(t/60),2)+e+N(~~t%60,2)})}function Pe(t){var e=(t||"").match(eo)||[],i=e[e.length-1]||[],n=(i+"").match(So)||["-",0,0],o=+(60*n[1])+g(n[2]);return"+"===n[0]?o:-o}function Fe(e,i){var o,r;return i._isUTC?(o=i.clone(),r=(f(e)||n(e)?+e:+Ee(e))-+o,o._d.setTime(+o._d+r),t.updateOffset(o,!1),o):Ee(e).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function He(e,i){var n,o=this._offset||0;return null!=e?("string"==typeof e&&(e=Pe(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(n=Be(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!i||this._changeInProgress?ei(this,Ze(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:Be(this)}function Le(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ue(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this}function ze(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Pe(this._i)),this}function je(t){return t=t?Ee(t).utcOffset():0,(this.utcOffset()-t)%60===0}function qe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $e(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(h(t,this),t=Te(t),t._a){var e=t._isUTC?a(t._a):Ee(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ge(){return!this._isUTC}function Ve(){return this._isUTC}function Ke(){return this._isUTC&&0===this._offset}function Ze(t,e){var i,n,o,s=t,a=null;return Ie(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=To.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:g(a[lo])*i,h:g(a[co])*i,m:g(a[uo])*i,s:g(a[ho])*i,ms:g(a[po])*i}):(a=Do.exec(t))?(i="-"===a[1]?-1:1,s={y:Qe(a[2],i),M:Qe(a[3],i),d:Qe(a[4],i),h:Qe(a[5],i),m:Qe(a[6],i),s:Qe(a[7],i),w:Qe(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=Xe(Ee(s.from),Ee(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),n=new Re(s),Ie(t)&&r(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Je(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Xe(t,e){var i;return e=Fe(e,t),t.isBefore(e)?i=Je(t,e):(i=Je(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function ti(t,e){return function(i,n){var o,r;return null===n||isNaN(+n)||(ee(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=Ze(i,n),ei(this,o,t),this}}function ei(e,i,n,o){var r=i._milliseconds,s=i._days,a=i._months;o=null==o?!0:o,r&&e._d.setTime(+e._d+r*n),s&&A(e,"Date",E(e,"Date")+s*n),a&&K(e,E(e,"Month")+a*n),o&&t.updateOffset(e,s||a)}function ii(t,e){var i=t||Ee(),n=Fe(i,this).startOf("day"),o=this.diff(n,"days",!0),r=-6>o?"sameElse":-1>o?"lastWeek":0>o?"lastDay":1>o?"sameDay":2>o?"nextDay":7>o?"nextWeek":"sameElse";return this.format(e&&e[r]||this.localeData().calendar(r,this,Ee(i)))}function ni(){return new p(this)}function oi(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Ee(t),+this>+t):(i=f(t)?+t:+Ee(t),i<+this.clone().startOf(e))}function ri(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Ee(t),+t>+this):(i=f(t)?+t:+Ee(t),+this.clone().endOf(e)<i)}function si(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function ai(t,e){var i;return e=T(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Ee(t),+this===+t):(i=+Ee(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))}function li(t,e,i){var n,o,r=Fe(t,this),s=6e4*(r.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(o=ci(this,r),"quarter"===e?o/=3:"year"===e&&(o/=12)):(n=this-r,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?o:m(o)}function ci(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return 0>e-r?(i=t.clone().add(o-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(o+1,"months"),n=(e-r)/(i-r)),-(o+n)}function di(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ui(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function hi(e){var i=P(this,e||t.defaultFormat);return this.localeData().postformat(i)}function pi(t,e){return this.isValid()?Ze({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fi(t){return this.from(Ee(),t)}function mi(t,e){return this.isValid()?Ze({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function gi(t){return this.to(Ee(),t)}function vi(t){var e;return void 0===t?this._locale._abbr:(e=x(t),null!=e&&(this._locale=e),this)}function yi(){return this._locale}function bi(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function _i(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function wi(){return+this._d-6e4*(this._offset||0)}function ki(){return Math.floor(+this/1e3)}function Ci(){return this._offset?new Date(+this):this._d}function xi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Si(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ti(){return d(this)}function Di(){return s({},c(this))}function Mi(){return c(this).overflow}function Ei(t,e){R(0,[t,t.length],0,e)}function Ai(t,e,i){return ce(Ee([t,11,31+e-i]),e,i).week}function Oi(t){var e=ce(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ni(t){var e=ce(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ri(){return Ai(this.year(),1,4)}function Ii(){var t=this.localeData()._week;return Ai(this.year(),t.dow,t.doy)}function Yi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Pi(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Fi(t){return this._weekdays[t.day()]}function Bi(t){return this._weekdaysShort[t.day()]}function Hi(t){return this._weekdaysMin[t.day()]}function Li(t){var e,i,n;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(i=Ee([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ui(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Pi(t,this.localeData()),this.add(t-e,"d")):e}function Wi(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function zi(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function ji(t,e){R(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function qi(t,e){return e._meridiemParse}function $i(t){return"p"===(t+"").toLowerCase().charAt(0)}function Gi(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Vi(t,e){e[po]=g(1e3*("0."+t))}function Ki(){return this._isUTC?"UTC":""}function Zi(){return this._isUTC?"Coordinated Universal Time":""}function Qi(t){return Ee(1e3*t)}function Ji(){return Ee.apply(null,arguments).parseZone()}function Xi(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n}function tn(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function en(){return this._invalidDate}function nn(t){return this._ordinal.replace("%d",t)}function on(t){return t}function rn(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)}function sn(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)}function an(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ln(t,e,i,n){var o=x(),r=a().set(n,e);return o[i](r,t)}function cn(t,e,i,n,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ln(t,e,i,o);var r,s=[];for(r=0;n>r;r++)s[r]=ln(t,r,i,o);return s}function dn(t,e){return cn(t,e,"months",12,"month")}function un(t,e){return cn(t,e,"monthsShort",12,"month")}function hn(t,e){return cn(t,e,"weekdays",7,"day")}function pn(t,e){return cn(t,e,"weekdaysShort",7,"day")}function fn(t,e){return cn(t,e,"weekdaysMin",7,"day")}function mn(){var t=this._data;return this._milliseconds=Zo(this._milliseconds),this._days=Zo(this._days),this._months=Zo(this._months),t.milliseconds=Zo(t.milliseconds),t.seconds=Zo(t.seconds),t.minutes=Zo(t.minutes),t.hours=Zo(t.hours),t.months=Zo(t.months),t.years=Zo(t.years),this}function gn(t,e,i,n){var o=Ze(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function vn(t,e){return gn(this,t,e,1)}function yn(t,e){return gn(this,t,e,-1)}function bn(t){return 0>t?Math.floor(t):Math.ceil(t)}function _n(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||0>=r&&0>=s&&0>=a||(r+=864e5*bn(kn(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=m(r/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,i=m(e/60),l.hours=i%24,s+=m(i/24),o=m(wn(s)),a+=o,s-=bn(kn(o)),n=m(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function wn(t){return 4800*t/146097}function kn(t){return 146097*t/4800}function Cn(t){var e,i,n=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+wn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(kn(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function xn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function Sn(t){return function(){return this.as(t)}}function Tn(t){return t=T(t),this[t+"s"]()}function Dn(t){return function(){return this._data[t]}}function Mn(){return m(this.days()/7)}function En(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function An(t,e,i){var n=Ze(t).abs(),o=hr(n.as("s")),r=hr(n.as("m")),s=hr(n.as("h")),a=hr(n.as("d")),l=hr(n.as("M")),c=hr(n.as("y")),d=o<pr.s&&["s",o]||1===r&&["m"]||r<pr.m&&["mm",r]||1===s&&["h"]||s<pr.h&&["hh",s]||1===a&&["d"]||a<pr.d&&["dd",a]||1===l&&["M"]||l<pr.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=e,d[3]=+t>0,d[4]=i,En.apply(null,d)}function On(t,e){return void 0===pr[t]?!1:void 0===e?pr[t]:(pr[t]=e,!0)}function Nn(t){var e=this.localeData(),i=An(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Rn(){var t,e,i,n=fr(this._milliseconds)/1e3,o=fr(this._days),r=fr(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60,i=m(r/12),r%=12;var s=i,a=r,l=o,c=e,d=t,u=n,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||d||u?"T":"")+(c?c+"H":"")+(d?d+"M":"")+(u?u+"S":""):"P0D"}var In,Yn,Pn=t.momentProperties=[],Fn=!1,Bn={},Hn={},Ln=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wn={},zn={},jn=/\d/,qn=/\d\d/,$n=/\d{3}/,Gn=/\d{4}/,Vn=/[+-]?\d{6}/,Kn=/\d\d?/,Zn=/\d{1,3}/,Qn=/\d{1,4}/,Jn=/[+-]?\d{1,6}/,Xn=/\d+/,to=/[+-]?\d+/,eo=/Z|[+-]\d\d:?\d\d/gi,io=/[+-]?\d+(\.\d{1,3})?/,no=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,oo={},ro={},so=0,ao=1,lo=2,co=3,uo=4,ho=5,po=6;R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),R("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),H("M",Kn),H("MM",Kn,qn),H("MMM",no),H("MMMM",no),W(["M","MM"],function(t,e){e[ao]=g(t)-1}),W(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[ao]=o:c(i).invalidMonth=t});var fo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),go={};t.suppressDeprecationWarnings=!1;var vo=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bo=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],_o=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),S("year","y"),H("Y",to),H("YY",Kn,qn),H("YYYY",Qn,Gn),H("YYYYY",Jn,Vn),H("YYYYYY",Jn,Vn),W(["YYYYY","YYYYYY"],so),W("YYYY",function(e,i){i[so]=2===e.length?t.parseTwoDigitYear(e):g(e)}),W("YY",function(e,i){i[so]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var wo=M("FullYear",!1);R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),H("w",Kn),H("ww",Kn,qn),H("W",Kn),H("WW",Kn,qn),z(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=g(t)});var ko={dow:0,doy:6};R("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),H("DDD",Zn),H("DDDD",$n),W(["DDD","DDDD"],function(t,e,i){i._dayOfYear=g(t)}),t.ISO_8601=function(){};var Co=te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Ee.apply(null,arguments);return this>t?this:t}),xo=te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Ee.apply(null,arguments);return t>this?this:t});Ye("Z",":"),Ye("ZZ",""),H("Z",eo),H("ZZ",eo),W(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Pe(t)});var So=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var To=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Do=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ze.fn=Re.prototype;var Mo=ti(1,"add"),Eo=ti(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ao=te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ei("gggg","weekYear"),Ei("ggggg","weekYear"),Ei("GGGG","isoWeekYear"),Ei("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),H("G",to),H("g",to),H("GG",Kn,qn),H("gg",Kn,qn),H("GGGG",Qn,Gn),H("gggg",Qn,Gn),H("GGGGG",Jn,Vn),H("ggggg",Jn,Vn),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=g(t)}),z(["gg","GG"],function(e,i,n,o){i[o]=t.parseTwoDigitYear(e)}),R("Q",0,0,"quarter"),S("quarter","Q"),H("Q",jn),W("Q",function(t,e){e[ao]=3*(g(t)-1)}),R("D",["DD",2],"Do","date"),S("date","D"),H("D",Kn),H("DD",Kn,qn),H("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),W(["D","DD"],lo),W("Do",function(t,e){e[lo]=g(t.match(Kn)[0],10)});var Oo=M("Date",!0);R("d",0,"do","day"),R("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),R("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),R("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),H("d",Kn),H("e",Kn),H("E",Kn),H("dd",no),H("ddd",no),H("dddd",no),z(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:c(i).invalidWeekday=t}),z(["d","e","E"],function(t,e,i,n){e[n]=g(t)});var No="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ro="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Io="Su_Mo_Tu_We_Th_Fr_Sa".split("_");R("H",["HH",2],0,"hour"),R("h",["hh",2],0,function(){return this.hours()%12||12}),ji("a",!0),ji("A",!1),S("hour","h"),H("a",qi),H("A",qi),H("H",Kn),H("h",Kn),H("HH",Kn,qn),H("hh",Kn,qn),W(["H","HH"],co),W(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),W(["h","hh"],function(t,e,i){e[co]=g(t),c(i).bigHour=!0});var Yo=/[ap]\.?m?\.?/i,Po=M("Hours",!0);R("m",["mm",2],0,"minute"),S("minute","m"),H("m",Kn),H("mm",Kn,qn),W(["m","mm"],uo);var Fo=M("Minutes",!1);R("s",["ss",2],0,"second"),S("second","s"),H("s",Kn),H("ss",Kn,qn),W(["s","ss"],ho);var Bo=M("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),H("S",Zn,jn),H("SS",Zn,qn),H("SSS",Zn,$n);var Ho;for(Ho="SSSS";Ho.length<=9;Ho+="S")H(Ho,Xn);for(Ho="S";Ho.length<=9;Ho+="S")W(Ho,Vi);var Lo=M("Milliseconds",!1);R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var Uo=p.prototype;
Uo.add=Mo,Uo.calendar=ii,Uo.clone=ni,Uo.diff=li,Uo.endOf=_i,Uo.format=hi,Uo.from=pi,Uo.fromNow=fi,Uo.to=mi,Uo.toNow=gi,Uo.get=O,Uo.invalidAt=Mi,Uo.isAfter=oi,Uo.isBefore=ri,Uo.isBetween=si,Uo.isSame=ai,Uo.isValid=Ti,Uo.lang=Ao,Uo.locale=vi,Uo.localeData=yi,Uo.max=xo,Uo.min=Co,Uo.parsingFlags=Di,Uo.set=O,Uo.startOf=bi,Uo.subtract=Eo,Uo.toArray=xi,Uo.toObject=Si,Uo.toDate=Ci,Uo.toISOString=ui,Uo.toJSON=ui,Uo.toString=di,Uo.unix=ki,Uo.valueOf=wi,Uo.year=wo,Uo.isLeapYear=le,Uo.weekYear=Oi,Uo.isoWeekYear=Ni,Uo.quarter=Uo.quarters=Yi,Uo.month=Z,Uo.daysInMonth=Q,Uo.week=Uo.weeks=pe,Uo.isoWeek=Uo.isoWeeks=fe,Uo.weeksInYear=Ii,Uo.isoWeeksInYear=Ri,Uo.date=Oo,Uo.day=Uo.days=Ui,Uo.weekday=Wi,Uo.isoWeekday=zi,Uo.dayOfYear=ge,Uo.hour=Uo.hours=Po,Uo.minute=Uo.minutes=Fo,Uo.second=Uo.seconds=Bo,Uo.millisecond=Uo.milliseconds=Lo,Uo.utcOffset=He,Uo.utc=Ue,Uo.local=We,Uo.parseZone=ze,Uo.hasAlignedHourOffset=je,Uo.isDST=qe,Uo.isDSTShifted=$e,Uo.isLocal=Ge,Uo.isUtcOffset=Ve,Uo.isUtc=Ke,Uo.isUTC=Ke,Uo.zoneAbbr=Ki,Uo.zoneName=Zi,Uo.dates=te("dates accessor is deprecated. Use date instead.",Oo),Uo.months=te("months accessor is deprecated. Use month instead",Z),Uo.years=te("years accessor is deprecated. Use year instead",wo),Uo.zone=te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Le);var Wo=Uo,zo={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},jo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},qo="Invalid date",$o="%d",Go=/\d{1,2}/,Vo={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ko=y.prototype;Ko._calendar=zo,Ko.calendar=Xi,Ko._longDateFormat=jo,Ko.longDateFormat=tn,Ko._invalidDate=qo,Ko.invalidDate=en,Ko._ordinal=$o,Ko.ordinal=nn,Ko._ordinalParse=Go,Ko.preparse=on,Ko.postformat=on,Ko._relativeTime=Vo,Ko.relativeTime=rn,Ko.pastFuture=sn,Ko.set=an,Ko.months=$,Ko._months=fo,Ko.monthsShort=G,Ko._monthsShort=mo,Ko.monthsParse=V,Ko.week=de,Ko._week=ko,Ko.firstDayOfYear=he,Ko.firstDayOfWeek=ue,Ko.weekdays=Fi,Ko._weekdays=No,Ko.weekdaysMin=Hi,Ko._weekdaysMin=Io,Ko.weekdaysShort=Bi,Ko._weekdaysShort=Ro,Ko.weekdaysParse=Li,Ko.isPM=$i,Ko._meridiemParse=Yo,Ko.meridiem=Gi,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=te("moment.lang is deprecated. Use moment.locale instead.",k),t.langData=te("moment.langData is deprecated. Use moment.localeData instead.",x);var Zo=Math.abs,Qo=Sn("ms"),Jo=Sn("s"),Xo=Sn("m"),tr=Sn("h"),er=Sn("d"),ir=Sn("w"),nr=Sn("M"),or=Sn("y"),rr=Dn("milliseconds"),sr=Dn("seconds"),ar=Dn("minutes"),lr=Dn("hours"),cr=Dn("days"),dr=Dn("months"),ur=Dn("years"),hr=Math.round,pr={s:45,m:45,h:22,d:26,M:11},fr=Math.abs,mr=Re.prototype;mr.abs=mn,mr.add=vn,mr.subtract=yn,mr.as=Cn,mr.asMilliseconds=Qo,mr.asSeconds=Jo,mr.asMinutes=Xo,mr.asHours=tr,mr.asDays=er,mr.asWeeks=ir,mr.asMonths=nr,mr.asYears=or,mr.valueOf=xn,mr._bubble=_n,mr.get=Tn,mr.milliseconds=rr,mr.seconds=sr,mr.minutes=ar,mr.hours=lr,mr.days=cr,mr.weeks=Mn,mr.months=dr,mr.years=ur,mr.humanize=Nn,mr.toISOString=Rn,mr.toString=Rn,mr.toJSON=Rn,mr.locale=vi,mr.localeData=yi,mr.toIsoString=te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rn),mr.lang=Ao,R("X",0,0,"unix"),R("x",0,0,"valueOf"),H("x",to),H("X",io),W("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),W("x",function(t,e,i){i._d=new Date(g(t))}),t.version="2.10.6",e(Ee),t.fn=Wo,t.min=Oe,t.max=Ne,t.utc=a,t.unix=Qi,t.months=dn,t.isDate=n,t.locale=k,t.invalid=u,t.duration=Ze,t.isMoment=f,t.weekdays=hn,t.parseZone=Ji,t.localeData=x,t.isDuration=Ie,t.monthsShort=un,t.weekdaysMin=fn,t.defineLocale=C,t.weekdaysShort=pn,t.normalizeUnits=T,t.relativeTimeThreshold=On;var gr=t;return gr}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],e):e(t.moment)}(this,function(t){"use strict";var e=t.defineLocale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"Ah\u70b9mm\u5206",LTS:"Ah\u70b9m\u5206s\u79d2",L:"YYYY-MM-DD",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74MMMD\u65e5ddddAh\u70b9mm\u5206",l:"YYYY-MM-DD",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5Ah\u70b9mm\u5206",llll:"YYYY\u5e74MMMD\u65e5ddddAh\u70b9mm\u5206"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(t,e){return 12===t&&(t=0),"\u51cc\u6668"===e||"\u65e9\u4e0a"===e||"\u4e0a\u5348"===e?t:"\u4e0b\u5348"===e||"\u665a\u4e0a"===e?t+12:t>=11?t:t+12},meridiem:function(t,e){var i=100*t+e;return 600>i?"\u51cc\u6668":900>i?"\u65e9\u4e0a":1130>i?"\u4e0a\u5348":1230>i?"\u4e2d\u5348":1800>i?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:function(){return 0===this.minutes()?"[\u4eca\u5929]Ah[\u70b9\u6574]":"[\u4eca\u5929]LT"},nextDay:function(){return 0===this.minutes()?"[\u660e\u5929]Ah[\u70b9\u6574]":"[\u660e\u5929]LT"},lastDay:function(){return 0===this.minutes()?"[\u6628\u5929]Ah[\u70b9\u6574]":"[\u6628\u5929]LT"},nextWeek:function(){var e,i;return e=t().startOf("week"),i=this.unix()-e.unix()>=604800?"[\u4e0b]":"[\u672c]",0===this.minutes()?i+"dddAh\u70b9\u6574":i+"dddAh\u70b9mm"},lastWeek:function(){var e,i;return e=t().startOf("week"),i=this.unix()<e.unix()?"[\u4e0a]":"[\u672c]",0===this.minutes()?i+"dddAh\u70b9\u6574":i+"dddAh\u70b9mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"\u65e5";case"M":return t+"\u6708";case"w":case"W":return t+"\u5468";default:return t}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}});return e}),function(t,e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");e(t.jQuery,moment)}}(this,function(t,e){"use strict";if("undefined"==typeof e)throw new Error("momentjs is required");var i=0,n=function(n,o){var r,s=t.fn.datetimepicker.defaults,a={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},l=this,c=!1,d=function(){var r,c,d=!1;if(l.options=t.extend({},s,o),l.options.icons=t.extend({},a,l.options.icons),l.element=t(n),h(),!l.options.pickTime&&!l.options.pickDate)throw new Error("Must choose at least one picker");if(l.id=i++,e.locale(l.options.language),l.date=e(),l.unset=!1,l.isInput=l.element.is("input"),l.component=!1,l.element.hasClass("input-group")&&(l.component=l.element.find(0===l.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),l.format=l.options.format,r=e().localeData(),l.format||(l.format=l.options.pickDate?r.longDateFormat("L"):"",l.options.pickDate&&l.options.pickTime&&(l.format+=" "),l.format+=l.options.pickTime?r.longDateFormat("LT"):"",l.options.useSeconds&&(-1!==r.longDateFormat("LT").indexOf(" A")?l.format=l.format.split(" A")[0]+":ss A":l.format+=":ss")),l.use24hours=l.format.toLowerCase().indexOf("a")<0&&l.format.indexOf("h")<0,l.component&&(d=l.component.find("span")),l.options.pickTime&&d&&d.addClass(l.options.icons.time),l.options.pickDate&&d&&(d.removeClass(l.options.icons.time),d.addClass(l.options.icons.date)),l.options.widgetParent="string"==typeof l.options.widgetParent&&l.options.widgetParent||l.element.parents().filter(function(){return"scroll"===t(this).css("overflow-y")}).get(0)||"body",l.widget=t(W()).appendTo(l.options.widgetParent),l.minViewMode=l.options.minViewMode||0,"string"==typeof l.minViewMode)switch(l.minViewMode){case"months":l.minViewMode=1;break;case"years":l.minViewMode=2;break;default:l.minViewMode=0}if(l.viewMode=l.options.viewMode||0,"string"==typeof l.viewMode)switch(l.viewMode){case"months":l.viewMode=1;break;case"years":l.viewMode=2;break;default:l.viewMode=0}l.viewMode=Math.max(l.viewMode,l.minViewMode),l.options.disabledDates=L(l.options.disabledDates),l.options.enabledDates=L(l.options.enabledDates),l.startViewMode=l.viewMode,l.setMinDate(l.options.minDate),l.setMaxDate(l.options.maxDate),v(),y(),_(),w(),k(),g(),A(),u().prop("disabled")||O(),""!==l.options.defaultDate&&""===u().val()&&l.setValue(l.options.defaultDate),1!==l.options.minuteStepping&&(c=l.options.minuteStepping,l.date.minutes(Math.round(l.date.minutes()/c)*c%60).seconds(0))},u=function(){var t;if(l.isInput)return l.element;if(t=l.element.find(".datepickerinput"),0===t.size())t=l.element.find("input");else if(!t.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return t},h=function(){var t;t=l.element.is("input")?l.element.data():l.element.find("input").data(),void 0!==t.dateFormat&&(l.options.format=t.dateFormat),void 0!==t.datePickdate&&(l.options.pickDate=t.datePickdate),void 0!==t.datePicktime&&(l.options.pickTime=t.datePicktime),void 0!==t.dateUseminutes&&(l.options.useMinutes=t.dateUseminutes),void 0!==t.dateUseseconds&&(l.options.useSeconds=t.dateUseseconds),void 0!==t.dateUsecurrent&&(l.options.useCurrent=t.dateUsecurrent),void 0!==t.calendarWeeks&&(l.options.calendarWeeks=t.calendarWeeks),void 0!==t.dateMinutestepping&&(l.options.minuteStepping=t.dateMinutestepping),void 0!==t.dateMindate&&(l.options.minDate=t.dateMindate),void 0!==t.dateMaxdate&&(l.options.maxDate=t.dateMaxdate),void 0!==t.dateShowtoday&&(l.options.showToday=t.dateShowtoday),void 0!==t.dateCollapse&&(l.options.collapse=t.dateCollapse),void 0!==t.dateLanguage&&(l.options.language=t.dateLanguage),void 0!==t.dateDefaultdate&&(l.options.defaultDate=t.dateDefaultdate),void 0!==t.dateDisableddates&&(l.options.disabledDates=t.dateDisableddates),void 0!==t.dateEnableddates&&(l.options.enabledDates=t.dateEnableddates),void 0!==t.dateIcons&&(l.options.icons=t.dateIcons),void 0!==t.dateUsestrict&&(l.options.useStrict=t.dateUsestrict),void 0!==t.dateDirection&&(l.options.direction=t.dateDirection),void 0!==t.dateSidebyside&&(l.options.sideBySide=t.dateSidebyside),void 0!==t.dateDaysofweekdisabled&&(l.options.daysOfWeekDisabled=t.dateDaysofweekdisabled)},p=function(){var e,i="absolute",n=l.component?l.component.offset():l.element.offset(),o=t(window);l.width=l.component?l.component.outerWidth():l.element.outerWidth(),n.top=n.top+l.element.outerHeight(),"up"===l.options.direction?e="top":"bottom"===l.options.direction?e="bottom":"auto"===l.options.direction&&(e=n.top+l.widget.height()>o.height()+o.scrollTop()&&l.widget.height()+l.element.outerHeight()<n.top?"top":"bottom"),"top"===e?(n.bottom=o.height()-n.top+l.element.outerHeight()+3,l.widget.addClass("top").removeClass("bottom")):(n.top+=1,l.widget.addClass("bottom").removeClass("top")),void 0!==l.options.width&&l.widget.width(l.options.width),"left"===l.options.orientation&&(l.widget.addClass("left-oriented"),n.left=n.left-l.widget.width()+20),Y()&&(i="fixed",n.top-=o.scrollTop(),n.left-=o.scrollLeft()),o.width()<n.left+l.widget.outerWidth()?(n.right=o.width()-n.left-l.width,n.left="auto",l.widget.addClass("pull-right")):(n.right="auto",l.widget.removeClass("pull-right")),l.widget.css("top"===e?{position:i,bottom:n.bottom,top:"auto",left:n.left,right:n.right}:{position:i,top:n.top,bottom:"auto",left:n.left,right:n.right})},f=function(t,i){(!e(l.date).isSame(e(t))||c)&&(c=!1,l.element.trigger({type:"dp.change",date:e(l.date),oldDate:e(t)}),"change"!==i&&l.element.change())},m=function(t){c=!0,l.element.trigger({type:"dp.error",date:e(t,l.format,l.options.useStrict)})},g=function(t){e.locale(l.options.language);var i=t;i||(i=u().val(),i&&(l.date=e(i,l.format,l.options.useStrict)),l.date||(l.date=e())),l.viewDate=e(l.date).startOf("month"),b(),C()},v=function(){e.locale(l.options.language);var i,n=t("<tr>"),o=e.weekdaysMin();if(l.options.calendarWeeks===!0&&n.append('<th class="cw">#</th>'),0===e().localeData()._week.dow)for(i=0;7>i;i++)n.append('<th class="dow">'+o[i]+"</th>");else for(i=1;8>i;i++)n.append(7===i?'<th class="dow">'+o[0]+"</th>":'<th class="dow">'+o[i]+"</th>");l.widget.find(".datepicker-days thead").append(n)},y=function(){e.locale(l.options.language);var t,i="",n=e.monthsShort();for(t=0;12>t;t++)i+='<span class="month">'+n[t]+"</span>";l.widget.find(".datepicker-months td").append(i)},b=function(){if(l.options.pickDate){e.locale(l.options.language);var i,n,o,r,s,a,c,d,u,h=l.viewDate.year(),p=l.viewDate.month(),f=l.options.minDate.year(),m=l.options.minDate.month(),g=l.options.maxDate.year(),v=l.options.maxDate.month(),y=[],b=e.months();for(l.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),l.widget.find(".datepicker-days th:eq(1)").text(b[p]+" "+h),n=e(l.viewDate,l.format,l.options.useStrict).subtract(1,"months"),c=n.daysInMonth(),n.date(c).startOf("week"),(h===f&&m>=p||f>h)&&l.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(h===g&&p>=v||h>g)&&l.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),o=e(n).add(42,"d");n.isBefore(o);){if(n.weekday()===e().startOf("week").weekday()&&(r=t("<tr>"),y.push(r),l.options.calendarWeeks===!0&&r.append('<td class="cw">'+n.week()+"</td>")),s="",n.year()<h||n.year()===h&&n.month()<p?s+=" old":(n.year()>h||n.year()===h&&n.month()>p)&&(s+=" new"),n.isSame(e({y:l.date.year(),M:l.date.month(),d:l.date.date()}))&&(s+=" active"),(B(n,"day")||!H(n))&&(s+=" disabled"),l.options.showToday===!0&&n.isSame(e(),"day")&&(s+=" today"),l.options.daysOfWeekDisabled)for(a=0;a<l.options.daysOfWeekDisabled.length;a++)if(n.day()===l.options.daysOfWeekDisabled[a]){s+=" disabled";break}r.append('<td class="day'+s+'">'+n.date()+"</td>"),i=n.date(),n.add(1,"d"),i===n.date()&&n.add(1,"d")}for(l.widget.find(".datepicker-days tbody").empty().append(y),u=l.date.year(),b=l.widget.find(".datepicker-months").find("th:eq(1)").text(h).end().find("span").removeClass("active"),u===h&&b.eq(l.date.month()).addClass("active"),f>h-1&&l.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),h+1>g&&l.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),a=0;12>a;a++)h===f&&m>a||f>h?t(b[a]).addClass("disabled"):(h===g&&a>v||h>g)&&t(b[a]).addClass("disabled");for(y="",h=10*parseInt(h/10,10),d=l.widget.find(".datepicker-years").find("th:eq(1)").text(h+"-"+(h+9)).parents("table").find("td"),l.widget.find(".datepicker-years").find("th").removeClass("disabled"),f>h&&l.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),h+9>g&&l.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),h-=1,a=-1;11>a;a++)y+='<span class="year'+(-1===a||10===a?" old":"")+(u===h?" active":"")+(f>h||h>g?" disabled":"")+'">'+h+"</span>",h+=1;d.html(y)}},_=function(){e.locale(l.options.language);var t,i,n,o=l.widget.find(".timepicker .timepicker-hours table"),r="";if(o.parent().hide(),l.use24hours)for(t=0,i=0;6>i;i+=1){for(r+="<tr>",n=0;4>n;n+=1)r+='<td class="hour">'+U(t.toString())+"</td>",t++;r+="</tr>"}else for(t=1,i=0;3>i;i+=1){for(r+="<tr>",n=0;4>n;n+=1)r+='<td class="hour">'+U(t.toString())+"</td>",t++;r+="</tr>"}o.html(r)},w=function(){var t,e,i=l.widget.find(".timepicker .timepicker-minutes table"),n="",o=0,r=l.options.minuteStepping;for(i.parent().hide(),1===r&&(r=5),t=0;t<Math.ceil(60/r/4);t++){for(n+="<tr>",e=0;4>e;e+=1)60>o?(n+='<td class="minute">'+U(o.toString())+"</td>",o+=r):n+="<td></td>";n+="</tr>"}i.html(n)},k=function(){var t,e,i=l.widget.find(".timepicker .timepicker-seconds table"),n="",o=0;for(i.parent().hide(),t=0;3>t;t++){for(n+="<tr>",e=0;4>e;e+=1)n+='<td class="second">'+U(o.toString())+"</td>",o+=5;n+="</tr>"}i.html(n)},C=function(){if(l.date){var t=l.widget.find(".timepicker span[data-time-component]"),e=l.date.hours(),i=l.date.format("A");l.use24hours||(0===e?e=12:12!==e&&(e%=12),l.widget.find(".timepicker [data-action=togglePeriod]").text(i)),t.filter("[data-time-component=hours]").text(U(e)),t.filter("[data-time-component=minutes]").text(U(l.date.minutes())),t.filter("[data-time-component=seconds]").text(U(l.date.second()))}},x=function(i){i.stopPropagation(),i.preventDefault(),l.unset=!1;var n,o,r,s,a=t(i.target).closest("span, td, th"),c=e(l.date);if(1===a.length&&!a.is(".disabled"))switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"picker-switch":A(1);break;case"prev":case"next":r=z.modes[l.viewMode].navStep,"prev"===a[0].className&&(r=-1*r),l.viewDate.add(r,z.modes[l.viewMode].navFnc),b()}break;case"span":a.is(".month")?(n=a.parent().find("span").index(a),l.viewDate.month(n)):(o=parseInt(a.text(),10)||0,l.viewDate.year(o)),l.viewMode===l.minViewMode&&(l.date=e({y:l.viewDate.year(),M:l.viewDate.month(),d:l.viewDate.date(),h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),P(),f(c,i.type)),A(-1),b();break;case"td":a.is(".day")&&(s=parseInt(a.text(),10)||1,n=l.viewDate.month(),o=l.viewDate.year(),a.is(".old")?0===n?(n=11,o-=1):n-=1:a.is(".new")&&(11===n?(n=0,o+=1):n+=1),l.date=e({y:o,M:n,d:s,h:l.date.hours(),m:l.date.minutes(),s:l.date.seconds()}),l.viewDate=e({y:o,M:n,d:Math.min(28,s)}),b(),P(),f(c,i.type))}},S={incrementHours:function(){F("add","hours",1)},incrementMinutes:function(){F("add","minutes",l.options.minuteStepping)},incrementSeconds:function(){F("add","seconds",1)},decrementHours:function(){F("subtract","hours",1)},decrementMinutes:function(){F("subtract","minutes",l.options.minuteStepping)},decrementSeconds:function(){F("subtract","seconds",1)},togglePeriod:function(){var t=l.date.hours();t>=12?t-=12:t+=12,l.date.hours(t)},showPicker:function(){l.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),l.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){l.widget.find(".timepicker .timepicker-picker").hide(),l.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=parseInt(t(e.target).text(),10);l.use24hours||(l.date.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),l.date.hours(i),S.showPicker.call(l)},selectMinute:function(e){l.date.minutes(parseInt(t(e.target).text(),10)),S.showPicker.call(l)},selectSecond:function(e){l.date.seconds(parseInt(t(e.target).text(),10)),S.showPicker.call(l)}},T=function(i){var n=e(l.date),o=t(i.currentTarget).data("action"),r=S[o].apply(l,arguments);return D(i),l.date||(l.date=e({y:1970})),P(),C(),f(n,i.type),r},D=function(t){t.stopPropagation(),t.preventDefault()},M=function(t){27===t.keyCode&&l.hide()},E=function(i){e.locale(l.options.language);var n=t(i.target),o=e(l.date),r=e(n.val(),l.format,l.options.useStrict);r.isValid()&&!B(r)&&H(r)?(g(),l.setValue(r),f(o,i.type),P()):(l.viewDate=o,l.unset=!0,f(o,i.type),m(r))},A=function(t){t&&(l.viewMode=Math.max(l.minViewMode,Math.min(2,l.viewMode+t))),l.widget.find(".datepicker > div").hide().filter(".datepicker-"+z.modes[l.viewMode].clsName).show()},O=function(){var e,i,n,o,r;l.widget.on("click",".datepicker *",t.proxy(x,this)),l.widget.on("click","[data-action]",t.proxy(T,this)),l.widget.on("mousedown",t.proxy(D,this)),l.element.on("keydown",t.proxy(M,this)),l.options.pickDate&&l.options.pickTime&&l.widget.on("click.togglePicker",".accordion-toggle",function(s){if(s.stopPropagation(),e=t(this),i=e.closest("ul"),n=i.find(".in"),o=i.find(".collapse:not(.in)"),n&&n.length){if(r=n.data("collapse"),r&&r.transitioning)return;n.collapse("hide"),o.collapse("show"),e.find("span").toggleClass(l.options.icons.time+" "+l.options.icons.date),l.component&&l.component.find("span").toggleClass(l.options.icons.time+" "+l.options.icons.date)}}),l.isInput?l.element.on({click:t.proxy(l.show,this),focus:t.proxy(l.show,this),change:t.proxy(E,this),blur:t.proxy(l.hide,this)}):(l.element.on({change:t.proxy(E,this)},"input"),l.component?(l.component.on("click",t.proxy(l.show,this)),l.component.on("mousedown",t.proxy(D,this))):l.element.on("click",t.proxy(l.show,this)))},N=function(){t(window).on("resize.datetimepicker"+l.id,t.proxy(p,this)),l.isInput||t(document).on("mousedown.datetimepicker"+l.id,t.proxy(l.hide,this))},R=function(){l.widget.off("click",".datepicker *",l.click),l.widget.off("click","[data-action]"),l.widget.off("mousedown",l.stopEvent),l.options.pickDate&&l.options.pickTime&&l.widget.off("click.togglePicker"),l.isInput?l.element.off({focus:l.show,change:E,click:l.show,blur:l.hide}):(l.element.off({change:E},"input"),l.component?(l.component.off("click",l.show),l.component.off("mousedown",l.stopEvent)):l.element.off("click",l.show))},I=function(){t(window).off("resize.datetimepicker"+l.id),l.isInput||t(document).off("mousedown.datetimepicker"+l.id)},Y=function(){if(l.element){var e,i=l.element.parents(),n=!1;for(e=0;e<i.length;e++)if("fixed"===t(i[e]).css("position")){n=!0;break}return n}return!1},P=function(){e.locale(l.options.language);var t="";l.unset||(t=e(l.date).format(l.format)),u().val(t),l.element.data("date",t),l.options.pickTime||l.hide()},F=function(t,i,n){e.locale(l.options.language);var o;return"add"===t?(o=e(l.date),23===o.hours()&&o.add(n,i),o.add(n,i)):o=e(l.date).subtract(n,i),B(e(o.subtract(n,i)))||B(o)?void m(o.format(l.format)):("add"===t?l.date.add(n,i):l.date.subtract(n,i),void(l.unset=!1))},B=function(t,i){e.locale(l.options.language);var n=e(l.options.maxDate,l.format,l.options.useStrict),o=e(l.options.minDate,l.format,l.options.useStrict);return i&&(n=n.endOf(i),o=o.startOf(i)),t.isAfter(n)||t.isBefore(o)?!0:l.options.disabledDates===!1?!1:l.options.disabledDates[t.format("YYYY-MM-DD")]===!0},H=function(t){return e.locale(l.options.language),l.options.enabledDates===!1?!0:l.options.enabledDates[t.format("YYYY-MM-DD")]===!0},L=function(t){var i,n={},o=0;for(i=0;i<t.length;i++)r=e.isMoment(t[i])||t[i]instanceof Date?e(t[i]):e(t[i],l.format,l.options.useStrict),r.isValid()&&(n[r.format("YYYY-MM-DD")]=!0,o++);return o>0?n:!1},U=function(t){return t=t.toString(),t.length>=2?t:"0"+t},W=function(){var t='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(l.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',e='<tbody><tr><td colspan="'+(l.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',i='<div class="datepicker-days"><table class="table-condensed">'+t+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+t+e+'</table></div><div class="datepicker-years"><table class="table-condensed">'+t+e+"</table></div>",n="";return l.options.pickDate&&l.options.pickTime?(n='<div class="bootstrap-datetimepicker-widget'+(l.options.sideBySide?" timepicker-sbs":"")+(l.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',n+=l.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+i+'</div><div class="col-sm-6 timepicker">'+j.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(l.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+i+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+l.options.icons.time+'"></span></a></li><li'+(l.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+j.getTemplate()+"</div></li></ul>",n+="</div>"):l.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+j.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+i+"</div></div>"},z={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},j={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};j.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+l.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+l.options.icons.up+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+l.options.icons.up+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+j.hourTemplate+'</td> <td class="separator">:</td><td>'+(l.options.useMinutes?j.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(l.options.useSeconds?'<td class="separator">:</td><td>'+j.secondTemplate+"</td>":"")+(l.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+l.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(l.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+l.options.icons.down+'"></span></a>':"")+"</td>"+(l.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+l.options.icons.down+'"></span></a></td>':"")+(l.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(l.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},l.destroy=function(){R(),I(),l.widget.remove(),l.element.removeData("DateTimePicker"),l.component&&l.component.removeData("DateTimePicker")},l.show=function(t){if(!u().prop("disabled")){if(l.options.useCurrent&&""===u().val()){if(1!==l.options.minuteStepping){var i=e(),n=l.options.minuteStepping;i.minutes(Math.round(i.minutes()/n)*n%60).seconds(0),l.setValue(i.format(l.format))}else l.setValue(e().format(l.format));f("",t.type)}t&&"click"===t.type&&l.isInput&&l.widget.hasClass("picker-open")||(l.widget.hasClass("picker-open")?(l.widget.hide(),l.widget.removeClass("picker-open")):(l.widget.show(),l.widget.addClass("picker-open")),l.height=l.component?l.component.outerHeight():l.element.outerHeight(),p(),l.element.trigger({type:"dp.show",date:e(l.date)}),N(),t&&D(t))}},l.disable=function(){var t=u();t.prop("disabled")||(t.prop("disabled",!0),R())},l.enable=function(){var t=u();t.prop("disabled")&&(t.prop("disabled",!1),O())},l.hide=function(){var t,i,n=l.widget.find(".collapse");for(t=0;t<n.length;t++)if(i=n.eq(t).data("collapse"),i&&i.transitioning)return;l.widget.hide(),l.widget.removeClass("picker-open"),l.viewMode=l.startViewMode,A(),l.element.trigger({type:"dp.hide",date:e(l.date)}),I()},l.setValue=function(t){e.locale(l.options.language),t?l.unset=!1:(l.unset=!0,P()),t=e.isMoment(t)?t.locale(l.options.language):t instanceof Date?e(t):e(t,l.format,l.options.useStrict),t.isValid()?(l.date=t,P(),l.viewDate=e({y:l.date.year(),M:l.date.month()}),b(),C()):m(t)},l.getDate=function(){return l.unset?null:e(l.date)},l.setDate=function(t){var i=e(l.date);l.setValue(t?t:null),f(i,"function")},l.setDisabledDates=function(t){l.options.disabledDates=L(t),l.viewDate&&g()},l.setEnabledDates=function(t){l.options.enabledDates=L(t),l.viewDate&&g()},l.setMaxDate=function(t){void 0!==t&&(l.options.maxDate=e.isMoment(t)||t instanceof Date?e(t):e(t,l.format,l.options.useStrict),l.viewDate&&g())},l.setMinDate=function(t){void 0!==t&&(l.options.minDate=e.isMoment(t)||t instanceof Date?e(t):e(t,l.format,l.options.useStrict),l.viewDate&&g())},d()};t.fn.datetimepicker=function(e){return this.each(function(){var i=t(this),o=i.data("DateTimePicker");o||i.data("DateTimePicker",new n(this,e))})},t.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:e({y:1900}),maxDate:e().add(100,"y"),showToday:!0,collapse:!0,language:e.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),function(t){function e(t,e,o){var r=t[0],s=/er/.test(o)?_indeterminate:/bl/.test(o)?f:h,a=o==_update?{checked:r[h],disabled:r[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:r[s];if(/^(ch|di|in)/.test(o)&&!a)i(t,s);else if(/^(un|en|de)/.test(o)&&a)n(t,s);else if(o==_update)for(var l in a)a[l]?i(t,l,!0):n(t,l,!0);else e&&"toggle"!=o||(e||t[_callback]("ifClicked"),a?r[_type]!==u&&n(t,s):i(t,s))}function i(e,i,o){var d=e[0],m=e.parent(),g=i==h,v=i==_indeterminate,y=i==f,b=v?_determinate:g?p:"enabled",_=r(e,b+s(d[_type])),w=r(e,i+s(d[_type]));if(d[i]!==!0){if(!o&&i==h&&d[_type]==u&&d.name){var k=e.closest("form"),C='input[name="'+d.name+'"]';C=k.length?k.find(C):t(C),C.each(function(){this!==d&&t(this).data(l)&&n(t(this),i)})}v?(d[i]=!0,d[h]&&n(e,h,"force")):(o||(d[i]=!0),g&&d[_indeterminate]&&n(e,_indeterminate,!1)),a(e,g,i,o)}d[f]&&r(e,_cursor,!0)&&m.find("."+c).css(_cursor,"default"),m[_add](w||r(e,i)||""),m.attr("role")&&!v&&m.attr("aria-"+(y?f:h),"true"),m[_remove](_||r(e,b)||"")}function n(t,e,i){var n=t[0],o=t.parent(),l=e==h,d=e==_indeterminate,u=e==f,m=d?_determinate:l?p:"enabled",g=r(t,m+s(n[_type])),v=r(t,e+s(n[_type]));n[e]!==!1&&((d||!i||"force"==i)&&(n[e]=!1),a(t,l,m,i)),!n[f]&&r(t,_cursor,!0)&&o.find("."+c).css(_cursor,"pointer"),o[_remove](v||r(t,e)||""),o.attr("role")&&!d&&o.attr("aria-"+(u?f:h),"false"),o[_add](g||r(t,m)||"")}function o(e,i){e.data(l)&&(e.parent().html(e.attr("style",e.data(l).s||"")),i&&e[_callback](i),e.off(".i").unwrap(),t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function r(t,e,i){return t.data(l)?t.data(l).o[e+(i?"":"Class")]:void 0}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,i,n){n||(e&&t[_callback]("ifToggled"),t[_callback]("ifChanged")[_callback]("if"+s(i)))}var l="iCheck",c=l+"-helper",d="checkbox",u="radio",h="checked",p="un"+h,f="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),t.fn[l]=function(r,s){var a='input[type="'+d+'"], input[type="'+u+'"]',p=t(),m=function(e){e.each(function(){var e=t(this);p=p.add(e.is(a)?e:e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),m(this),p.each(function(){var i=t(this);"destroy"==r?o(i,"ifDestroyed"):e(i,!0,r),t.isFunction(s)&&s()});if("object"!=typeof r&&r)return this;var g=t.extend({checkedClass:h,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},r),v=g.handle,y=g.hoverClass||"hover",b=g.focusClass||"focus",_=g.activeClass||"active",w=!!g.labelHover,k=g.labelHoverClass||"hover",C=0|(""+g.increaseArea).replace("%","");
return(v==d||v==u)&&(a='input[type="'+v+'"]'),-50>C&&(C=-50),m(this),p.each(function(){var r=t(this);o(r);var s,a=this,p=a.id,m=-C+"%",v=100+2*C+"%",x={position:"absolute",top:m,left:m,display:"block",width:v,height:v,margin:0,padding:0,background:"#fff",border:0,opacity:0},S=_mobile?{position:"absolute",visibility:"hidden"}:C?x:{position:"absolute",opacity:0},T=a[_type]==d?g.checkboxClass||"i"+d:g.radioClass||"i"+u,D=t(_label+'[for="'+p+'"]').add(r.closest(_label)),M=!!g.aria,E=l+"-"+Math.random().toString(36).substr(2,6),A='<div class="'+T+'" '+(M?'role="'+a[_type]+'" ':"");M&&D.each(function(){A+='aria-labelledby="',this.id?A+=this.id:(this.id=E,A+=E),A+='"'}),A=r.wrap(A+"/>")[_callback]("ifCreated").parent().append(g.insert),s=t('<ins class="'+c+'"/>').css(x).appendTo(A),r.data(l,{o:g,s:r.attr("style")}).css(S),!!g.inheritClass&&A[_add](a.className||""),!!g.inheritID&&p&&A.attr("id",l+"-"+p),"static"==A.css("position")&&A.css("position","relative"),e(r,!0,_update),D.length&&D.on(_click+".i mouseover.i mouseout.i "+_touch,function(i){var n=i[_type],o=t(this);if(!a[f]){if(n==_click){if(t(i.target).is("a"))return;e(r,!1,!0)}else w&&(/ut|nd/.test(n)?(A[_remove](y),o[_remove](k)):(A[_add](y),o[_add](k)));if(!_mobile)return!1;i.stopPropagation()}}),r.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type],o=t.keyCode;return e==_click?!1:"keydown"==e&&32==o?(a[_type]==u&&a[h]||(a[h]?n(r,h):i(r,h)),!1):void("keyup"==e&&a[_type]==u?!a[h]&&i(r,h):/us|ur/.test(e)&&A["blur"==e?_remove:_add](b))}),s.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var i=t[_type],n=/wn|up/.test(i)?_:y;if(!a[f]){if(i==_click?e(r,!1,!0):(/wn|er|in/.test(i)?A[_add](n):A[_remove](n+" "+_),D.length&&w&&n==y&&D[/ut|nd/.test(i)?_remove:_add](k)),!_mobile)return!1;t.stopPropagation()}})})}}(window.jQuery||window.Zepto),!function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),n=-1,o=this.length;++n<o&&(i.context=i[0]=this[n])&&e.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function n(t){function e(t){return L[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function o(t,e){for(var i=0,n=e.length;n>i;i+=1)if(s(t,e[i]))return i;return-1}function r(){var e=t(H);e.appendTo(document.body);var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function s(t,i){return t===i?!0:t===e||i===e?!1:null===t||null===i?!1:t.constructor===String?t+""==i+"":i.constructor===String?i+""==t+"":!1}function a(t,e,i){var n,o,r;if(null===t||t.length<1)return[];for(n=t.split(e),o=0,r=n.length;r>o;o+=1)n[o]=i(n[o]);return n}function l(t){return t.outerWidth(!1)-t.width()}function c(i){var n="keyup-change-value";i.on("keydown",function(){t.data(i,n)===e&&t.data(i,n,i.val())}),i.on("keyup",function(){var o=t.data(i,n);o!==e&&i.val()!==o&&(t.removeData(i,n),i.trigger("keyup-change"))})}function d(i){i.on("mousemove",function(i){var n=F;(n===e||n.x!==i.pageX||n.y!==i.pageY)&&t(i.target).trigger("mousemove-filtered",i)})}function u(t,i,n){n=n||e;var o;return function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,e)},t)}}function h(t,e){var i=u(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){o(t.target,e.get())>=0&&i(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],n=t.val().length;t.focus();var o=i.offsetWidth>0||i.offsetHeight>0;o&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var i=0,n=0;if("selectionStart"in e)i=e.selectionStart,n=e.selectionEnd-i;else if("selection"in document){e.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-e.value.length),i=o.text.length-n}return{offset:i,length:n}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!I){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);I=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),t(document.body).append(I)}return I.text(e.val()),I.width()}function y(e,i,n){var o,r,s=[];o=t.trim(e.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),o=t.trim(i.attr("class")),o&&(o=""+o,t(o.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(r=n(this),r&&s.push(r))})),e.attr("class",s.join(" "))}function b(t,e,i,o){var r=n(t.toUpperCase()).indexOf(n(e.toUpperCase())),s=e.length;return 0>r?void i.push(o(t)):(i.push(o(t.substring(0,r))),i.push("<span class='select2-match'>"),i.push(o(t.substring(r,r+s))),i.push("</span>"),void i.push(o(t.substring(r+s,t.length))))}function _(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function w(i){var n,o=null,r=i.quietMillis||100,s=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,r=s,c=i.transport||t.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,d);n=n?n.call(a,l.term,l.page,l.context):null,r="function"==typeof r?r.call(a,l.term,l.page,l.context):r,o&&"function"==typeof o.abort&&o.abort(),i.params&&(t.isFunction(i.params)?t.extend(u,i.params.call(a)):t.extend(u,i.params)),t.extend(u,{url:r,dataType:i.dataType,data:n,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var n={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(n)}}),o=c.call(a,u)},r)}}function k(e){var i,n,o=e,r=function(t){return""+t.text};t.isArray(o)&&(n=o,o={results:n}),t.isFunction(o)===!1&&(n=o,o=function(){return n});var s=o();return s.text&&(r=s.text,t.isFunction(r)||(i=s.text,r=function(t){return t[i]})),function(e){var i,n=e.term,s={results:[]};return""===n?void e.callback(o()):(i=function(o,s){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],t(o.children).each2(function(t,e){i(e,a.children)}),(a.children.length||e.matcher(n,r(a),o))&&s.push(a)}else e.matcher(n,r(o),o)&&s.push(o)},t(o().results).each2(function(t,e){i(e,s.results)}),void e.callback(s))}}function C(i){var n=t.isFunction(i);return function(o){var r=o.term,s={results:[]},a=n?i(o):i;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,i=t?this.text:this;(""===r||o.matcher(r,i))&&s.results.push(t?this:{id:this,text:this})}),o.callback(s))}}function x(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function S(e,i){if(t.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(i,n)}return e}function T(e){var i=0;return t.each(e,function(t,e){e.children?i+=T(e.children):i++}),i}function D(t,i,n,o){var r,a,l,c,d,u=t,h=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(d=o.tokenSeparators[l],a=t.indexOf(d),!(a>=0));l++);if(0>a)break;if(r=t.substring(0,a),t=t.substring(a+d.length),r.length>0&&(r=o.createSearchChoice.call(this,r,i),r!==e&&null!==r&&o.id(r)!==e&&null!==o.id(r))){for(h=!1,l=0,c=i.length;c>l;l++)if(s(o.id(r),o.id(i[l]))){h=!0;break}h||n(r)}}return u!==t?t:void 0}function M(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function E(e,i){var n=function(){};return n.prototype=new e,n.prototype.constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}if(window.Select2===e){var A,O,N,R,I,Y,P,F={x:0,y:0},B={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case B.LEFT:case B.RIGHT:case B.UP:case B.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case B.SHIFT:case B.CTRL:case B.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},H="<div class='select2-measure-scrollbar'></div>",L={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};Y=t(document),R=function(){var t=1;return function(){return t++}}(),A=E(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,o,s=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+R()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t(document.body),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(S(i.containerCss,this.opts.element)),this.container.addClass(S(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(s),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),d(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&n.mousewheel(function(t,e,i,o){var r=n.scrollTop();o>0&&0>=r-o?(n.scrollTop(0),m(t)):0>o&&n.get(0).scrollHeight-n.scrollTop()+o<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(t))}),c(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var l=i.element.prop("readonly");l===e&&(l=!1),this.readonly(l),P=P||r(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&n._sync&&t.each(function(){n._sync&&this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),M.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:s(t.attr("locked"),"locked")||s(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,o,r,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=o=i.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(n,o,r){var s,a=this.opts.id,l=this.liveRegion;(s=function(n,o,d){var u,h,p,f,m,g,v,y,b,_;n=i.sortResults(n,o,r);var w=[];for(u=0,h=n.length;h>u;u+=1)p=n[u],m=p.disabled===!0,f=!m&&a(p)!==e,g=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+d),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),y=t(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+R()),y.attr("role","option"),_=i.formatResult(p,y,r,c.opts.escapeMarkup),_!==e&&(y.html(_),v.append(y)),g&&(b=t("<ul></ul>"),b.addClass("select2-result-sub"),s(p.children,b,d+1),v.append(b)),v.data("select2-data",p),w.push(v[0]);o.append(w),l.text(i.formatMatches(n.length))})(o,n,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(r=i.id,i.id=function(t){return t[r]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(t){var i,o,r,s={results:[],more:!1},a=t.term;r=function(e,i){var n;e.is("option")?t.matcher(a,e.text(),e)&&i.push(c.optionToData(e)):e.is("optgroup")&&(n=c.optionToData(e),e.children().each2(function(t,e){r(e,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==e&&i.length>0&&(o=this.getPlaceholderOption(),o&&(i=i.not(o))),i.each2(function(t,e){r(e,s.results)}),t.callback(s)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=w.call(i.element,i.ajax)):"data"in i?i.query=k(i.data):"tags"in i&&(i.query=C(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,n){var o=[];t(a(e.val(),i.separator,i.transformVal)).each(function(){var e={id:this,text:this},n=i.tags;t.isFunction(n)&&(n=n()),t(n).each(function(){return s(this.id,e.id)?(e=this,!1):void 0}),o.push(e)}),n(o)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,o=this;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),this.container&&(y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass,this.opts.element)))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",o._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,o._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,i,n,o,r,s=this.dropdown,a=this.container,l=a.offset(),c=a.outerHeight(!1),d=a.outerWidth(!1),u=s.outerHeight(!1),h=t(window),p=h.width(),f=h.height(),m=h.scrollLeft()+p,g=h.scrollTop()+f,v=l.top+c,y=l.left,b=g>=v+u,_=l.top-u>=h.scrollTop(),w=s.outerWidth(!1),k=function(){return m>=y+w},C=function(){return l.left+m+a.outerWidth(!1)>w},x=s.hasClass("select2-drop-above");x?(i=!0,!_&&b&&(n=!0,i=!1)):(i=!1,!b&&_&&(n=!0,i=!0)),n&&(s.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=s.outerHeight(!1),m=h.scrollLeft()+p,g=h.scrollTop()+f,v=l.top+c,y=l.left,w=s.outerWidth(!1),s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),w=s.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:P.width),w>d?d=w:w=d,u=s.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),v-=e.top,y-=e.left),!k()&&C()&&(y=l.left+this.container.outerWidth(!1)-w),o={left:y,width:d},i?(o.top=l.top-u,o.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(o.top=v,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=t.extend(o,S(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),Y.on("mousemove.select2Event",function(t){F.x=t.pageX,F.y=t.pageY}),!0):!1},opening:function(){var e,n=this.containerEventName,o="scroll."+n,r="resize."+n,s="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0===e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(n){i(e);var o,r=t("#select2-drop");r.length>0&&(o=r.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){t(this).on(r+" "+o+" "+s,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,n="resize."+e,o="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(n).off(o)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),Y.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))
}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,n,o,r,s,a,l,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),n=t(e[i]),l=(n.offset()||{}).top||0,o=l+n.outerHeight(!0),i===e.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),r=c.offset().top+c.outerHeight(!1),o>r&&c.scrollTop(c.scrollTop()+(o-r)),s=l-c.offset().top,0>s&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=e;var o=t(i[n]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var i,n,r=this.findHighlightableChoices();return 0===arguments.length?o(r.filter(".select2-highlighted")[0],r.get()):(e>=r.length&&(e=r.length-1),0>e&&(e=0),this.removeHighlight(),i=t(r[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),n=i.data("select2-data"),void(n&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),n=this.resultsPage+1,o=this,r=this.search.val(),s=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){o.opened()&&(o.opts.populateResults.call(this,e,t.results,{term:r,page:n,context:s}),o.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).html(o.opts.escapeMarkup(S(o.opts.formatLoadMore,o.opts.element,n+1))),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(d.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.text():h.opts.formatMatches(d.find('.select2-result-selectable:not(".select2-selected")').length))}function o(t){d.html(t),n()}var r,a,l,c=this.search,d=this.results,u=this.opts,h=this,p=c.val(),f=t.data(this.container,"select2-last-term");if((i===!0||!f||!s(p,f))&&(t.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(r=this.data(),t.isArray(r)&&r.length>=m&&x(u.formatSelectionTooBig,"formatSelectionTooBig")))return void o("<li class='select2-selection-limit'>"+S(u.formatSelectionTooBig,u.element,m)+"</li>");if(c.val().length<u.minimumInputLength)return o(x(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+S(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void o(x(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+S(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+S(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=e&&null!=a&&c.val(a),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(r){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(r.hasError!==e&&x(u.formatAjaxError,"formatAjaxError"))return void o("<li class='select2-ajax-error'>"+S(u.formatAjaxError,u.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>");if(this.context=r.context===e?null:r.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),r.results),a!==e&&null!==a&&h.id(a)!==e&&null!==h.id(a)&&0===t(r.results).filter(function(){return s(h.id(this),h.id(a))}).length&&this.opts.createSearchChoicePosition(r.results,a)),0===r.results.length&&x(u.formatNoMatches,"formatNoMatches"))return void o("<li class='select2-no-results'>"+S(u.formatNoMatches,u.element,c.val())+"</li>");d.empty(),h.opts.populateResults.call(this,d,r.results,{term:c.val(),page:this.resultsPage,context:null}),r.more===!0&&x(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.escapeMarkup(S(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,n,o,r,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(n=i.split(";"),r=0,s=n.length;s>r;r+=1)if(a=n[r].replace(/\s/g,""),o=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),O=E(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(o=this.search.val().length,i.setSelectionRange(o,o))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"selection","focusser")},initContainer:function(){var e,n,o=this.container,r=this.dropdown,s=R();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=e=o.find(".select2-choice"),this.focusser=o.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),n=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===B.PAGE_UP||t.which===B.PAGE_DOWN)return void m(t);switch(t.which){case B.UP:case B.DOWN:return this.moveHighlight(t.which===B.UP?-1:1),void m(t);case B.ENTER:return this.selectHighlighted(),void m(t);case B.TAB:return void this.selectHighlighted({noFocus:!0});case B.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==B.TAB&&!B.isControl(t)&&!B.isFunctionKey(t)&&t.which!==B.ESC){if(this.opts.openOnEnter===!1&&t.which===B.ENTER)return void m(t);if(t.which==B.DOWN||t.which==B.UP||t.which==B.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==B.DELETE||t.which==B.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection&&this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(n){i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(n)})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var n=t.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=i.val(),r=null;e.query({matcher:function(t,i,n){var a=s(o,e.id(n));return a&&(r=n),a},callback:t.isFunction(n)?function(){n(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(t,e){return s(o.id(e.data("select2-data")),o.opts.element.val())?(n=t,!1):void 0}),i!==!1&&this.highlight(e===!0&&n>=0?n:0),e===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(T(t.results)>=r)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),s(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),o.empty(),null!==t&&(i=this.opts.formatSelection(t,o,this.opts.escapeMarkup)),i!==e&&o.append(i),n=this.opts.formatSelectionCssClass(t,o),n!==e&&o.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,o=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return n=o.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:r});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){o.opts.element.val(t?o.id(t):""),o.updateSelection(t),o.setPlaceholder(),i&&o.triggerChange({added:t,removed:r})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(arguments.length>1&&(n=arguments[1]),void(t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n)))}}),N=E(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=a(i.val(),e.separator,e.transformVal),r=[];e.query({matcher:function(i,n,a){var l=t.grep(o,function(t){return s(t,e.id(a))}).length;return l&&r.push(a),l},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<o.length;i++)for(var a=o[i],l=0;l<r.length;l++){var c=r[l];if(s(a,e.id(c))){t.push(c),r.splice(l,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){n.search[0].focus(),n.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+R()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),r=f(this.search);if(i.length&&(t.which==B.LEFT||t.which==B.RIGHT||t.which==B.BACKSPACE||t.which==B.DELETE||t.which==B.ENTER)){var s=i;return t.which==B.LEFT&&n.length?s=n:t.which==B.RIGHT?s=o.length?o:null:t.which===B.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=n.length?n:o):t.which==B.DELETE?this.unselect(i.first())&&(this.search.width(10),s=o.length?o:null):t.which==B.ENTER&&(s=null),this.selectChoice(s),m(t),void(s&&s.length||this.open())}if((t.which===B.BACKSPACE&&1==this.keydowns||t.which==B.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case B.UP:case B.DOWN:return this.moveHighlight(t.which===B.UP?-1:1),void m(t);case B.ENTER:return this.selectHighlighted(),void m(t);case B.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case B.ESC:return this.cancel(t),void m(t)}if(t.which!==B.TAB&&!B.isControl(t)&&!B.isFunctionKey(t)&&t.which!==B.BACKSPACE&&t.which!==B.ESC){if(t.which===B.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===B.PAGE_UP||t.which===B.PAGE_DOWN)&&m(t),t.which===B.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],n=[],r=this;t(e).each(function(){o(r.id(this),i)<0&&(i.push(r.id(this)),n.push(this))}),e=n,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,o,r=!i.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?s:a,c=this.id(i),d=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=e&&l.find("div").replaceWith(t("<div></div>").html(n)),o=this.opts.formatSelectionCssClass(i,l.find("div")),o!=e&&l.addClass(o),r&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(e){var i,n,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(i),s.choice=i,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(n=o(this.id(i),r))>=0;)r.splice(n,1),this.setVal(r),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),r=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;r.each2(function(t,e){var i=a.id(e.data("select2-data"));o(i,n)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&this.opts.closeOnSelect===!0&&a.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&x(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+S(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,i,n,o,r=l(this.search);t=v(this.search)+10,e=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,o=i-(e-n)-r,t>o&&(o=i-r),40>o&&(o=i-r),0>=o&&(o=t),this.search.width(Math.floor(o))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator,this.opts.transformVal))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){o(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var n=0;n<t.length;n++)s(this.opts.id(e[i]),this.opts.id(t[n]))&&(e.splice(i,1),i>0&&i--,t.splice(n,1),n--);return{added:e,removed:t}},val:function(i,n){var o,r=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,r.id);r.setVal(i),r.updateSelection(e),r.clearSearch(),n&&r.triggerChange(r.buildChangeDetails(o,r.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var n,o,r=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(o=this.data(),e||(e=[]),n=t.map(e,function(t){return r.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),void(i&&this.triggerChange(this.buildChangeDetails(o,this.data()))))}}),t.fn.select2=function(){var i,n,r,s,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:t.extend({},l[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),n=a?new window.Select2["class"].multi:new window.Select2["class"].single,n.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(o(l[0],c)<0)throw"Unknown method: "+l[0];if(s=e,n=t(this).data("select2"),n===e)return;if(r=l[0],"container"===r?s=n.container:"dropdown"===r?s=n.dropdown:(h[r]&&(r=h[r]),s=n[r].apply(n,l.slice(1))),o(l[0],d)>=0||o(l[0],u)>=0&&1==l.length)return!1}}),s===e?this:s},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var o=[];return b(this.text(t),i.term,o,n),o.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,i,n){return t?n(this.text(t)):e},sortResults:function(t){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text
},matcher:function(t,e){return n(""+e).toUpperCase().indexOf(n(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:D,escapeMarkup:_,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:k,tags:C},util:{debounce:u,markMatch:b,escapeMarkup:_,stripDiacritics:n},"class":{"abstract":A,single:O,multi:N}}}}(jQuery),function(t){"use strict";t.fn.select2.locales["zh-CN"]={formatNoMatches:function(){return"\u6ca1\u6709\u627e\u5230\u5339\u914d\u9879"},formatInputTooShort:function(t,e){var i=e-t.length;return"\u8bf7\u518d\u8f93\u5165"+i+"\u4e2a\u5b57\u7b26"},formatInputTooLong:function(t,e){var i=t.length-e;return"\u8bf7\u5220\u6389"+i+"\u4e2a\u5b57\u7b26"},formatSelectionTooBig:function(t){return"\u4f60\u53ea\u80fd\u9009\u62e9\u6700\u591a"+t+"\u9879"},formatLoadMore:function(){return"\u52a0\u8f7d\u7ed3\u679c\u4e2d\u2026"},formatSearching:function(){return"\u641c\u7d22\u4e2d\u2026"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales["zh-CN"])}(jQuery),function(t){"use strict";var e=function(e,i){this.options=i,this.$elementFilestyle=[],this.$element=t(e)};e.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},disabled:function(t){if(t===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(t!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(t){if(t===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(t!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(t){if(t===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(t!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".glyphicon").remove())}},input:function(t){if(t===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(t!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var e=this.pushNameFiles();e.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(t){if(void 0===t)return this.options.size;var e=this.$elementFilestyle.find("label"),i=this.$elementFilestyle.find("input");e.removeClass("btn-lg btn-sm"),i.removeClass("input-lg input-sm"),"nr"!=t&&(e.addClass("btn-"+t),i.addClass("input-"+t))},buttonText:function(t){return void 0===t?this.options.buttonText:(this.options.buttonText=t,void this.$elementFilestyle.find("label span").html(this.options.buttonText))},buttonName:function(t){return void 0===t?this.options.buttonName:(this.options.buttonName=t,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(t){return void 0===t?this.options.iconName:void this.$elementFilestyle.find(".glyphicon").attr({"class":".glyphicon "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="glyphicon '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" disabled> ':""},pushNameFiles:function(){var t="",e=[];void 0===this.$element[0].files?e[0]={name:this.$element[0]&&this.$element[0].value}:e=this.$element[0].files;for(var i=0;i<e.length;i++)t+=e[i].name.split("\\").pop()+", ";return this.$elementFilestyle.find(":text").val(""!==t?t.replace(/\, $/g,""):""),e},constructor:function(){var e=this,i="",n=e.$element.attr("id"),o="";""!==n&&n||(n="filestyle-"+t(".bootstrap-filestyle").length,e.$element.attr({id:n})),o='<span class="group-span-filestyle '+(e.options.input?"input-group-btn":"")+'"><label for="'+n+'" class="btn '+e.options.buttonName+" "+("nr"==e.options.size?"":"btn-"+e.options.size)+'" '+(e.options.disabled?'disabled="true"':"")+">"+e.htmlIcon()+e.options.buttonText+"</label></span>",i=e.options.buttonBefore?o+e.htmlInput():e.htmlInput()+o,e.$elementFilestyle=t('<div class="bootstrap-filestyle input-group">'+i+"</div>"),e.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(t){return 13===t.keyCode||32===t.charCode?(e.$elementFilestyle.find("label").click(),!1):void 0}),e.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(e.$elementFilestyle),e.options.disabled&&e.$element.attr("disabled","true"),e.$element.change(function(){var t=e.pushNameFiles();0==e.options.input&&e.options.badge?0==e.$elementFilestyle.find(".badge").length?e.$elementFilestyle.find("label").append(' <span class="badge">'+t.length+"</span>"):0==t.length?e.$elementFilestyle.find(".badge").remove():e.$elementFilestyle.find(".badge").html(t.length):e.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&e.$elementFilestyle.find("label").click(function(){return e.$element.click(),!1})}};var i=t.fn.filestyle;t.fn.filestyle=function(i,n){var o="",r=this.each(function(){if("file"===t(this).attr("type")){var r=t(this),s=r.data("filestyle"),a=t.extend({},t.fn.filestyle.defaults,i,"object"==typeof i&&i);s||(r.data("filestyle",s=new e(this,a)),s.constructor()),"string"==typeof i&&(o=s[i](n))}});return void 0!==typeof o?o:r},t.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1},t.fn.filestyle.noConflict=function(){return t.fn.filestyle=i,this},t(function(){t(".filestyle").each(function(){var e=t(this),i={input:"false"===e.attr("data-input")?!1:!0,icon:"false"===e.attr("data-icon")?!1:!0,buttonBefore:"true"===e.attr("data-buttonBefore")?!0:!1,disabled:"true"===e.attr("data-disabled")?!0:!1,size:e.attr("data-size"),buttonText:e.attr("data-buttonText"),buttonName:e.attr("data-buttonName"),iconName:e.attr("data-iconName"),badge:"false"===e.attr("data-badge")?!1:!0};e.filestyle(i)})})}(window.jQuery),function(t,e){"function"==typeof define&&define.amd?define("simple-module",["jquery"],function(i){return t.returnExportsGlobal=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.SimpleModule=e(jQuery)}(this,function(t){var e,i=[].slice;return e=function(){function e(e){var i,n,o,r,s,a,l;if(this.opts=t.extend({},this.opts,e),(s=this.constructor)._connectedClasses||(s._connectedClasses=[]),o=function(){var t,e,n,o;for(n=this.constructor._connectedClasses,o=[],t=0,e=n.length;e>t;t++)i=n[t],r=i.pluginName.charAt(0).toLowerCase()+i.pluginName.slice(1),i.prototype._connected&&(i.prototype._module=this),o.push(this[r]=new i);return o}.call(this),this._connected)this.opts=t.extend({},this.opts,this._module.opts);else for(this._init(),a=0,l=o.length;l>a;a++)n=o[a],"function"==typeof n._init&&n._init();this.trigger("initialized")}return e.extend=function(t){var e,i,n;if(null!=t&&"object"==typeof t){for(e in t)i=t[e],"included"!==e&&"extended"!==e&&(this[e]=i);return null!=(n=t.extended)?n.call(this):void 0}},e.include=function(t){var e,i,n;if(null!=t&&"object"==typeof t){for(e in t)i=t[e],"included"!==e&&"extended"!==e&&(this.prototype[e]=i);return null!=(n=t.included)?n.call(this):void 0}},e.connect=function(t){if("function"==typeof t){if(!t.pluginName)throw new Error("Module.connect: cannot connect plugin without pluginName");return t.prototype._connected=!0,this._connectedClasses||(this._connectedClasses=[]),this._connectedClasses.push(t),t.pluginName?this[t.pluginName]=t:void 0}},e.prototype.opts={},e.prototype._init=function(){},e.prototype.on=function(){var e,n;return e=1<=arguments.length?i.call(arguments,0):[],(n=t(this)).on.apply(n,e),this},e.prototype.one=function(){var e,n;return e=1<=arguments.length?i.call(arguments,0):[],(n=t(this)).one.apply(n,e),this},e.prototype.off=function(){var e,n;return e=1<=arguments.length?i.call(arguments,0):[],(n=t(this)).off.apply(n,e),this},e.prototype.trigger=function(){var e,n;return e=1<=arguments.length?i.call(arguments,0):[],(n=t(this)).trigger.apply(n,e),this},e.prototype.triggerHandler=function(){var e,n;return e=1<=arguments.length?i.call(arguments,0):[],(n=t(this)).triggerHandler.apply(n,e)},e.prototype._t=function(){var t,e;return t=1<=arguments.length?i.call(arguments,0):[],(e=this.constructor)._t.apply(e,t)},e._t=function(){var t,e,n,o;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],n=(null!=(o=this.i18n[this.locale])?o[e]:void 0)||"",t.length>0?(n=n.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,i,n){return n?i+t[parseInt(n)-1]:i+t.shift()}),n.replace(/%%s/g,"%s")):n},e.i18n={"zh-CN":{}},e.locale="zh-CN",e}()}),function(t,e){"function"==typeof define&&define.amd?define("simple-hotkeys",["jquery","simple-module"],function(i,n){return t.returnExportsGlobal=e(i,n)}):"object"==typeof exports?module.exports=e(require("jquery"),require("simple-module")):(t.simple=t.simple||{},t.simple.hotkeys=e(jQuery,SimpleModule))}(this,function(t,e){var i,n,o={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,e),i.count=0,i.keyNameMap={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",91:"Meta",93:"Meta",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"Multiply",107:"Add",109:"Subtract",110:"Decimal",111:"Divide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",59:";",61:"=",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i.aliases={escape:"esc","delete":"del","return":"enter",ctrl:"control",space:"spacebar",ins:"insert",cmd:"meta",command:"meta",wins:"meta",windows:"meta"},i.normalize=function(t){var e,i,n,o,r,s;for(o=t.toLowerCase().replace(/\s+/gi,"").split("+"),e=r=0,s=o.length;s>r;e=++r)i=o[e],o[e]=this.aliases[i]||i;return n=o.pop(),o.sort().push(n),o.join("_")},i.prototype.opts={el:document},i.prototype._init=function(){return this.id=++this.constructor.count,this._map={},this._delegate="string"==typeof this.opts.el?document:this.opts.el,t(this._delegate).on("keydown.simple-hotkeys-"+this.id,this.opts.el,function(t){return function(e){var i;return null!=(i=t._getHander(e))?i.call(t,e):void 0}}(this))},i.prototype._getHander=function(t){var e,i;if(e=this.constructor.keyNameMap[t.which])return i="",t.altKey&&(i+="alt_"),t.ctrlKey&&(i+="control_"),t.metaKey&&(i+="meta_"),t.shiftKey&&(i+="shift_"),i+=e.toLowerCase(),this._map[i]},i.prototype.respondTo=function(t){return"string"==typeof t?null!=this._map[this.constructor.normalize(t)]:null!=this._getHander(t)},i.prototype.add=function(t,e){return this._map[this.constructor.normalize(t)]=e,this},i.prototype.remove=function(t){return delete this._map[this.constructor.normalize(t)],this},i.prototype.destroy=function(){return t(this._delegate).off(".simple-hotkeys-"+this.id),this._map={},this},i}(e),n=function(t){return new i(t)}}),function(t,e){"function"==typeof define&&define.amd?define("simple-uploader",["jquery","simple-module"],function(i,n){return t.returnExportsGlobal=e(i,n)}):"object"==typeof exports?module.exports=e(require("jquery"),require("simple-module")):(t.simple=t.simple||{},t.simple.uploader=e(jQuery,SimpleModule))}(this,function(t,e){var i,n,o={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,e),i.count=0,i.prototype.opts={url:"",params:null,fileKey:"upload_file",connectionCount:3},i.prototype._init=function(){return this.files=[],this.queue=[],this.id=++i.count,this.on("uploadcomplete",function(e){return function(i,n){return e.files.splice(t.inArray(n,e.files),1),e.queue.length>0&&e.files.length<e.opts.connectionCount?e.upload(e.queue.shift()):e.uploading=!1}}(this)),t(window).on("beforeunload.uploader-"+this.id,function(t){return function(e){return t.uploading?(e.originalEvent.returnValue=t._t("leaveConfirm"),t._t("leaveConfirm")):void 0}}(this))},i.prototype.generateId=function(){var t;return t=0,function(){return t+=1}}(),i.prototype.upload=function(e,i){var n,o,r,s;if(null==i&&(i={}),null!=e){if(t.isArray(e)||e instanceof FileList)for(r=0,s=e.length;s>r;r++)n=e[r],this.upload(n,i);else t(e).is("input:file")?(o=t(e).attr("name"),o&&(i.fileKey=o),this.upload(t.makeArray(t(e)[0].files),i)):e.id&&e.obj||(e=this.getFile(e));if(e&&e.obj){if(t.extend(e,i),this.files.length>=this.opts.connectionCount)return void this.queue.push(e);if(this.triggerHandler("beforeupload",[e])!==!1)return this.files.push(e),this._xhrUpload(e),this.uploading=!0}}},i.prototype.getFile=function(t){var e,i,n;return t instanceof window.File||t instanceof window.Blob?(e=null!=(i=t.fileName)?i:t.name,{id:this.generateId(),url:this.opts.url,params:this.opts.params,fileKey:this.opts.fileKey,name:e,size:null!=(n=t.fileSize)?n:t.size,ext:e?e.split(".").pop().toLowerCase():"",obj:t}):null},i.prototype._xhrUpload=function(e){var i,n,o,r;if(i=new FormData,i.append(e.fileKey,e.obj),i.append("original_filename",e.name),e.params){r=e.params;for(n in r)o=r[n],i.append(n,o)}return e.xhr=t.ajax({url:e.url,data:i,processData:!1,contentType:!1,type:"POST",headers:{"X-File-Name":encodeURIComponent(e.name)},xhr:function(){var e;return e=t.ajaxSettings.xhr(),e&&(e.upload.onprogress=function(t){return function(e){return t.progress(e)}}(this)),e},progress:function(t){return function(i){return i.lengthComputable?t.trigger("uploadprogress",[e,i.loaded,i.total]):void 0}}(this),error:function(t){return function(i,n){return t.trigger("uploaderror",[e,i,n])}}(this),success:function(i){return function(n){return i.trigger("uploadprogress",[e,e.size,e.size]),i.trigger("uploadsuccess",[e,n]),t(document).trigger("uploadsuccess",[e,n,i])}}(this),complete:function(t){return function(i){return t.trigger("uploadcomplete",[e,i.responseText])}}(this)})},i.prototype.cancel=function(t){var e,i,n,o;if(!t.id)for(o=this.files,i=0,n=o.length;n>i;i++)if(e=o[i],e.id===1*t){t=e;break}return this.trigger("uploadcancel",[t]),t.xhr&&t.xhr.abort(),t.xhr=null},i.prototype.readImageFile=function(e,i){var n,o;if(t.isFunction(i))return o=new Image,o.onload=function(){return i(o)},o.onerror=function(){return i()},window.FileReader&&FileReader.prototype.readAsDataURL&&/^image/.test(e.type)?(n=new FileReader,n.onload=function(t){return o.src=t.target.result},n.readAsDataURL(e)):i()},i.prototype.destroy=function(){var e,i,n,o;for(this.queue.length=0,o=this.files,i=0,n=o.length;n>i;i++)e=o[i],this.cancel(e);return t(window).off(".uploader-"+this.id),t(document).off(".uploader-"+this.id)},i.i18n={"zh-CN":{leaveConfirm:"\u6b63\u5728\u4e0a\u4f20\u6587\u4ef6\uff0c\u5982\u679c\u79bb\u5f00\u4e0a\u4f20\u4f1a\u81ea\u52a8\u53d6\u6d88"}},i.locale="zh-CN",i}(e),n=function(t){return new i(t)}}),function(t,e){"function"==typeof define&&define.amd?define("simditor",["jquery","simple-module","simple-hotkeys","simple-uploader"],function(i,n,o,r){return t.Simditor=e(i,n,o,r)}):"object"==typeof exports?module.exports=e(require("jquery"),require("simple-module"),require("simple-hotkeys"),require("simple-uploader")):t.Simditor=e(jQuery,SimpleModule,simple.hotkeys,simple.uploader)}(this,function(t,e,i,n){var o,r,s,a,l,c,d,u,h,p,f,m,g,v,y,b,_,w,k,C,x,S,T,D,M,E,A,O,N,R,I,Y,P=function(t,e){function i(){this.constructor=t}for(var n in e)F.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},F={}.hasOwnProperty,B=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},H=[].slice;return S=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Selection",i.prototype._init=function(){return this.editor=this._module,this.sel=document.getSelection()},i.prototype.clear=function(){var t;try{return this.sel.removeAllRanges()}catch(e){t=e}},i.prototype.getRange=function(){return this.editor.inputManager.focused&&this.sel.rangeCount?this.sel.getRangeAt(0):null},i.prototype.selectRange=function(t){return this.clear(),this.sel.addRange(t),this.editor.inputManager.focused||!this.editor.util.browser.firefox&&!this.editor.util.browser.msie||this.editor.body.focus(),t},i.prototype.rangeAtEndOf=function(e,i){var n,o,r;return null==i&&(i=this.getRange()),null!=i&&i.collapsed?(e=t(e)[0],n=i.endContainer,o=this.editor.util.getNodeLength(n),i.endOffset===o-1&&t(n).contents().last().is("br")||i.endOffset===o?e===n?!0:t.contains(e,n)?(r=!0,t(n).parentsUntil(e).addBack().each(function(){return function(e,i){var n,o;return o=t(i).parent().contents().filter(function(){return!(this!==i&&3===this.nodeType&&!this.nodeValue)}),n=o.last(),n.get(0)===i||n.is("br")&&n.prev().get(0)===i?void 0:(r=!1,!1)}}(this)),r):!1:!1):void 0},i.prototype.rangeAtStartOf=function(e,i){var n,o;return null==i&&(i=this.getRange()),null!=i&&i.collapsed?(e=t(e)[0],o=i.startContainer,0!==i.startOffset?!1:e===o?!0:t.contains(e,o)?(n=!0,t(o).parentsUntil(e).addBack().each(function(){return function(e,i){var o;return o=t(i).parent().contents().filter(function(){return!(this!==i&&3===this.nodeType&&!this.nodeValue)}),o.first().get(0)!==i?n=!1:void 0}}(this)),n):!1):void 0},i.prototype.insertNode=function(e,i){return null==i&&(i=this.getRange()),null!=i?(e=t(e)[0],i.insertNode(e),this.setRangeAfter(e,i)):void 0},i.prototype.setRangeAfter=function(e,i){return null==i&&(i=this.getRange()),null!=i?(e=t(e)[0],i.setEndAfter(e),i.collapse(!1),this.selectRange(i)):void 0},i.prototype.setRangeBefore=function(e,i){return null==i&&(i=this.getRange()),null!=i?(e=t(e)[0],i.setEndBefore(e),i.collapse(!1),this.selectRange(i)):void 0},i.prototype.setRangeAtStartOf=function(e,i){return null==i&&(i=this.getRange()),e=t(e).get(0),i.setEnd(e,0),i.collapse(!1),this.selectRange(i)},i.prototype.setRangeAtEndOf=function(e,i){var n,o,r,s,a,l;return null==i&&(i=this.getRange()),o=t(e),e=o.get(0),o.is("pre")?(r=o.contents(),r.length>0?(s=r.last(),a=s.text(),"\n"===a.charAt(a.length-1)?i.setEnd(s[0],this.editor.util.getNodeLength(s[0])-1):i.setEnd(s[0],this.editor.util.getNodeLength(s[0]))):i.setEnd(e,0)):(l=this.editor.util.getNodeLength(e),3!==e.nodeType&&l>0&&(n=t(e).contents().last(),n.is("br")?l-=1:3!==n[0].nodeType&&this.editor.util.isEmptyNode(n)&&(n.append(this.editor.util.phBr),e=n[0],l=0)),i.setEnd(e,l)),i.collapse(!1),this.selectRange(i)},i.prototype.deleteRangeContents=function(t){var e,i;return null==t&&(t=this.getRange()),i=t.cloneRange(),e=t.cloneRange(),i.collapse(!0),e.collapse(!1),!t.collapsed&&this.rangeAtStartOf(this.editor.body,i)&&this.rangeAtEndOf(this.editor.body,e)?(this.editor.body.empty(),t.setStart(this.editor.body[0],0),t.collapse(!0),this.selectRange(t)):t.deleteContents(),t},i.prototype.breakBlockEl=function(e,i){var n;return null==i&&(i=this.getRange()),n=t(e),i.collapsed?(i.setStartBefore(n.get(0)),i.collapsed?n:n.before(i.extractContents())):n},i.prototype.save=function(e){var i,n,o;return null==e&&(e=this.getRange()),this._selectionSaved?void 0:(n=e.cloneRange(),n.collapse(!1),o=t("<span/>").addClass("simditor-caret-start"),i=t("<span/>").addClass("simditor-caret-end"),n.insertNode(i[0]),e.insertNode(o[0]),this.clear(),this._selectionSaved=!0)},i.prototype.restore=function(){var t,e,i,n,o,r,s;return this._selectionSaved?(o=this.editor.body.find(".simditor-caret-start"),t=this.editor.body.find(".simditor-caret-end"),o.length&&t.length?(r=o.parent(),s=r.contents().index(o),e=t.parent(),i=e.contents().index(t),r[0]===e[0]&&(i-=1),n=document.createRange(),n.setStart(r.get(0),s),n.setEnd(e.get(0),i),o.remove(),t.remove(),this.selectRange(n)):(o.remove(),t.remove()),this._selectionSaved=!1,n):!1},i}(e),d=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Formatter",i.prototype.opts={allowedTags:null,allowedAttributes:null},i.prototype._init=function(){return this.editor=this._module,this._allowedTags=this.opts.allowedTags||["br","a","img","b","strong","i","u","font","p","ul","ol","li","blockquote","pre","h1","h2","h3","h4","hr"],this._allowedAttributes=this.opts.allowedAttributes||{img:["src","alt","width","height","data-image-src","data-image-size","data-image-name","data-non-image"],a:["href","target"],font:["color"],pre:["data-lang","class"],p:["data-indent"],h1:["data-indent"],h2:["data-indent"],h3:["data-indent"],h4:["data-indent"]},this.editor.body.on("click","a",function(){return function(){return!1}}(this))},i.prototype.decorate=function(t){return null==t&&(t=this.editor.body),this.editor.trigger("decorate",[t])},i.prototype.undecorate=function(e){return null==e&&(e=this.editor.body.clone()),this.editor.trigger("undecorate",[e]),t.trim(e.html())},i.prototype.autolink=function(e){var i,n,o,r,s,a,l,c,d,u,h;for(null==e&&(e=this.editor.body),a=[],n=function(i){return i.contents().each(function(i,o){var r,s;return r=t(o),r.is("a")||r.closest("a, pre",e).length?void 0:r.contents().length?n(r):(s=r.text())&&/https?:\/\/|www\./gi.test(s)?a.push(r):void 0})},n(e),c=/(https?:\/\/|www\.)[\w\-\.\?&=\/#%:,@\!\+]+/gi,o=0,s=a.length;s>o;o++){for(i=a[o],u=i.text(),d=[],l=null,r=0;null!==(l=c.exec(u));)d.push(document.createTextNode(u.substring(r,l.index))),r=c.lastIndex,h=/^(http(s)?:\/\/|\/)/.test(l[0])?l[0]:"http://"+l[0],d.push(t('<a href="'+h+'" rel="nofollow"></a>').text(l[0])[0]);d.push(document.createTextNode(u.substring(r))),i.replaceWith(t(d))}return e},i.prototype.format=function(e){var i,n,o,r,s,a,l,c,d,u;if(null==e&&(e=this.editor.body),e.is(":empty"))return e.append("<p>"+this.editor.util.phBr+"</p>"),e;for(d=e.contents(),o=0,s=d.length;s>o;o++)l=d[o],this.cleanNode(l,!0);for(u=e.contents(),r=0,a=u.length;a>r;r++)c=u[r],i=t(c),i.is("br")?("undefined"!=typeof n&&null!==n&&(n=null),i.remove()):this.editor.util.isBlockNode(c)?i.is("li")?n&&n.is("ul, ol")?n.append(c):(n=t("<ul/>").insertBefore(c),n.append(c)):n=null:((!n||n.is("ul, ol"))&&(n=t("<p/>").insertBefore(c)),n.append(c));return e},i.prototype.cleanNode=function(e,i){var n,o,r,s,a,l,c,d,u,h,p,f,m,g,v,y,b;if(o=t(e),o.length>0){if(3===o[0].nodeType)return y=o.text().replace(/(\r\n|\n|\r)/gm,""),void(y?(b=document.createTextNode(y),o.replaceWith(b)):o.remove());if(c=o.contents(),d=o.is('[class^="simditor-"]'),o.is(this._allowedTags.join(","))||d){if(o.is("a")&&(n=o.find("img")).length>0&&(o.replaceWith(n),o=n,c=null),o.is("img")&&o.hasClass("uploading")&&o.remove(),!d)for(a=this._allowedAttributes[o[0].tagName.toLowerCase()],g=t.makeArray(o[0].attributes),u=0,p=g.length;p>u;u++)l=g[u],null!=a&&(v=l.name,B.call(a,v)>=0)||o.removeAttr(l.name)}else 1!==o[0].nodeType||o.is(":empty")?(o.remove(),c=null):o.is("div, article, dl, header, footer, tr")?(o.append("<br/>"),c.first().unwrap()):o.is("table")?(r=t("<p/>"),o.find("tr").each(function(){return function(e,i){return r.append(t(i).text()+"<br/>")}}(this)),o.replaceWith(r),c=null):o.is("thead, tfoot")?(o.remove(),c=null):o.is("th")?(s=t("<td/>").append(o.contents()),o.replaceWith(s)):c.first().unwrap();if(i&&null!=c&&!o.is("pre"))for(h=0,f=c.length;f>h;h++)m=c[h],this.cleanNode(m,!0);return null}},i.prototype.clearHtml=function(e,i){var n,o,r;return null==i&&(i=!0),n=t("<div/>").append(e),o=n.contents(),r="",o.each(function(e){return function(n,s){var a,l;return 3===s.nodeType?r+=s.nodeValue:1===s.nodeType&&(a=t(s),l=a.contents(),l.length>0&&(r+=e.clearHtml(l)),i&&n<o.length-1&&a.is("br, p, div, li, tr, pre, address, artticle, aside, dl, figcaption, footer, h1, h2, h3, h4, header"))?r+="\n":void 0}}(this)),r},i.prototype.beautify=function(e){var i;return i=function(t){return!!(t.is("p")&&!t.text()&&t.children(":not(br)").length<1)},e.each(function(){return function(e,n){var o;return o=t(n),o.is(':not(img, br, col, td, hr, [class^="simditor-"]):empty')&&o.remove(),i(o)&&o.remove(),o.find(':not(img, br, col, td, hr, [class^="simditor-"]):empty').remove()}}(this))},i}(e),g=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return P(n,e),n.pluginName="InputManager",n.prototype.opts={pasteImage:!1},n.prototype._modifierKeys=[16,17,18,91,93,224],n.prototype._arrowKeys=[37,38,39,40],n.prototype._init=function(){var e;return this.editor=this._module,this.throttledTrigger=this.editor.util.throttle(function(t){return function(){var e;return e=1<=arguments.length?H.call(arguments,0):[],setTimeout(function(){var i;return(i=t.editor).trigger.apply(i,e)},10)}}(this),300),this.opts.pasteImage&&"string"!=typeof this.opts.pasteImage&&(this.opts.pasteImage="inline"),this._keystrokeHandlers={},this.hotkeys=i({el:this.editor.body}),this._pasteArea=t("<div/>").css({width:"1px",height:"1px",overflow:"hidden",position:"fixed",right:"0",bottom:"100px"}).attr({tabIndex:"-1",contentEditable:!0}).addClass("simditor-paste-area").appendTo(this.editor.el),t(document).on("selectionchange.simditor"+this.editor.id,function(t){return function(){return t.focused?(t._selectionTimer&&(clearTimeout(t._selectionTimer),t._selectionTimer=null),t._selectionTimer=setTimeout(function(){return t.editor.trigger("selectionchanged")},20)):void 0}}(this)),this.editor.on("valuechanged",function(e){return function(){return!e.editor.util.closestBlockEl()&&e.focused&&(e.editor.selection.save(),e.editor.formatter.format(),e.editor.selection.restore()),e.editor.body.find("hr, pre, .simditor-table").each(function(i,n){var o,r;return o=t(n),(o.parent().is("blockquote")||o.parent()[0]===e.editor.body[0])&&(r=!1,0===o.next().length&&(t("<p/>").append(e.editor.util.phBr).insertAfter(o),r=!0),0===o.prev().length&&(t("<p/>").append(e.editor.util.phBr).insertBefore(o),r=!0),r)?setTimeout(function(){return e.editor.trigger("valuechanged")},10):void 0}),e.editor.body.find("pre:empty").append(e.editor.util.phBr),!e.editor.util.support.onselectionchange&&e.focused?e.editor.trigger("selectionchanged"):void 0}}(this)),this.editor.on("selectionchanged",function(t){return function(){return t.editor.undoManager.update()}}(this)),this.editor.body.on("keydown",t.proxy(this._onKeyDown,this)).on("keypress",t.proxy(this._onKeyPress,this)).on("keyup",t.proxy(this._onKeyUp,this)).on("mouseup",t.proxy(this._onMouseUp,this)).on("focus",t.proxy(this._onFocus,this)).on("blur",t.proxy(this._onBlur,this)).on("paste",t.proxy(this._onPaste,this)).on("drop",t.proxy(this._onDrop,this)).on("input",t.proxy(this._onInput,this)),this.editor.util.browser.firefox&&(this.addShortcut("cmd+left",function(t){return function(e){return e.preventDefault(),t.editor.selection.sel.modify("move","backward","lineboundary"),!1}}(this)),this.addShortcut("cmd+right",function(t){return function(e){return e.preventDefault(),t.editor.selection.sel.modify("move","forward","lineboundary"),!1}}(this)),this.addShortcut("cmd+a",function(t){return function(){var e,i,n,o;return e=t.editor.body.children(),e.length>0?(i=e.first().get(0),n=e.last().get(0),o=document.createRange(),o.setStart(i,0),o.setEnd(n,t.editor.util.getNodeLength(n)),t.editor.selection.selectRange(o),!1):void 0}}(this))),e=this.editor.util.os.mac?"cmd+enter":"ctrl+enter",this.addShortcut(e,function(t){return function(){return t.editor.el.closest("form").find("button:submit").click(),!1}}(this)),this.editor.textarea.attr("autofocus")?setTimeout(function(t){return function(){return t.editor.focus()}}(this),0):void 0},n.prototype._onFocus=function(){return this.editor.el.addClass("focus").removeClass("error"),this.focused=!0,this.lastCaretPosition=null,setTimeout(function(t){return function(){return t.editor.triggerHandler("focus"),t.editor.trigger("selectionchanged")}}(this),0)},n.prototype._onBlur=function(){var t;return this.editor.el.removeClass("focus"),this.editor.sync(),this.focused=!1,this.lastCaretPosition=null!=(t=this.editor.undoManager.currentState())?t.caret:void 0,this.editor.triggerHandler("blur")},n.prototype._onMouseUp=function(){return this.editor.util.support.onselectionchange?void 0:setTimeout(function(t){return function(){return t.editor.trigger("selectionchanged")}}(this),0)},n.prototype._onKeyDown=function(e){var i,n,o,r;if(this.editor.triggerHandler(e)===!1)return!1;if(!this.hotkeys.respondTo(e)){if(e.which in this._keystrokeHandlers){if(r="function"==typeof(i=this._keystrokeHandlers[e.which])["*"]?i["*"](e):void 0)return this.editor.trigger("valuechanged"),!1;if(this.editor.util.traverseUp(function(i){return function(n){var o,s;if(n.nodeType===document.ELEMENT_NODE)return o=null!=(s=i._keystrokeHandlers[e.which])?s[n.tagName.toLowerCase()]:void 0,r="function"==typeof o?o(e,t(n)):void 0,r===!0||r===!1?!1:void 0}}(this)),r)return this.editor.trigger("valuechanged"),!1}if(n=e.which,!(B.call(this._modifierKeys,n)>=0||(o=e.which,B.call(this._arrowKeys,o)>=0)||this.editor.util.metaKey(e)&&86===e.which))return this.editor.util.support.oninput||this.throttledTrigger("valuechanged",["typing"]),null}},n.prototype._onKeyPress=function(t){return this.editor.triggerHandler(t)===!1?!1:void 0},n.prototype._onKeyUp=function(e){var i,n;return this.editor.triggerHandler(e)===!1?!1:!this.editor.util.support.onselectionchange&&(n=e.which,B.call(this._arrowKeys,n)>=0)?void this.editor.trigger("selectionchanged"):void(8!==e.which&&46!==e.which||!this.editor.util.isEmptyNode(this.editor.body)||(this.editor.body.empty(),i=t("<p/>").append(this.editor.util.phBr).appendTo(this.editor.body),this.editor.selection.setRangeAtStartOf(i)))},n.prototype._onPaste=function(e){var i,n,o,r,s,a,l,c,d;if(this.editor.triggerHandler(e)===!1)return!1;if(l=this.editor.selection.deleteRangeContents(),l.collapsed||l.collapse(!0),i=this.editor.util.closestBlockEl(),n=i.is("pre, table"),e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items&&e.originalEvent.clipboardData.items.length>0&&(s=e.originalEvent.clipboardData.items[0],/^image\//.test(s.type)&&!n)){if(o=s.getAsFile(),null==o||!this.opts.pasteImage)return;return o.name||(o.name="Clipboard Image.png"),d={},d[this.opts.pasteImage]=!0,null!=(c=this.editor.uploader)&&c.upload(o,d),!1
}return a=function(e){return function(o){var r,s,a,c,u,h,p,f,m,g,v,y,b,_,w,k,C,x,S,T,D;if(e.editor.triggerHandler("pasting",[o])!==!1&&o){if(n)if(i.is("table")){for(w=o.split("\n"),f=w.pop(),u=0,m=w.length;m>u;u++)_=w[u],e.editor.selection.insertNode(document.createTextNode(_)),e.editor.selection.insertNode(t("<br/>"));e.editor.selection.insertNode(document.createTextNode(f))}else for(o=t("<div/>").text(o),S=o.contents(),h=0,g=S.length;g>h;h++)C=S[h],e.editor.selection.insertNode(t(C)[0],l);else if(i.is(e.editor.body))for(p=0,v=o.length;v>p;p++)C=o[p],e.editor.selection.insertNode(C,l);else{if(o.length<1)return;if(1===o.length)if(o.is("p")){if(a=o.contents(),1===a.length&&a.is("img")){if(r=a,/^data:image/.test(r.attr("src"))){if(!e.opts.pasteImage)return;return s=e.editor.util.dataURLtoBlob(r.attr("src")),s.name="Clipboard Image.png",d={},d[e.opts.pasteImage]=!0,void(null!=(T=e.editor.uploader)&&T.upload(s,d))}if(r.is('img[src^="webkit-fake-url://"]'))return}for(k=0,y=a.length;y>k;k++)C=a[k],e.editor.selection.insertNode(C,l)}else if(i.is("p")&&e.editor.util.isEmptyNode(i))i.replaceWith(o),e.editor.selection.setRangeAtEndOf(o,l);else if(o.is("ul, ol"))if(1===o.find("li").length)for(o=t("<div/>").text(o.text()),D=o.contents(),x=0,b=D.length;b>x;x++)C=D[x],e.editor.selection.insertNode(t(C)[0],l);else i.is("li")?(i.parent().after(o),e.editor.selection.setRangeAtEndOf(o,l)):(i.after(o),e.editor.selection.setRangeAtEndOf(o,l));else i.after(o),e.editor.selection.setRangeAtEndOf(o,l);else i.is("li")&&(i=i.parent()),e.editor.selection.rangeAtStartOf(i,l)?c="before":e.editor.selection.rangeAtEndOf(i,l)?c="after":(e.editor.selection.breakBlockEl(i,l),c="before"),i[c](o),e.editor.selection.setRangeAtEndOf(o.last(),l)}return e.editor.trigger("valuechanged")}}}(this),n?(e.preventDefault(),r=this.editor.util.browser.msie?window.clipboardData.getData("Text"):e.originalEvent.clipboardData.getData("text/plain"),a(r)):(this.editor.selection.save(l),this._pasteArea.focus(),this.editor.util.browser.msie&&10===this.editor.util.browser.version&&(e.preventDefault(),this._pasteArea.html(window.clipboardData.getData("Text"))),setTimeout(function(e){return function(){return e._pasteArea.is(":empty")?r=null:(r=t("<div/>").append(e._pasteArea.contents()),r.find("table colgroup").remove(),e.editor.formatter.format(r),e.editor.formatter.decorate(r),e.editor.formatter.beautify(r.children()),r=r.contents()),e._pasteArea.empty(),l=e.editor.selection.restore(),a(r)}}(this),10))},n.prototype._onDrop=function(t){return this.editor.triggerHandler(t)===!1?!1:setTimeout(function(t){return function(){return t.editor.trigger("valuechanged")}}(this),0)},n.prototype._onInput=function(){return this.throttledTrigger("valuechanged",["oninput"])},n.prototype.addKeystrokeHandler=function(t,e,i){return this._keystrokeHandlers[t]||(this._keystrokeHandlers[t]={}),this._keystrokeHandlers[t][e]=i},n.prototype.addShortcut=function(e,i){return this.hotkeys.add(e,t.proxy(i,this))},n}(e),y=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Keystroke",i.prototype._init=function(){var e;return this.editor=this._module,this.editor.util.browser.safari&&this.editor.inputManager.addKeystrokeHandler("13","*",function(e){return function(i){var n,o;if(i.shiftKey&&(n=e.editor.util.closestBlockEl(),!n.is("pre")))return o=t("<br/>"),e.editor.selection.rangeAtEndOf(n)?(e.editor.selection.insertNode(o),e.editor.selection.insertNode(t("<br/>")),e.editor.selection.setRangeBefore(o)):e.editor.selection.insertNode(o),!0}}(this)),(this.editor.util.browser.webkit||this.editor.util.browser.msie)&&(e=function(e){return function(i,n){var o;if(e.editor.selection.rangeAtEndOf(n))return o=t("<p/>").append(e.editor.util.phBr).insertAfter(n),e.editor.selection.setRangeAtStartOf(o),!0}}(this),this.editor.inputManager.addKeystrokeHandler("13","h1",e),this.editor.inputManager.addKeystrokeHandler("13","h2",e),this.editor.inputManager.addKeystrokeHandler("13","h3",e),this.editor.inputManager.addKeystrokeHandler("13","h4",e),this.editor.inputManager.addKeystrokeHandler("13","h5",e),this.editor.inputManager.addKeystrokeHandler("13","h6",e)),this.editor.inputManager.addKeystrokeHandler("8","*",function(t){return function(){var e,i,n;return n=t.editor.util.furthestBlockEl(),i=n.prev(),i.is("hr")&&t.editor.selection.rangeAtStartOf(n)?(t.editor.selection.save(),i.remove(),t.editor.selection.restore(),!0):(e=t.editor.util.closestBlockEl(),t.editor.util.browser.webkit&&t.editor.selection.rangeAtStartOf(e)?(t.editor.selection.save(),t.editor.formatter.cleanNode(e,!0),t.editor.selection.restore(),null):void 0)}}(this)),this.editor.inputManager.addKeystrokeHandler("13","li",function(e){return function(i,n){var o,r,s,a;if(o=n.clone(),o.find("ul, ol").remove(),e.editor.util.isEmptyNode(o)&&n.is(e.editor.util.closestBlockEl())){if(r=n.parent(),n.next("li").length>0){if(!e.editor.util.isEmptyNode(n))return;r.parent("li").length>0?(s=t("<li/>").append(e.editor.util.phBr).insertAfter(r.parent("li")),a=t("<"+r[0].tagName+"/>").append(n.nextAll("li")),s.append(a)):(s=t("<p/>").append(e.editor.util.phBr).insertAfter(r),a=t("<"+r[0].tagName+"/>").append(n.nextAll("li")),s.after(a))}else r.parent("li").length>0?(s=t("<li/>").insertAfter(r.parent("li")),s.append(n.contents().length>0?n.contents():e.editor.util.phBr)):(s=t("<p/>").append(e.editor.util.phBr).insertAfter(r),n.children("ul, ol").length>0&&s.after(n.children("ul, ol")));return n.prev("li").length?n.remove():r.remove(),e.editor.selection.setRangeAtStartOf(s),!0}}}(this)),this.editor.inputManager.addKeystrokeHandler("13","pre",function(e){return function(i,n){var o,r,s;return i.preventDefault(),i.shiftKey?(o=t("<p/>").append(e.editor.util.phBr).insertAfter(n),e.editor.selection.setRangeAtStartOf(o),!0):(s=e.editor.selection.getRange(),r=null,s.deleteContents(),!e.editor.util.browser.msie&&e.editor.selection.rangeAtEndOf(n)?(r=document.createTextNode("\n\n"),s.insertNode(r),s.setEnd(r,1)):(r=document.createTextNode("\n"),s.insertNode(r),s.setStartAfter(r)),s.collapse(!1),e.editor.selection.selectRange(s),!0)}}(this)),this.editor.inputManager.addKeystrokeHandler("13","blockquote",function(t){return function(e,i){var n,o;return n=t.editor.util.closestBlockEl(),n.is("p")&&!n.next().length&&t.editor.util.isEmptyNode(n)?(i.after(n),o=document.createRange(),t.editor.selection.setRangeAtStartOf(n,o),!0):void 0}}(this)),this.editor.inputManager.addKeystrokeHandler("8","li",function(e){return function(i,n){var o,r,s,a,l,c,d,u;return r=n.children("ul, ol"),l=n.prev("li"),r.length>0&&l.length>0?(u="",c=null,n.contents().each(function(e,i){if(1===i.nodeType&&/UL|OL/.test(i.nodeName))return!1;if(1!==i.nodeType||!/BR/.test(i.nodeName))return 3===i.nodeType&&i.nodeValue?u+=i.nodeValue:1===i.nodeType&&(u+=t(i).text()),c=t(i)}),c&&1===u.length&&e.editor.util.browser.firefox&&!c.next("br").length?(o=t(e.editor.util.phBr).insertAfter(c),c.remove(),e.editor.selection.setRangeBefore(o),!0):u.length>0?!1:(d=document.createRange(),a=l.children("ul, ol"),a.length>0?(s=t("<li/>").append(e.editor.util.phBr).appendTo(a),a.append(r.children("li")),n.remove(),e.editor.selection.setRangeAtEndOf(s,d)):(e.editor.selection.setRangeAtEndOf(l,d),l.append(r),n.remove(),e.editor.selection.selectRange(d)),!0)):!1}}(this)),this.editor.inputManager.addKeystrokeHandler("8","pre",function(e){return function(i,n){var o,r,s;if(e.editor.selection.rangeAtStartOf(n))return r=n.html().replace("\n","<br/>"),o=t("<p/>").append(r||e.editor.util.phBr).insertAfter(n),n.remove(),s=document.createRange(),e.editor.selection.setRangeAtStartOf(o,s),!0}}(this)),this.editor.inputManager.addKeystrokeHandler("8","blockquote",function(t){return function(e,i){var n,o;if(t.editor.selection.rangeAtStartOf(i))return n=i.children().first().unwrap(),o=document.createRange(),t.editor.selection.setRangeAtStartOf(n,o),!0}}(this))},i}(e),R=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="UndoManager",i.prototype._index=-1,i.prototype._capacity=50,i.prototype._timer=null,i.prototype._init=function(){var t,e;return this.editor=this._module,this._stack=[],this.editor.util.os.mac?(e="cmd+z",t="shift+cmd+z"):this.editor.util.os.win?(e="ctrl+z",t="ctrl+y"):(e="ctrl+z",t="shift+ctrl+z"),this.editor.inputManager.addShortcut(e,function(t){return function(e){return e.preventDefault(),t.undo(),!1}}(this)),this.editor.inputManager.addShortcut(t,function(t){return function(e){return e.preventDefault(),t.redo(),!1}}(this)),this.editor.on("valuechanged",function(t){return function(e,i){return"undo"!==i&&"redo"!==i?(t._timer&&(clearTimeout(t._timer),t._timer=null),t._timer=setTimeout(function(){return t._pushUndoState(),t._timer=null},200)):void 0}}(this))},i.prototype._pushUndoState=function(){var t,e;if(this.editor.triggerHandler("pushundostate")!==!1&&(t=this.currentState(),e=this.editor.body.html(),!t||t.html!==e))return this._index+=1,this._stack.length=this._index,this._stack.push({html:e,caret:this.caretPosition()}),this._stack.length>this._capacity?(this._stack.shift(),this._index-=1):void 0},i.prototype.currentState=function(){return this._stack.length&&this._index>-1?this._stack[this._index]:null},i.prototype.undo=function(){var t;if(!(this._index<1||this._stack.length<2))return this.editor.hidePopover(),this._index-=1,t=this._stack[this._index],this.editor.body.html(t.html),this.caretPosition(t.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["undo"])},i.prototype.redo=function(){var t;if(!(this._index<0||this._stack.length<this._index+2))return this.editor.hidePopover(),this._index+=1,t=this._stack[this._index],this.editor.body.html(t.html),this.caretPosition(t.caret),this.editor.body.find(".selected").removeClass("selected"),this.editor.sync(),this.editor.trigger("valuechanged",["redo"])},i.prototype.update=function(){var t,e;if(!this._timer&&(t=this.currentState()))return e=this.editor.body.html(),t.html=e,t.caret=this.caretPosition()},i.prototype._getNodeOffset=function(e,i){var n,o,r;return n=i?t(e):t(e).parent(),r=0,o=!1,n.contents().each(function(){return function(t,n){return i===t||e===n?!1:(3===n.nodeType?o||(r+=1,o=!0):(r+=1,o=!1),null)}}(this)),r},i.prototype._getNodePosition=function(t,e){var i,n;if(3===t.nodeType)for(n=t.previousSibling;n&&3===n.nodeType;)t=n,e+=this.editor.util.getNodeLength(n),n=n.previousSibling;else e=this._getNodeOffset(t,e);return i=[],i.unshift(e),this.editor.util.traverseUp(function(t){return function(e){return i.unshift(t._getNodeOffset(e))}}(this),t),i},i.prototype._getNodeByPosition=function(e){var i,n,o,r,s,a,l,c;for(a=this.editor.body[0],c=e.slice(0,e.length-1),o=r=0,s=c.length;s>r;o=++r){if(l=c[o],n=a.childNodes,l>n.length-1){if(o!==e.length-2||!t(a).is("pre")){a=null;break}i=document.createTextNode(""),a.appendChild(i),n=a.childNodes}a=n[l]}return a},i.prototype.caretPosition=function(t){var e,i,n,o,r;if(t){if(this.editor.inputManager.focused||this.editor.body.focus(),!t.start)return void this.editor.body.blur();if(o=this._getNodeByPosition(t.start),r=t.start[t.start.length-1],t.collapsed?(e=o,i=r):(e=this._getNodeByPosition(t.end),i=t.start[t.start.length-1]),!o||!e)throw new Error("simditor: invalid caret state");return n=document.createRange(),n.setStart(o,r),n.setEnd(e,i),this.editor.selection.selectRange(n)}return n=this.editor.selection.getRange(),this.editor.inputManager.focused&&null!=n?(t={start:[],end:null,collapsed:!0},t.start=this._getNodePosition(n.startContainer,n.startOffset),n.collapsed||(t.end=this._getNodePosition(n.endContainer,n.endOffset),t.collapsed=!1),t):{}},i}(e),Y=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Util",i.prototype._init=function(){return this.editor=this._module,this.browser.msie&&this.browser.version<11?this.phBr="":void 0},i.prototype.phBr="<br/>",i.prototype.os=function(){var t;return t={},/Mac/.test(navigator.appVersion)?t.mac=!0:/Linux/.test(navigator.appVersion)?t.linux=!0:/Win/.test(navigator.appVersion)?t.win=!0:/X11/.test(navigator.appVersion)&&(t.unix=!0),/Mobi/.test(navigator.appVersion)&&(t.mobile=!0),t}(),i.prototype.browser=function(){var t,e,i,n,o,r,s,a,l;return l=navigator.userAgent,i=/(msie|trident)/i.test(l),t=/chrome|crios/i.test(l),a=/safari/i.test(l)&&!t,e=/firefox/i.test(l),i?{msie:!0,version:1*(null!=(n=l.match(/(msie |rv:)(\d+(\.\d+)?)/i))?n[2]:void 0)}:t?{webkit:!0,chrome:!0,version:1*(null!=(o=l.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i))?o[1]:void 0)}:a?{webkit:!0,safari:!0,version:1*(null!=(r=l.match(/version\/(\d+(\.\d+)?)/i))?r[1]:void 0)}:e?{mozilla:!0,firefox:!0,version:1*(null!=(s=l.match(/firefox\/(\d+(\.\d+)?)/i))?s[1]:void 0)}:{}}(),i.prototype.support=function(){return{onselectionchange:function(){var t,e;if(e=document.onselectionchange,void 0!==e)try{return document.onselectionchange=0,null===document.onselectionchange}catch(i){t=i}finally{document.onselectionchange=e}return!1}(),oninput:function(){return!/(msie|trident)/i.test(navigator.userAgent)}()}}(),i.prototype.reflow=function(e){return null==e&&(e=document),t(e)[0].offsetHeight},i.prototype.metaKey=function(t){var e;return e=/Mac/.test(navigator.userAgent),e?t.metaKey:t.ctrlKey},i.prototype.isEmptyNode=function(e){var i;return i=t(e),i.is(":empty")||!i.text()&&!i.find(":not(br, span, div)").length},i.prototype.blockNodes=["div","p","ul","ol","li","blockquote","hr","pre","h1","h2","h3","h4","table"],i.prototype.isBlockNode=function(e){return e=t(e)[0],e&&3!==e.nodeType?new RegExp("^("+this.blockNodes.join("|")+")$").test(e.nodeName.toLowerCase()):!1},i.prototype.closestBlockEl=function(e){var i,n,o;return null==e&&(o=this.editor.selection.getRange(),e=null!=o?o.commonAncestorContainer:void 0),i=t(e),i.length?(n=i.parentsUntil(this.editor.body).addBack(),n=n.filter(function(t){return function(e){return t.isBlockNode(n.eq(e))}}(this)),n.length?n.last():null):null},i.prototype.furthestNode=function(e,i){var n,o,r;return null==e&&(r=this.editor.selection.getRange(),e=null!=r?r.commonAncestorContainer:void 0),n=t(e),n.length?(o=n.parentsUntil(this.editor.body).addBack(),o=o.filter(function(){return function(e){var n;return n=o.eq(e),t.isFunction(i)?i(n):n.is(i)}}(this)),o.length?o.first():null):null},i.prototype.furthestBlockEl=function(e){return this.furthestNode(e,t.proxy(this.isBlockNode,this))},i.prototype.getNodeLength=function(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}},i.prototype.traverseUp=function(e,i){var n,o,r,s,a,l,c;if(null==i&&(a=this.editor.selection.getRange(),i=null!=a?a.commonAncestorContainer:void 0),null==i||!t.contains(this.editor.body[0],i))return!1;for(s=t(i).parentsUntil(this.editor.body).get(),s.unshift(i),c=[],n=0,o=s.length;o>n&&(r=s[n],l=e(r),l!==!1);n++)c.push(void 0);return c},i.prototype.dataURLtoBlob=function(t){var e,i,n,o,r,s,a,l,c,d,u;if(s=window.Blob&&function(){var t;try{return Boolean(new Blob)}catch(e){return t=e,!1}}(),r=s&&window.Uint8Array&&function(){var t;try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return t=e,!1}}(),e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,!((s||e)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return!1;for(o=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),i=new ArrayBuffer(o.length),l=new Uint8Array(i),a=c=0,u=o.length;u>=0?u>=c:c>=u;a=u>=0?++c:--c)l[a]=o.charCodeAt(a);return d=t.split(",")[0].split(":")[1].split(";")[0],s?new Blob([r?l:i],{type:d}):(n=new e,n.append(i),n.getBlob(d))},i.prototype.throttle=function(t,e){var i,n,o;return i=null,n=0,o=function(){return i?(clearTimeout(i),i=null):void 0},function(){var r,s,a,l;return s=Date.now(),n||(n=s),a=e-(s-n),l=null,a>0&&e>a?(n=s,o(),r=arguments,i=setTimeout(function(){return n=0,i=null,l=t.apply(null,r)},e)):(o(),n!==s&&(n=0),l=t.apply(null,arguments)),l}},i.prototype.formatHTML=function(e){var i,n,o,r,s,a,l,c,d;for(a=/<(\/?)(.+?)(\/?)>/g,c="",r=0,o=null,n="  ",l=function(t,e){return new Array(e+1).join(t)};null!==(s=a.exec(e));)s.isBlockNode=t.inArray(s[2],this.blockNodes)>-1,s.isStartTag="/"!==s[1]&&"/"!==s[3],s.isEndTag="/"===s[1]||"/"===s[3],i=o?o.index+o[0].length:0,(d=e.substring(i,s.index)).length>0&&t.trim(d)&&(c+=d),s.isBlockNode&&s.isEndTag&&!s.isStartTag&&(r-=1),s.isBlockNode&&s.isStartTag&&(o&&o.isBlockNode&&o.isEndTag||(c+="\n"),c+=l(n,r)),c+=s[0],s.isBlockNode&&s.isEndTag&&(c+="\n"),s.isBlockNode&&s.isStartTag&&(r+=1),o=s;return t.trim(c)},i}(e),O=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Toolbar",i.prototype.opts={toolbar:!0,toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0},i.prototype._tpl={wrapper:'<div class="simditor-toolbar"><ul></ul></div>',separator:'<li><span class="separator"></span></li>'},i.prototype._init=function(){var e;return this.editor=this._module,this.opts.toolbar?(t.isArray(this.opts.toolbar)||(this.opts.toolbar=["bold","italic","underline","strikethrough","|","ol","ul","blockquote","code","|","link","image","|","indent","outdent"]),this._render(),this.list.on("click",function(){return function(){return!1}}(this)),this.wrapper.on("mousedown",function(t){return function(){return t.list.find(".menu-on").removeClass(".menu-on")}}(this)),t(document).on("mousedown.simditor"+this.editor.id,function(t){return function(){return t.list.find(".menu-on").removeClass(".menu-on")}}(this)),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&(this.wrapper.width(this.wrapper.outerWidth()),this.wrapper.css("top",this.opts.toolbarFloatOffset),e=this.wrapper.outerHeight(),this.editor.util.os.mobile||t(window).on("resize.simditor-"+this.editor.id,function(t){return function(){return t.wrapper.css("position","static"),t.editor.util.reflow(t.wrapper),t.wrapper.css("left",t.wrapper.offset().left),t.wrapper.css("position","")}}(this)).resize(),t(window).on("scroll.simditor-"+this.editor.id,function(i){return function(){var n,o,r;if(r=i.editor.wrapper.offset().top,n=r+i.editor.wrapper.outerHeight()-80,o=t(document).scrollTop()+i.opts.toolbarFloatOffset,r>=o||o>=n){if(i.editor.wrapper.removeClass("toolbar-floating").css("padding-top",""),i.editor.util.os.mobile)return i.wrapper.css("top",i.opts.toolbarFloatOffset)}else if(i.editor.wrapper.addClass("toolbar-floating").css("padding-top",e),i.editor.util.os.mobile)return i.wrapper.css("top",o-r+i.opts.toolbarFloatOffset)}}(this))),this.editor.on("selectionchanged",function(t){return function(){return t.toolbarStatus()}}(this)),this.editor.on("destroy",function(t){return function(){return t.buttons.length=0}}(this)),t(document).on("mousedown.simditor-"+this.editor.id,function(t){return function(){return t.list.find("li.menu-on").removeClass("menu-on")}}(this))):void 0},i.prototype._render=function(){var e,i,n,o;for(this.buttons=[],this.wrapper=t(this._tpl.wrapper).prependTo(this.editor.wrapper),this.list=this.wrapper.find("ul"),o=this.opts.toolbar,e=0,i=o.length;i>e;e++)if(n=o[e],"|"!==n){if(!this.constructor.buttons[n])throw new Error('simditor: invalid toolbar button "'+n+'"');this.buttons.push(new this.constructor.buttons[n]({editor:this.editor}))}else t(this._tpl.separator).appendTo(this.list);return this.opts.toolbarHidden?this.wrapper.hide():this.editor.placeholderEl.css("top",this.wrapper.outerHeight())},i.prototype.toolbarStatus=function(e){var i;if(this.editor.inputManager.focused)return i=this.buttons.slice(0),this.editor.util.traverseUp(function(){return function(n){var o,r,s,a,l,c,d;for(d=[],r=s=0,l=i.length;l>s;r=++s)o=i[r],(null==e||o.name===e)&&(o.status&&o.status(t(n))!==!0||d.push(o));for(a=0,c=d.length;c>a;a++)o=d[a],r=t.inArray(o,i),i.splice(r,1);return 0===i.length?!1:void 0}}(this))},i.prototype.findButton=function(t){var e;return e=this.list.find(".toolbar-item-"+t).data("button"),null!=e?e:null},i.addButton=function(t){return this.buttons[t.prototype.name]=t},i.buttons={},i}(e),m=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.pluginName="Indentation",i.prototype.opts={tabIndent:!0},i.prototype._init=function(){return this.editor=this._module,this.editor.inputManager.addKeystrokeHandler("9","*",function(t){return function(e){var i;return i=t.editor.toolbar.findButton("code"),t.opts.tabIndent||i&&i.active?t.indent(e.shiftKey):void 0}}(this))},i.prototype.indent=function(t){var e,i,n,o,r;return(o=this.editor.selection.getRange())?(n=this.editor.util.closestBlockEl(o.startContainer),i=this.editor.util.closestBlockEl(o.endContainer),n.is("li")&&i.is("li")&&n.parent().is(i.parent())||(n=this.editor.util.furthestBlockEl(n),i=this.editor.util.furthestBlockEl(i)),e=n.is(i)?n:n.nextUntil(i).add(n).add(i),r=!1,e.each(function(e){return function(i,n){return r=t?e.outdentBlock(n):e.indentBlock(n)}}(this)),r):void 0},i.prototype.indentBlock=function(e){var i,n,o,r,s,a,l,c,d;if(i=t(e),i.length){if(i.is("pre")){if(c=this.editor.selection.getRange(),s=t(c.commonAncestorContainer),!s.is(i)&&!s.closest("pre").is(i))return;this.indentText(c)}else if(i.is("li")){if(r=i.prev("li"),r.length<1)return;this.editor.selection.save(),d=i.parent()[0].tagName,n=r.children("ul, ol"),n.length>0?n.append(i):t("<"+d+"/>").append(i).appendTo(r),this.editor.selection.restore()}else if(i.is("p, h1, h2, h3, h4"))l=i.attr("data-indent")||0,l=Math.min(1*l+1,10),i.attr("data-indent",l);else if(i.is("table")||i.is(".simditor-table")){if(c=this.editor.selection.getRange(),a=t(c.commonAncestorContainer).closest("td"),o=a.next("td"),o.length>0||(o=a.parent("tr").next("tr").find("td:first")),!(a.length>0&&o.length>0))return!1;this.editor.selection.setRangeAtEndOf(o)}return!0}},i.prototype.indentText=function(t){var e,i;return e=t.toString().replace(/^(?=.+)/gm,"\xa0\xa0"),i=document.createTextNode(e||"\xa0\xa0"),t.deleteContents(),t.insertNode(i),e?(t.selectNode(i),this.editor.selection.selectRange(t)):this.editor.selection.setRangeAfter(i)},i.prototype.outdentBlock=function(e){var i,n,o,r,s,a,l,c,d,u;if(i=t(e),i&&i.length>0){if(i.is("pre")){if(d=this.editor.selection.getRange(),r=t(d.commonAncestorContainer),!r.is(i)&&!r.closest("pre").is(i))return;this.outdentText(d)}else if(i.is("li")){if(n=i.parent(),o=n.parent("li"),o.length<1)return l=this.editor.toolbar.findButton(n[0].tagName.toLowerCase()),void(null!=l&&l.command());this.editor.selection.save(),i.next("li").length>0&&t("<"+n[0].tagName+"/>").append(i.nextAll("li")).appendTo(i),i.insertAfter(o),n.children("li").length<1&&n.remove(),this.editor.selection.restore()}else if(i.is("p, h1, h2, h3, h4"))c=null!=(u=i.attr("data-indent"))?u:0,c=1*c-1,0>c&&(c=0),i.attr("data-indent",c);else if(i.is("table")||i.is(".simditor-table")){if(d=this.editor.selection.getRange(),a=t(d.commonAncestorContainer).closest("td"),s=a.prev("td"),s.length>0||(s=a.parent("tr").prev("tr").find("td:last")),!(a.length>0&&s.length>0))return;this.editor.selection.setRangeAtEndOf(s)}return!0}},i.prototype.outdentText=function(){},i}(e),T=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.connect(Y),i.connect(g),i.connect(R),i.connect(y),i.connect(d),i.connect(S),i.connect(O),i.connect(m),i.count=0,i.prototype.opts={textarea:null,placeholder:"",defaultImage:"images/image.png",params:{},upload:!1},i.prototype._init=function(){var e,o,r,s;if(this.textarea=t(this.opts.textarea),this.opts.placeholder=this.opts.placeholder||this.textarea.attr("placeholder"),!this.textarea.length)throw new Error("simditor: param textarea is required.");if(o=this.textarea.data("simditor"),null!=o&&o.destroy(),this.id=++i.count,this._render(),this.opts.upload&&n&&(s="object"==typeof this.opts.upload?this.opts.upload:{},this.uploader=n(s)),r=this.textarea.closest("form"),r.length&&(r.on("submit.simditor-"+this.id,function(t){return function(){return t.sync()}}(this)),r.on("reset.simditor-"+this.id,function(t){return function(){return t.setValue("")}}(this))),this.on("initialized",function(t){return function(){return t.opts.placeholder&&t.on("valuechanged",function(){return t._placeholder()}),t.setValue(t.textarea.val().trim()||"")}}(this)),this.util.browser.mozilla){this.util.reflow();try{return document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(a){e=a}}},i.prototype._tpl='<div class="simditor">\n  <div class="simditor-wrapper">\n    <div class="simditor-placeholder"></div>\n    <div class="simditor-body" contenteditable="true">\n    </div>\n  </div>\n</div>',i.prototype._render=function(){var e,i,n,o;if(this.el=t(this._tpl).insertBefore(this.textarea),this.wrapper=this.el.find(".simditor-wrapper"),this.body=this.wrapper.find(".simditor-body"),this.placeholderEl=this.wrapper.find(".simditor-placeholder").append(this.opts.placeholder),this.el.data("simditor",this),this.wrapper.append(this.textarea),this.textarea.data("simditor",this).blur(),this.body.attr("tabindex",this.textarea.attr("tabindex")),this.util.os.mac?this.el.addClass("simditor-mac"):this.util.os.linux&&this.el.addClass("simditor-linux"),this.util.os.mobile&&this.el.addClass("simditor-mobile"),this.opts.params){i=this.opts.params,n=[];for(e in i)o=i[e],n.push(t("<input/>",{type:"hidden",name:e,value:o}).insertAfter(this.textarea));return n}},i.prototype._placeholder=function(){var t,e;return t=this.body.children(),0===t.length||1===t.length&&this.util.isEmptyNode(t)&&(null!=(e=t.data("indent"))?e:0)<1?this.placeholderEl.show():this.placeholderEl.hide()},i.prototype.setValue=function(t){return this.hidePopover(),this.textarea.val(t),this.body.html(t),this.formatter.format(),this.formatter.decorate(),this.util.reflow(this.body),this.inputManager.lastCaretPosition=null,this.trigger("valuechanged")},i.prototype.getValue=function(){return this.sync()},i.prototype.sync=function(){var e,i,n,o,r,s;for(i=this.body.clone(),this.formatter.undecorate(i),this.formatter.format(i),this.formatter.autolink(i),e=i.children(),r=e.last("p"),o=e.first("p");r.is("p")&&this.util.isEmptyNode(r);)n=r,r=r.prev("p"),n.remove();for(;o.is("p")&&this.util.isEmptyNode(o);)n=o,o=r.next("p"),n.remove();return i.find("img.uploading").remove(),s=t.trim(i.html()),this.textarea.val(s),s},i.prototype.focus=function(){var e,i;return this.sourceMode?void this.textarea.focus():this.inputManager.lastCaretPosition?this.undoManager.caretPosition(this.inputManager.lastCaretPosition):(e=this.body.find("p").last(),e.length>0||(e=t("<p/>").append(this.util.phBr).appendTo(this.body)),i=document.createRange(),this.selection.setRangeAtEndOf(e,i),this.body.focus())},i.prototype.blur=function(){return this.sourceMode?this.textarea.blur():this.body.blur()},i.prototype.hidePopover=function(){return this.el.find(".simditor-popover").each(function(){return function(e,i){return i=t(i).data("popover"),i.active?i.hide():void 0}}(this))},i.prototype.destroy=function(){return this.triggerHandler("destroy"),this.textarea.closest("form").off(".simditor .simditor-"+this.id),this.selection.clear(),this.inputManager.focused=!1,this.textarea.insertBefore(this.el).hide().val("").removeData("simditor"),this.el.remove(),t(document).off(".simditor-"+this.id),t(window).off(".simditor-"+this.id),this.off()},i}(e),T.i18n={"zh-CN":{blockquote:"\u5f15\u7528",bold:"\u52a0\u7c97\u6587\u5b57",code:"\u63d2\u5165\u4ee3\u7801",color:"\u6587\u5b57\u989c\u8272",hr:"\u5206\u9694\u7ebf",image:"\u63d2\u5165\u56fe\u7247",externalImage:"\u5916\u94fe\u56fe\u7247",uploadImage:"\u4e0a\u4f20\u56fe\u7247",uploadFailed:"\u4e0a\u4f20\u5931\u8d25\u4e86",uploadError:"\u4e0a\u4f20\u51fa\u9519\u4e86",imageUrl:"\u56fe\u7247\u5730\u5740",imageSize:"\u56fe\u7247\u5c3a\u5bf8",imageAlt:"\u56fe\u7247\u63cf\u8ff0",restoreImageSize:"\u8fd8\u539f\u56fe\u7247\u5c3a\u5bf8",uploading:"\u6b63\u5728\u4e0a\u4f20",indent:"\u5411\u53f3\u7f29\u8fdb",outdent:"\u5411\u5de6\u7f29\u8fdb",italic:"\u659c\u4f53\u6587\u5b57",link:"\u63d2\u5165\u94fe\u63a5",text:"\u6587\u672c",linkText:"\u94fe\u63a5\u6587\u5b57",linkUrl:"\u5730\u5740",removeLink:"\u79fb\u9664\u94fe\u63a5",ol:"\u6709\u5e8f\u5217\u8868",ul:"\u65e0\u5e8f\u5217\u8868",strikethrough:"\u5220\u9664\u7ebf\u6587\u5b57",table:"\u8868\u683c",deleteRow:"\u5220\u9664\u884c",insertRowAbove:"\u5728\u4e0a\u9762\u63d2\u5165\u884c",insertRowBelow:"\u5728\u4e0b\u9762\u63d2\u5165\u884c",deleteColumn:"\u5220\u9664\u5217",insertColumnLeft:"\u5728\u5de6\u8fb9\u63d2\u5165\u5217",insertColumnRight:"\u5728\u53f3\u8fb9\u63d2\u5165\u5217",deleteTable:"\u5220\u9664\u8868\u683c",title:"\u6807\u9898",source:"HTML\u6e90\u4ee3\u7801",normalText:"\u666e\u901a\u6587\u672c",underline:"\u4e0b\u5212\u7ebf\u6587\u5b57"}},s=function(e){function i(t){this.editor=t.editor,this.title=this._t(this.name),i.__super__.constructor.call(this,t)}return P(i,e),i.prototype._tpl={item:'<li><a tabindex="-1" unselectable="on" class="toolbar-item" href="javascript:;"><span></span></a></li>',menuWrapper:'<div class="toolbar-menu"></div>',menuItem:'<li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;"><span></span></a></li>',separator:'<li><span class="separator"></span></li>'},i.prototype.name="",i.prototype.icon="",i.prototype.title="",i.prototype.text="",i.prototype.htmlTag="",i.prototype.disableTag="",i.prototype.menu=!1,i.prototype.active=!1,i.prototype.disabled=!1,i.prototype.needFocus=!0,i.prototype.shortcut=null,i.prototype._init=function(){var e,i,n,o,r;for(this.render(),this.el.on("mousedown",function(t){return function(e){var i,n;return e.preventDefault(),t.el.hasClass("disabled")||t.needFocus&&!t.editor.inputManager.focused?!1:t.menu?(t.wrapper.toggleClass("menu-on").siblings("li").removeClass("menu-on"),t.wrapper.is(".menu-on")&&(i=t.menuWrapper.offset().left+t.menuWrapper.outerWidth()+5-t.editor.wrapper.offset().left-t.editor.wrapper.outerWidth(),i>0&&t.menuWrapper.css({left:"auto",right:0}),t.trigger("menuexpand")),!1):(n=t.el.data("param"),t.command(n),!1)}}(this)),this.wrapper.on("click","a.menu-item",function(e){return function(i){var n,o;return i.preventDefault(),n=t(i.currentTarget),e.wrapper.removeClass("menu-on"),n.hasClass("disabled")||e.needFocus&&!e.editor.inputManager.focused?!1:(e.editor.toolbar.wrapper.removeClass("menu-on"),o=n.data("param"),e.command(o),!1)}}(this)),this.wrapper.on("mousedown","a.menu-item",function(){return function(){return!1}}(this)),this.editor.on("blur",function(t){return function(){return t.editor.sourceMode?void 0:(t.setActive(!1),t.setDisabled(!1))}}(this)),null!=this.shortcut&&this.editor.inputManager.addShortcut(this.shortcut,function(t){return function(){return t.el.mousedown(),!1}}(this)),n=this.htmlTag.split(","),o=[],e=0,i=n.length;i>e;e++)r=n[e],r=t.trim(r),o.push(r&&t.inArray(r,this.editor.formatter._allowedTags)<0?this.editor.formatter._allowedTags.push(r):void 0);return o},i.prototype.render=function(){return this.wrapper=t(this._tpl.item).appendTo(this.editor.toolbar.list),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.el.find("span").addClass(this.icon?"simditor-icon simditor-icon-"+this.icon:"").text(this.text),this.menu?(this.menuWrapper=t(this._tpl.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu()):void 0},i.prototype.renderMenu=function(){var e,i,n,o,r,s,a,l;if(t.isArray(this.menu)){for(this.menuEl=t("<ul/>").appendTo(this.menuWrapper),s=this.menu,l=[],n=0,o=s.length;o>n;n++)r=s[n],"|"!==r?(i=t(this._tpl.menuItem).appendTo(this.menuEl),l.push(e=i.find("a.menu-item").attr({title:null!=(a=r.title)?a:r.text,"data-param":r.param}).addClass("menu-item-"+r.name).find("span").text(r.text))):t(this._tpl.separator).appendTo(this.menuEl);return l}},i.prototype.setActive=function(t){return t!==this.active?(this.active=t,this.el.toggleClass("active",this.active),this.editor.toolbar.trigger("buttonstatus",[this])):void 0},i.prototype.setDisabled=function(t){return t!==this.disabled?(this.disabled=t,this.el.toggleClass("disabled",this.disabled),this.editor.toolbar.trigger("buttonstatus",[this])):void 0},i.prototype.status=function(t){return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:(null!=t&&this.setActive(t.is(this.htmlTag)),this.active)},i.prototype.command=function(){},i.prototype._t=function(){var t,e,n;return t=1<=arguments.length?H.call(arguments,0):[],n=i.__super__._t.apply(this,t),n||(n=(e=this.editor)._t.apply(e,t)),n},i}(e),T.Button=s,x=function(e){function i(t){this.button=t.button,this.editor=t.button.editor,i.__super__.constructor.call(this,t)}return P(i,e),i.prototype.offset={top:4,left:0},i.prototype.target=null,i.prototype.active=!1,i.prototype._init=function(){return this.el=t('<div class="simditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",function(t){return function(){return t.el.addClass("hover")
}}(this)),this.el.on("mouseleave",function(t){return function(){return t.el.removeClass("hover")}}(this))},i.prototype.render=function(){},i.prototype.show=function(e,i){return null==i&&(i="bottom"),null!=e?(this.el.siblings(".simditor-popover").each(function(){return function(e,i){return i=t(i).data("popover"),i.active?i.hide():void 0}}(this)),this.target=e.addClass("selected"),this.active?(this.refresh(i),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),setTimeout(function(t){return function(){return t.refresh(i),t.trigger("popovershow")}}(this),0))):void 0},i.prototype.hide=function(){return this.active?(this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")):void 0},i.prototype.refresh=function(t){var e,i,n,o,r;return null==t&&(t="bottom"),this.active?(e=this.editor.el.offset(),o=this.target.offset(),n=this.target.outerHeight(),"bottom"===t?r=o.top-e.top+n:"top"===t&&(r=o.top-e.top-this.el.height()),i=Math.min(o.left-e.left,this.editor.wrapper.width()-this.el.outerWidth()-10),this.el.css({top:r+this.offset.top,left:i+this.offset.left})):void 0},i.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},i.prototype._t=function(){var t,e,n;return t=1<=arguments.length?H.call(arguments,0):[],n=i.__super__._t.apply(this,t),n||(n=(e=this.button)._t.apply(e,t)),n},i}(e),T.Popover=x,D=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype.name="source",e.prototype.icon="html5",e.prototype.needFocus=!1,e.prototype._init=function(){return e.__super__._init.call(this),this.editor.textarea.on("focus",function(t){return function(){return t.editor.el.addClass("focus").removeClass("error")}}(this)),this.editor.textarea.on("blur",function(t){return function(){return t.editor.el.removeClass("focus"),t.editor.setValue(t.editor.textarea.val())}}(this)),this.editor.textarea.on("input",function(t){return function(){return t._resizeTextarea()}}(this))},e.prototype.status=function(){return!0},e.prototype.command=function(){var t,e,i,n;for(this.editor.blur(),this.editor.el.toggleClass("simditor-source-mode"),this.editor.sourceMode=this.editor.el.hasClass("simditor-source-mode"),this.editor.sourceMode&&(this.editor.hidePopover(),this.editor.textarea.val(this.editor.util.formatHTML(this.editor.textarea.val())),this._resizeTextarea()),n=this.editor.toolbar.buttons,e=0,i=n.length;i>e;e++)t=n[e],"source"===t.name?t.setActive(this.editor.sourceMode):t.setDisabled(this.editor.sourceMode);return null},e.prototype._resizeTextarea=function(){return this._textareaPadding||(this._textareaPadding=this.editor.textarea.innerHeight()-this.editor.textarea.height()),this.editor.textarea.height(0).height(this.editor.textarea[0].scrollHeight-this._textareaPadding)},e}(s),T.Toolbar.addButton(D),A=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="title",i.prototype.htmlTag="h1, h2, h3, h4",i.prototype.disableTag="pre, table",i.prototype._init=function(){return this.menu=[{name:"normal",text:this._t("normalText"),param:"p"},"|",{name:"h1",text:this._t("title")+" 1",param:"h1"},{name:"h2",text:this._t("title")+" 2",param:"h2"},{name:"h3",text:this._t("title")+" 3",param:"h3"},{name:"h4",text:this._t("title")+" 4",param:"h4"},{name:"h5",text:this._t("title")+" 5",param:"h5"}],i.__super__._init.call(this)},i.prototype.setActive=function(t,e){return i.__super__.setActive.call(this,t),this.el.removeClass("active-p active-h1 active-h2 active-h3"),t?this.el.addClass("active active-"+e):void 0},i.prototype.status=function(t){var e,i;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:(null!=t&&(e=null!=(i=t[0].tagName)?i.toLowerCase():void 0,this.setActive(t.is(this.htmlTag),e)),this.active)},i.prototype.command=function(e){var i,n,o,r,s,a,l,c,d,u,h;for(c=this.editor.selection.getRange(),h=c.startContainer,r=c.endContainer,o=this.editor.util.closestBlockEl(h),n=this.editor.util.closestBlockEl(r),this.editor.selection.save(),c.setStartBefore(o[0]),c.setEndAfter(n[0]),i=t(c.extractContents()),u=[],i.children().each(function(t){return function(i,n){var o,r,s,a,l;for(r=t._convertEl(n,e),l=[],s=0,a=r.length;a>s;s++)o=r[s],l.push(u.push(o));return l}}(this)),d=u.reverse(),s=0,a=d.length;a>s;s++)l=d[s],c.insertNode(l[0]);return this.editor.selection.restore(),this.editor.trigger("valuechanged")},i.prototype._convertEl=function(e,i){var n,o,r;return o=t(e),r=[],o.is(i)?r.push(o):(n=t("<"+i+"/>").append(o.contents()),r.push(n)),r},i}(s),T.Toolbar.addButton(A),r=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="bold",i.prototype.icon="bold",i.prototype.htmlTag="b, strong",i.prototype.disableTag="pre",i.prototype.shortcut="cmd+b",i.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + b )":(this.title=this.title+" ( Ctrl + b )",this.shortcut="ctrl+b"),i.__super__._init.call(this)},i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:(e=document.queryCommandState("bold")===!0,this.setActive(e),e)},i.prototype.command=function(){return document.execCommand("bold"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},i}(s),T.Toolbar.addButton(r),v=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="italic",i.prototype.icon="italic",i.prototype.htmlTag="i",i.prototype.disableTag="pre",i.prototype.shortcut="cmd+i",i.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + i )":(this.title=this.title+" ( Ctrl + i )",this.shortcut="ctrl+i"),i.__super__._init.call(this)},i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?this.disabled:(e=document.queryCommandState("italic")===!0,this.setActive(e),e)},i.prototype.command=function(){return document.execCommand("italic"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},i}(s),T.Toolbar.addButton(v),N=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="underline",i.prototype.icon="underline",i.prototype.htmlTag="u",i.prototype.disableTag="pre",i.prototype.shortcut="cmd+u",i.prototype.render=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + u )":(this.title=this.title+" ( Ctrl + u )",this.shortcut="ctrl+u"),i.__super__.render.call(this)},i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?this.disabled:(e=document.queryCommandState("underline")===!0,this.setActive(e),e)},i.prototype.command=function(){return document.execCommand("underline"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},i}(s),T.Toolbar.addButton(N),c=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="color",i.prototype.icon="tint",i.prototype.disableTag="pre",i.prototype.menu=!0,i.prototype.render=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],i.__super__.render.apply(this,t)},i.prototype.renderMenu=function(){return t('<ul class="color-list">\n  <li><a href="javascript:;" class="font-color font-color-1" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-2" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-3" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-4" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-5" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-6" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-7" data-color=""></a></li>\n  <li><a href="javascript:;" class="font-color font-color-default" data-color=""></a></li>\n</ul>').appendTo(this.menuWrapper),this.menuWrapper.on("mousedown",".color-list",function(){return!1}),this.menuWrapper.on("click",".font-color",function(e){return function(i){var n,o,r,s;if(e.wrapper.removeClass("menu-on"),n=t(i.currentTarget),n.hasClass("font-color-default")){if(o=e.editor.body.find("p, li"),!(o.length>0))return;s=window.getComputedStyle(o[0],null).getPropertyValue("color"),r=e._convertRgbToHex(s)}else s=window.getComputedStyle(n[0],null).getPropertyValue("background-color"),r=e._convertRgbToHex(s);return r?(document.execCommand("foreColor",!1,r),e.editor.util.support.oninput?void 0:e.editor.trigger("valuechanged")):void 0}}(this))},i.prototype._convertRgbToHex=function(t){var e,i,n;return i=/rgb\((\d+),\s?(\d+),\s?(\d+)\)/g,(e=i.exec(t))?(n=function(t,e,i){var n;return n=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},"#"+n(t)+n(e)+n(i)})(1*e[1],1*e[2],1*e[3]):""},i}(s),T.Toolbar.addButton(c),w=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.type="",i.prototype.disableTag="pre, table",i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:null==t?this.active:(e="ul"===this.type?"ol":"ul",t.is(e)?(this.setActive(!1),!0):(this.setActive(t.is(this.htmlTag)),this.active))},i.prototype.command=function(){var e,i,n,o,r,s,a,l,c,d,u,h,p,f,m,g,v;for(p=this.editor.selection.getRange(),v=p.startContainer,l=p.endContainer,s=this.editor.util.closestBlockEl(v),i=this.editor.util.closestBlockEl(l),this.editor.selection.save(),p.setStartBefore(s[0]),p.setEndAfter(i[0]),s.is("li")&&i.is("li")&&(o=this.editor.util.furthestNode(s,"ul, ol"),n=this.editor.util.furthestNode(i,"ul, ol"),o.is(n)?(c=function(t){var e;for(e=1;!t.parent().is(o);)e+=1,t=t.parent();return e},g=c(s),a=c(i),r=g>a?i.parent():s.parent(),p.setStartBefore(r[0]),p.setEndAfter(r[0])):(p.setStartBefore(o[0]),p.setEndAfter(n[0]))),e=t(p.extractContents()),m=[],e.children().each(function(t){return function(e,i){var n,o,r,s,a;for(o=t._convertEl(i),a=[],r=0,s=o.length;s>r;r++)n=o[r],a.push(m.length&&m[m.length-1].is(t.type)&&n.is(t.type)?m[m.length-1].append(n.children()):m.push(n));return a}}(this)),f=m.reverse(),d=0,u=f.length;u>d;d++)h=f[d],p.insertNode(h[0]);return this.editor.selection.restore(),this.editor.trigger("valuechanged")},i.prototype._convertEl=function(e){var i,n,o,r,s,a,l,c,d;if(i=t(e),d=[],n="ul"===this.type?"ol":"ul",i.is(this.type))i.children("li").each(function(e){return function(i,n){var o,r,s;return r=t(n),o=r.children("ul, ol").remove(),s=t("<p/>").append(t(n).html()||e.editor.util.phBr),d.push(s),o.length>0?d.push(o):void 0}}(this));else if(i.is(n))o=t("<"+this.type+"/>").append(i.html()),d.push(o);else if(i.is("blockquote")){for(c=i.children().get(),a=0,l=c.length;l>a;a++)r=c[a],s=this._convertEl(r);t.merge(d,s)}else i.is("table")||(o=t("<"+this.type+"><li></li></"+this.type+">"),o.find("li").append(i.html()||this.editor.util.phBr),d.push(o));return d},i}(s),k=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype.type="ol",e.prototype.name="ol",e.prototype.icon="list-ol",e.prototype.htmlTag="ol",e.prototype.shortcut="cmd+/",e.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + / )":(this.title=this.title+" ( ctrl + / )",this.shortcut="ctrl+/"),e.__super__._init.call(this)},e}(w),I=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype.type="ul",e.prototype.name="ul",e.prototype.icon="list-ul",e.prototype.htmlTag="ul",e.prototype.shortcut="cmd+.",e.prototype._init=function(){return this.editor.util.os.mac?this.title=this.title+" ( Cmd + . )":(this.title=this.title+" ( Ctrl + . )",this.shortcut="ctrl+."),e.__super__._init.call(this)},e}(w),T.Toolbar.addButton(k),T.Toolbar.addButton(I),o=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="blockquote",i.prototype.icon="quote-left",i.prototype.htmlTag="blockquote",i.prototype.disableTag="pre, table",i.prototype.command=function(){var e,i,n,o,r,s,a,l,c,d,u;for(l=this.editor.selection.getRange(),u=l.startContainer,o=l.endContainer,n=this.editor.util.furthestBlockEl(u),i=this.editor.util.furthestBlockEl(o),this.editor.selection.save(),l.setStartBefore(n[0]),l.setEndAfter(i[0]),e=t(l.extractContents()),d=[],e.children().each(function(t){return function(e,i){var n,o,r,s,a;for(o=t._convertEl(i),a=[],r=0,s=o.length;s>r;r++)n=o[r],a.push(d.length&&d[d.length-1].is(t.htmlTag)&&n.is(t.htmlTag)?d[d.length-1].append(n.children()):d.push(n));return a}}(this)),c=d.reverse(),r=0,s=c.length;s>r;r++)a=c[r],l.insertNode(a[0]);return this.editor.selection.restore(),this.editor.trigger("valuechanged")},i.prototype._convertEl=function(e){var i,n,o;return i=t(e),o=[],i.is(this.htmlTag)?i.children().each(function(){return function(e,i){return o.push(t(i))}}(this)):(n=t("<"+this.htmlTag+"/>").append(i),o.push(n)),o},i}(s),T.Toolbar.addButton(o),a=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="code",i.prototype.icon="code",i.prototype.htmlTag="pre",i.prototype.disableTag="li, table",i.prototype._init=function(){return i.__super__._init.call(this),this.editor.on("decorate",function(e){return function(i,n){return n.find("pre").each(function(i,n){return e.decorate(t(n))})}}(this)),this.editor.on("undecorate",function(e){return function(i,n){return n.find("pre").each(function(i,n){return e.undecorate(t(n))})}}(this))},i.prototype.render=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],i.__super__.render.apply(this,t),this.popover=new l({button:this})},i.prototype.status=function(t){var e;return e=i.__super__.status.call(this,t),this.active?this.popover.show(t):this.editor.util.isBlockNode(t)&&this.popover.hide(),e},i.prototype.decorate=function(t){var e;return e=t.attr("data-lang"),t.removeClass(),e&&-1!==e?t.addClass("lang-"+e):void 0},i.prototype.undecorate=function(t){var e;return e=t.attr("data-lang"),t.removeClass(),e&&-1!==e?t.addClass("lang-"+e):void 0},i.prototype.command=function(){var e,i,n,o,r,s,a,l,c,d,u;for(l=this.editor.selection.getRange(),u=l.startContainer,o=l.endContainer,n=this.editor.util.closestBlockEl(u),i=this.editor.util.closestBlockEl(o),l.setStartBefore(n[0]),l.setEndAfter(i[0]),e=t(l.extractContents()),d=[],e.children().each(function(t){return function(e,i){var n,o,r,s,a;for(o=t._convertEl(i),a=[],r=0,s=o.length;s>r;r++)n=o[r],a.push(d.length&&d[d.length-1].is(t.htmlTag)&&n.is(t.htmlTag)?d[d.length-1].append(n.contents()):d.push(n));return a}}(this)),c=d.reverse(),r=0,s=c.length;s>r;r++)a=c[r],l.insertNode(a[0]);return this.editor.selection.setRangeAtEndOf(d[0]),this.editor.trigger("valuechanged")},i.prototype._convertEl=function(e){var i,n,o,r;return i=t(e),r=[],i.is(this.htmlTag)?(n=t("<p/>").append(i.html().replace("\n","<br/>")),r.push(n)):(o=!i.text()&&1===i.children().length&&i.children().is("br")?"\n":this.editor.formatter.clearHtml(i),n=t("<"+this.htmlTag+"/>").text(o),r.push(n)),r},i}(s),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype._tpl='<div class="code-settings">\n  <div class="settings-field">\n    <select class="select-lang">\n      <option value="-1">\u9009\u62e9\u7a0b\u5e8f\u8bed\u8a00</option>\n      <option value="bash">Bash</option>\n      <option value="c++">C++</option>\n      <option value="cs">C#</option>\n      <option value="css">CSS</option>\n      <option value="erlang">Erlang</option>\n      <option value="less">Less</option>\n      <option value="scss">Sass</option>\n      <option value="diff">Diff</option>\n      <option value="coffeeScript">CoffeeScript</option>\n      <option value="html">Html,XML</option>\n      <option value="json">JSON</option>\n      <option value="java">Java</option>\n      <option value="js">JavaScript</option>\n      <option value="markdown">Markdown</option>\n      <option value="oc">Objective C</option>\n      <option value="php">PHP</option>\n      <option value="perl">Perl</option>\n      <option value="python">Python</option>\n      <option value="ruby">Ruby</option>\n      <option value="sql">SQL</option>\n    </select>\n  </div>\n</div>',e.prototype.render=function(){return this.el.addClass("code-popover").append(this._tpl),this.selectEl=this.el.find(".select-lang"),this.selectEl.on("change",function(t){return function(){var e;return t.lang=t.selectEl.val(),e=t.target.hasClass("selected"),t.target.removeClass().removeAttr("data-lang"),-1!==t.lang&&(t.target.addClass("lang-"+t.lang),t.target.attr("data-lang",t.lang)),e?t.target.addClass("selected"):void 0}}(this)),this.editor.on("valuechanged",function(t){return function(){return t.active?t.refresh():void 0}}(this))},e.prototype.show=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],e.__super__.show.apply(this,t),this.lang=this.target.attr("data-lang"),this.selectEl.val(null!=this.lang?this.lang:-1)},e}(x),T.Toolbar.addButton(a),b=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="link",i.prototype.icon="link",i.prototype.htmlTag="a",i.prototype.disableTag="pre",i.prototype.render=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],i.__super__.render.apply(this,t),this.popover=new _({button:this})},i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:null==t?this.active:(e=!0,!t.is(this.htmlTag)||t.is('[class^="simditor-"]')?(this.setActive(!1),e=!1):this.editor.selection.rangeAtEndOf(t)?(this.setActive(!0),e=!1):this.setActive(!0),e?this.popover.show(t):this.editor.util.isBlockNode(t)&&this.popover.hide(),this.active)},i.prototype.command=function(){var e,i,n,o,r,s,a,l,c,d;return l=this.editor.selection.getRange(),this.active?(n=t(l.commonAncestorContainer).closest("a"),d=document.createTextNode(n.text()),n.replaceWith(d),l.selectNode(d)):(c=l.startContainer,s=l.endContainer,r=this.editor.util.closestBlockEl(c),i=this.editor.util.closestBlockEl(s),e=t(l.extractContents()),a=this.editor.formatter.clearHtml(e.contents(),!1),n=t("<a/>",{href:"http://www.example.com",target:"_blank",text:a||this._t("linkText")}),r[0]===i[0]?l.insertNode(n[0]):(o=t("<p/>").append(n),l.insertNode(o[0])),l.selectNodeContents(n[0]),this.popover.one("popovershow",function(t){return function(){return a?(t.popover.urlEl.focus(),t.popover.urlEl[0].select()):(t.popover.textEl.focus(),t.popover.textEl[0].select())}}(this))),this.editor.selection.selectRange(l),this.editor.trigger("valuechanged")},i}(s),_=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.render=function(){var e;return e='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("text")+'</label>\n    <input class="link-text" type="text"/>\n    <a class="btn-unlink" href="javascript:;" title="'+this._t("removeLink")+'" tabindex="-1"><span class="simditor-icon simditor-icon-unlink"></span></a>\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("linkUrl")+'</label>\n    <input class="link-url" type="text"/>\n  </div>\n</div>',this.el.addClass("link-popover").append(e),this.textEl=this.el.find(".link-text"),this.urlEl=this.el.find(".link-url"),this.unlinkEl=this.el.find(".btn-unlink"),this.textEl.on("keyup",function(t){return function(e){return 13!==e.which?t.target.text(t.textEl.val()):void 0}}(this)),this.urlEl.on("keyup",function(t){return function(e){var i;if(13!==e.which)return i=t.urlEl.val(),!/https?:\/\/|^\//gi.test(i)&&i&&(i="http://"+i),t.target.attr("href",i)}}(this)),t([this.urlEl[0],this.textEl[0]]).on("keydown",function(e){return function(i){return 13===i.which||27===i.which||!i.shiftKey&&9===i.which&&t(i.target).hasClass("link-url")?(i.preventDefault(),setTimeout(function(){var t;return t=document.createRange(),e.editor.selection.setRangeAfter(e.target,t),e.hide(),e.editor.trigger("valuechanged")},0)):void 0}}(this)),this.unlinkEl.on("click",function(t){return function(){var e,i;return i=document.createTextNode(t.target.text()),t.target.replaceWith(i),t.hide(),e=document.createRange(),t.editor.selection.setRangeAfter(i,e),t.editor.trigger("valuechanged")}}(this))},i.prototype.show=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],i.__super__.show.apply(this,t),this.textEl.val(this.target.text()),this.urlEl.val(this.target.attr("href"))},i}(x),T.Toolbar.addButton(b),h=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="image",i.prototype.icon="picture-o",i.prototype.htmlTag="img",i.prototype.disableTag="pre, table",i.prototype.defaultImage="",i.prototype.needFocus=!1,i.prototype._init=function(){var e,n,o,r;if(this.editor.opts.imageButton)if(Array.isArray(this.editor.opts.imageButton))for(this.menu=[],r=this.editor.opts.imageButton,n=0,o=r.length;o>n;n++)e=r[n],this.menu.push({name:e+"-image",text:this._t(e+"Image")});else this.menu=!1;else this.menu=null!=this.editor.uploader?[{name:"upload-image",text:this._t("uploadImage")},{name:"external-image",text:this._t("externalImage")}]:!1;return this.defaultImage=this.editor.opts.defaultImage,this.editor.body.on("click","img:not([data-non-image])",function(e){return function(i){var n,o;return n=t(i.currentTarget),o=document.createRange(),o.selectNode(n[0]),e.editor.selection.selectRange(o),e.editor.util.support.onselectionchange||e.editor.trigger("selectionchanged"),!1}}(this)),this.editor.body.on("mouseup","img:not([data-non-image])",function(){return function(){return!1}}(this)),this.editor.on("selectionchanged.image",function(e){return function(){var i,n,o;return o=e.editor.selection.getRange(),null!=o?(i=t(o.cloneContents()).contents(),1===i.length&&i.is("img:not([data-non-image])")?(n=t(o.startContainer).contents().eq(o.startOffset),e.popover.show(n)):e.popover.hide()):void 0}}(this)),this.editor.on("valuechanged.image",function(e){return function(){var i;return i=e.editor.wrapper.find(".simditor-image-loading"),i.length>0?i.each(function(i,n){var o,r,s;return r=t(n),o=r.data("img"),!(o&&o.parent().length>0)&&(r.remove(),o&&(s=o.data("file"),s&&(e.editor.uploader.cancel(s),e.editor.body.find("img.uploading").length<1)))?e.editor.uploader.trigger("uploadready",[s]):void 0}):void 0}}(this)),i.__super__._init.call(this)},i.prototype.render=function(){var t;return t=1<=arguments.length?H.call(arguments,0):[],i.__super__.render.apply(this,t),this.popover=new p({button:this}),"upload"===this.editor.opts.imageButton?this._initUploader(this.el):void 0},i.prototype.renderMenu=function(){return i.__super__.renderMenu.call(this),this._initUploader()},i.prototype._initUploader=function(e){var i,n;return null==e&&(e=this.menuEl.find(".menu-item-upload-image")),null==this.editor.uploader?void this.el.find(".btn-upload").remove():(i=null,n=function(n){return function(){return i&&i.remove(),i=t('<input type="file" title="'+n._t("uploadImage")+'" accept="image/*">').appendTo(e)}}(this),n(),e.on("click mousedown","input[type=file]",function(){return function(t){return t.stopPropagation()}}(this)),e.on("change","input[type=file]",function(t){return function(){return t.editor.inputManager.focused?(t.editor.uploader.upload(i,{inline:!0}),n()):(t.editor.one("focus",function(){return t.editor.uploader.upload(i,{inline:!0}),n()}),t.editor.focus()),t.wrapper.removeClass("menu-on")}}(this)),this.editor.uploader.on("beforeupload",function(e){return function(i,n){var o;if(n.inline)return n.img?o=t(n.img):(o=e.createImage(n.name),n.img=o),o.addClass("uploading"),o.data("file",n),e.editor.uploader.readImageFile(n.obj,function(t){var i;if(o.hasClass("uploading"))return i=t?t.src:e.defaultImage,e.loadImage(o,i,function(){return e.popover.active?(e.popover.refresh(),e.popover.srcEl.val(e._t("uploading")).prop("disabled",!0)):void 0})})}}(this)),this.editor.uploader.on("uploadprogress",t.proxy(this.editor.util.throttle(function(t,e,i,n){var o,r,s;if(e.inline&&(r=e.img.data("mask")))return o=r.data("img"),o.hasClass("uploading")&&o.parent().length>0?(s=i/n,s=(100*s).toFixed(0),s>99&&(s=99),r.find(".progress").height(100-s+"%")):void r.remove()},500),this)),this.editor.uploader.on("uploadsuccess",function(e){return function(i,n,o){var r,s,a;if(n.inline&&(r=n.img,r.hasClass("uploading")&&r.parent().length>0)){if(r.removeData("file"),r.removeClass("uploading").removeClass("loading"),s=r.data("mask"),s&&s.remove(),r.removeData("mask"),"object"!=typeof o)try{o=t.parseJSON(o)}catch(l){i=l,o={success:!1}}return o.success===!1?(a=o.msg||e._t("uploadFailed"),alert(a),r.attr("src",e.defaultImage)):r.attr("src",o.file_path),e.popover.active&&(e.popover.srcEl.prop("disabled",!1),e.popover.srcEl.val(o.file_path)),e.editor.trigger("valuechanged"),e.editor.body.find("img.uploading").length<1?e.editor.uploader.trigger("uploadready",[n,o]):void 0}}}(this)),this.editor.uploader.on("uploaderror",function(e){return function(i,n,o){var r,s,a,l;if(n.inline&&"abort"!==o.statusText){if(o.responseText){try{l=t.parseJSON(o.responseText),a=l.msg}catch(c){i=c,a=e._t("uploadError")}alert(a)}if(r=n.img,r.hasClass("uploading")&&r.parent().length>0)return r.removeData("file"),r.removeClass("uploading").removeClass("loading"),s=r.data("mask"),s&&s.remove(),r.removeData("mask"),r.attr("src",e.defaultImage),e.popover.active&&(e.popover.srcEl.prop("disabled",!1),e.popover.srcEl.val(e.defaultImage)),e.editor.trigger("valuechanged"),e.editor.body.find("img.uploading").length<1?e.editor.uploader.trigger("uploadready",[n,l]):void 0}}}(this)))},i.prototype.status=function(t){return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:void 0},i.prototype.loadImage=function(e,i,n){var o,r,s;return s=function(t){return function(){var i,n;return i=e.offset(),n=t.editor.wrapper.offset(),o.css({top:i.top-n.top,left:i.left-n.left,width:e.width(),height:e.height()}).show()}}(this),e.addClass("loading"),o=e.data("mask"),o||(o=t('<div class="simditor-image-loading"><div class="progress"></div></div>').hide().appendTo(this.editor.wrapper),s(),e.data("mask",o),o.data("img",e)),r=new Image,r.onload=function(t){return function(){var a,l;if(e.hasClass("loading")||e.hasClass("uploading"))return l=r.width,a=r.height,e.attr({src:i,"data-image-size":l+","+a}).removeClass("loading"),e.hasClass("uploading")?(t.editor.util.reflow(t.editor.body),s()):(o.remove(),e.removeData("mask")),n(r)}}(this),r.onerror=function(){return function(){return n(!1),o.remove(),e.removeData("mask").removeClass("loading")}}(this),r.src=i},i.prototype.createImage=function(e){var i,n,o,r;return null==e&&(e="Image"),this.editor.inputManager.focused||this.editor.focus(),r=this.editor.selection.getRange(),r.deleteContents(),i=this.editor.util.closestBlockEl(),i.is("p")&&!this.editor.util.isEmptyNode(i)&&(i=t("<p/>").append(this.editor.util.phBr).insertAfter(i),this.editor.selection.setRangeAtStartOf(i,r)),n=t("<img/>").attr("alt",e),r.insertNode(n[0]),o=i.next("p"),o.length>0||(o=t("<p/>").append(this.editor.util.phBr).insertAfter(i)),this.editor.selection.setRangeAtStartOf(o),n},i.prototype.command=function(t){var e;return e=this.createImage(),this.loadImage(e,t||this.defaultImage,function(t){return function(){return t.editor.trigger("valuechanged"),t.editor.util.reflow(e),e.click(),t.popover.one("popovershow",function(){return t.popover.srcEl.focus(),t.popover.srcEl[0].select()})}}(this))},i}(s),p=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.offset={top:6,left:-4},i.prototype.render=function(){var e;return e='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("imageUrl")+'</label>\n    <input class="image-src" type="text" tabindex="1" />\n    <a class="btn-upload" href="javascript:;" title="'+this._t("uploadImage")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-upload"></span>\n    </a>\n  </div>\n  <div class=\'settings-field\'>\n    <label>'+this._t("imageAlt")+'</label>\n    <input class="image-alt" id="image-alt" type="text" tabindex="1" />\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("imageSize")+'</label>\n    <input class="image-size" id="image-width" type="text" tabindex="2" />\n    <span class="times">\xd7</span>\n    <input class="image-size" id="image-height" type="text" tabindex="3" />\n    <a class="btn-restore" href="javascript:;" title="'+this._t("restoreImageSize")+'" tabindex="-1">\n      <span class="simditor-icon simditor-icon-undo"></span>\n    </a>\n  </div>\n</div>',this.el.addClass("image-popover").append(e),this.srcEl=this.el.find(".image-src"),this.widthEl=this.el.find("#image-width"),this.heightEl=this.el.find("#image-height"),this.altEl=this.el.find("#image-alt"),this.srcEl.on("keydown",function(t){return function(e){return 13!==e.which||t.target.hasClass("uploading")?void 0:(e.preventDefault(),t.button.editor.body.focus(),t.button.editor.selection.setRangeAfter(t.target),t.hide())}}(this)),this.srcEl.on("blur",function(t){return function(){return t._loadImage(t.srcEl.val())}}(this)),this.el.find(".image-size").on("blur",function(e){return function(i){return e._resizeImg(t(i.currentTarget)),e.el.data("popover").refresh()}}(this)),this.el.find(".image-size").on("keyup",function(e){return function(i){var n;return n=t(i.currentTarget),13!==i.which&&27!==i.which&&9!==i.which?e._resizeImg(n,!0):void 0}}(this)),this.el.find(".image-size").on("keydown",function(e){return function(i){var n;return n=t(i.currentTarget),13===i.which||27===i.which?(i.preventDefault(),13===i.which?e._resizeImg(n):e._restoreImg(),e.button.editor.body.focus(),e.button.editor.selection.setRangeAfter(e.target),e.hide()):9===i.which?e.el.data("popover").refresh():void 0}}(this)),this.altEl.on("keydown",function(t){return function(e){return 13===e.which?(e.preventDefault(),t.button.editor.body.focus(),t.button.editor.selection.setRangeAfter(t.target),t.hide()):void 0}}(this)),this.altEl.on("keyup",function(t){return function(e){return 13!==e.which&&27!==e.which&&9!==e.which?(t.alt=t.altEl.val(),t.target.attr("alt",t.alt)):void 0}}(this)),this.el.find(".btn-restore").on("click",function(t){return function(){return t._restoreImg(),t.el.data("popover").refresh()}}(this)),this.editor.on("valuechanged",function(t){return function(){return t.active?t.refresh():void 0}}(this)),this._initUploader()},i.prototype._initUploader=function(){var e,i;return e=this.el.find(".btn-upload"),null==this.editor.uploader?void e.remove():(i=function(i){return function(){return i.input&&i.input.remove(),i.input=t('<input type="file" title="'+i._t("uploadImage")+'" accept="image/*">').appendTo(e)}}(this),i(),this.el.on("click mousedown","input[type=file]",function(){return function(t){return t.stopPropagation()}}(this)),this.el.on("change","input[type=file]",function(t){return function(){return t.editor.uploader.upload(t.input,{inline:!0,img:t.target}),i()}}(this)))},i.prototype._resizeImg=function(e,i){var n,o,r;return null==i&&(i=!1),o=1*e.val(),t.isNumeric(o)||0>o?(e.is(this.widthEl)?(n=this.height*o/this.width,this.heightEl.val(n)):(r=this.width*o/this.height,this.widthEl.val(r)),i||this.target.attr({width:r||o,height:n||o}),this.editor.trigger("valuechanged")):void 0},i.prototype._restoreImg=function(){var t,e;return e=(null!=(t=this.target.data("image-size"))?t.split(","):void 0)||[this.width,this.height],this.target.attr({width:1*e[0],height:1*e[1]}),this.widthEl.val(e[0]),this.heightEl.val(e[1]),this.editor.trigger("valuechanged")},i.prototype._loadImage=function(t,e){return/^data:image/.test(t)&&!this.editor.uploader?void(e&&e(!1)):this.button.loadImage(this.target,t,function(i){return function(n){var o;if(n)return i.active&&(i.width=n.width,i.height=n.height,i.widthEl.val(i.width),i.heightEl.val(i.height),i.target.removeAttr("width").removeAttr("height")),/^data:image/.test(t)?(o=i.editor.util.dataURLtoBlob(t),o.name="Base64 Image.png",i.editor.uploader.upload(o,{inline:!0,img:i.target})):i.editor.trigger("valuechanged"),e?e(n):void 0}}(this))},i.prototype.show=function(){var t,e;return e=1<=arguments.length?H.call(arguments,0):[],i.__super__.show.apply(this,e),t=this.target,this.width=t.width(),this.height=t.height(),this.alt=t.attr("alt"),t.hasClass("uploading")?this.srcEl.val(this._t("uploading")).prop("disabled",!0):(this.srcEl.val(t.attr("src")).prop("disabled",!1),this.widthEl.val(this.width),this.heightEl.val(this.height),this.altEl.val(this.alt))
},i}(x),T.Toolbar.addButton(h),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype.name="indent",e.prototype.icon="indent",e.prototype._init=function(){return this.title=this._t(this.name)+" (Tab)",e.__super__._init.call(this)},e.prototype.status=function(){return!0},e.prototype.command=function(){return this.editor.indentation.indent()},e}(s),T.Toolbar.addButton(f),C=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return P(e,t),e.prototype.name="outdent",e.prototype.icon="outdent",e.prototype._init=function(){return this.title=this._t(this.name)+" (Shift + Tab)",e.__super__._init.call(this)},e.prototype.status=function(){return!0},e.prototype.command=function(){return this.editor.indentation.indent(!0)},e}(s),T.Toolbar.addButton(C),u=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="hr",i.prototype.icon="minus",i.prototype.htmlTag="hr",i.prototype.status=function(){return!0},i.prototype.command=function(){var e,i,n,o;return o=this.editor.util.furthestBlockEl(),n=o.next(),n.length>0?this.editor.selection.save():i=t("<p/>").append(this.editor.util.phBr),e=t("<hr/>").insertAfter(o),i?(i.insertAfter(e),this.editor.selection.setRangeAtStartOf(i)):this.editor.selection.restore(),this.editor.trigger("valuechanged")},i}(s),T.Toolbar.addButton(u),E=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="table",i.prototype.icon="table",i.prototype.htmlTag="table",i.prototype.disableTag="pre, li, blockquote",i.prototype.menu=!0,i.prototype._init=function(){return i.__super__._init.call(this),t.merge(this.editor.formatter._allowedTags,["tbody","tr","td","colgroup","col"]),t.extend(this.editor.formatter._allowedAttributes,{td:["rowspan","colspan"],col:["width"]}),this._initShortcuts(),this.editor.on("decorate",function(e){return function(i,n){return n.find("table").each(function(i,n){return e.decorate(t(n))})}}(this)),this.editor.on("undecorate",function(e){return function(i,n){return n.find("table").each(function(i,n){return e.undecorate(t(n))})}}(this)),this.editor.on("selectionchanged.table",function(e){return function(){var i,n;return e.editor.body.find(".simditor-table td").removeClass("active"),n=e.editor.selection.getRange(),null!=n?(i=t(n.commonAncestorContainer),n.collapsed&&i.is(".simditor-table")&&(i=i.find(e.editor.selection.rangeAtStartOf(i)?"td:first":"td:last"),e.editor.selection.setRangeAtEndOf(i)),i.closest("td",e.editor.body).addClass("active")):void 0}}(this)),this.editor.on("blur.table",function(t){return function(){return t.editor.body.find(".simditor-table td").removeClass("active")}}(this)),this.editor.inputManager.addKeystrokeHandler("38","td",function(t){return function(e,i){var n,o,r;return o=i.parent("tr"),n=o.prev("tr"),n.length>0?(r=o.find("td").index(i),t.editor.selection.setRangeAtEndOf(n.find("td").eq(r)),!0):!0}}(this)),this.editor.inputManager.addKeystrokeHandler("40","td",function(t){return function(e,i){var n,o,r;return o=i.parent("tr"),n=o.next("tr"),n.length>0?(r=o.find("td").index(i),t.editor.selection.setRangeAtEndOf(n.find("td").eq(r)),!0):!0}}(this))},i.prototype.initResize=function(e){var i,n,o;return o=e.parent(".simditor-table"),i=e.find("colgroup"),i.length<1&&(i=t("<colgroup/>").prependTo(e),e.find("tr:first td").each(function(){return function(){var e;return e=t("<col/>").appendTo(i)}}(this)),this.refreshTableWidth(e)),n=t('<div class="simditor-resize-handle" contenteditable="false"></div>').appendTo(o),o.on("mousemove","td",function(){return function(e){var r,s,a,l,c,d;if(!o.hasClass("resizing"))return s=t(e.currentTarget),d=e.pageX-t(e.currentTarget).offset().left,5>d&&s.prev().length>0&&(s=s.prev()),s.next("td").length<1?void n.hide():(null!=(l=n.data("td"))?l.is(s):void 0)?void n.show():(a=s.parent().find("td").index(s),r=i.find("col").eq(a),(null!=(c=n.data("col"))?c.is(r):void 0)?void n.show():n.css("left",s.position().left+s.outerWidth()-5).data("td",s).data("col",r).show())}}(this)),o.on("mouseleave",function(){return function(){return n.hide()}}(this)),o.on("mousedown",".simditor-resize-handle",function(){return function(e){var i,n,r,s,a,l,c,d,u,h,p;return i=t(e.currentTarget),r=i.data("td"),n=i.data("col"),a=r.next("td"),s=n.next("col"),h=e.pageX,d=1*r.outerWidth(),u=1*a.outerWidth(),c=parseFloat(i.css("left")),p=r.closest("table").width(),l=50,t(document).on("mousemove.simditor-resize-table",function(t){var e,o,r;return e=t.pageX-h,o=d+e,r=u-e,l>o?(o=l,e=l-d,r=u-e):l>r&&(r=l,e=u-l,o=d+e),n.attr("width",o/p*100+"%"),s.attr("width",r/p*100+"%"),i.css("left",c+e)}),t(document).one("mouseup.simditor-resize-table",function(){return t(document).off(".simditor-resize-table"),o.removeClass("resizing")}),o.addClass("resizing"),!1}}(this))},i.prototype._initShortcuts=function(){return this.editor.inputManager.addShortcut("ctrl+alt+up",function(t){return function(){return t.editMenu.find(".menu-item[data-param=insertRowAbove]").click(),!1}}(this)),this.editor.inputManager.addShortcut("ctrl+alt+down",function(t){return function(){return t.editMenu.find(".menu-item[data-param=insertRowBelow]").click(),!1}}(this)),this.editor.inputManager.addShortcut("ctrl+alt+left",function(t){return function(){return t.editMenu.find(".menu-item[data-param=insertColLeft]").click(),!1}}(this)),this.editor.inputManager.addShortcut("ctrl+alt+right",function(t){return function(){return t.editMenu.find(".menu-item[data-param=insertColRight]").click(),!1}}(this))},i.prototype.decorate=function(t){return t.parent(".simditor-table").length>0&&this.undecorate(t),t.wrap('<div class="simditor-table"></div>'),this.initResize(t),t.parent()},i.prototype.undecorate=function(t){return t.parent(".simditor-table").length>0?t.parent().replaceWith(t):void 0},i.prototype.renderMenu=function(){return t('<div class="menu-create-table">\n</div>\n<div class="menu-edit-table">\n  <ul>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="deleteRow"><span>'+this._t("deleteRow")+'</span></a></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="insertRowAbove"><span>'+this._t("insertRowAbove")+' ( Ctrl + Alt + \u2191 )</span></a></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="insertRowBelow"><span>'+this._t("insertRowBelow")+' ( Ctrl + Alt + \u2193 )</span></a></li>\n    <li><span class="separator"></span></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="deleteCol"><span>'+this._t("deleteColumn")+'</span></a></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="insertColLeft"><span>'+this._t("insertColumnLeft")+' ( Ctrl + Alt + \u2190 )</span></a></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="insertColRight"><span>'+this._t("insertColumnRight")+' ( Ctrl + Alt + \u2192 )</span></a></li>\n    <li><span class="separator"></span></li>\n    <li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;" data-param="deleteTable"><span>'+this._t("deleteTable")+"</span></a></li>\n  </ul>\n</div>").appendTo(this.menuWrapper),this.createMenu=this.menuWrapper.find(".menu-create-table"),this.editMenu=this.menuWrapper.find(".menu-edit-table"),this.createTable(6,6).appendTo(this.createMenu),this.createMenu.on("mouseenter","td",function(e){return function(i){var n,o,r;return e.createMenu.find("td").removeClass("selected"),n=t(i.currentTarget),o=n.parent(),r=o.find("td").index(n)+1,o.prevAll("tr").addBack().find("td:lt("+r+")").addClass("selected")}}(this)),this.createMenu.on("mouseleave",function(){return function(e){return t(e.currentTarget).find("td").removeClass("selected")}}(this)),this.createMenu.on("mousedown","td",function(e){return function(i){var n,o,r,s,a,l;return e.wrapper.removeClass("menu-on"),e.editor.inputManager.focused?(r=t(i.currentTarget),s=r.parent(),a=s.find("td").index(r)+1,l=s.prevAll("tr").length+1,o=e.createTable(l,a,!0),n=e.editor.util.closestBlockEl(),e.editor.util.isEmptyNode(n)?n.replaceWith(o):n.after(o),e.decorate(o),e.editor.selection.setRangeAtStartOf(o.find("td:first")),e.editor.trigger("valuechanged"),!1):void 0}}(this))},i.prototype.createTable=function(e,i,n){var o,r,s,a,l,c,d,u,h,p;for(o=t("<table/>"),r=t("<tbody/>").appendTo(o),u=c=0,h=e;h>=0?h>c:c>h;u=h>=0?++c:--c)for(a=t("<tr/>").appendTo(r),l=d=0,p=i;p>=0?p>d:d>p;l=p>=0?++d:--d)s=t("<td/>").appendTo(a),n&&s.append(this.editor.util.phBr);return o},i.prototype.refreshTableWidth=function(e){var i,n;return n=e.width(),i=e.find("col"),e.find("tr:first td").each(function(){return function(e,o){var r;return r=i.eq(e),r.attr("width",t(o).outerWidth()/n*100+"%")}}(this))},i.prototype.setActive=function(t){return i.__super__.setActive.call(this,t),t?(this.createMenu.hide(),this.editMenu.show()):(this.createMenu.show(),this.editMenu.hide())},i.prototype.deleteRow=function(t){var e,i,n;return i=t.parent("tr"),i.siblings("tr").length<1?this.deleteTable(t):(e=i.next("tr"),e.length>0||(e=i.prev("tr")),n=i.find("td").index(t),i.remove(),this.editor.selection.setRangeAtEndOf(e.find("td").eq(n)))},i.prototype.insertRow=function(e,i){var n,o,r,s,a,l,c,d;for(null==i&&(i="after"),r=e.parent("tr"),o=r.closest("table"),s=0,o.find("tr").each(function(){return function(e,i){return s=Math.max(s,t(i).find("td").length)}}(this)),n=t("<tr/>"),a=c=1,d=s;d>=1?d>=c:c>=d;a=d>=1?++c:--c)t("<td/>").append(this.editor.util.phBr).appendTo(n);return r[i](n),l=r.find("td").index(e),this.editor.selection.setRangeAtStartOf(n.find("td").eq(l))},i.prototype.deleteCol=function(e){var i,n,o,r;return o=e.parent("tr"),o.siblings("tr").length<1&&e.siblings("td").length<1?this.deleteTable(e):(r=o.find("td").index(e),i=e.next("td"),i.length>0||(i=o.prev("td")),n=o.closest("table"),n.find("col").eq(r).remove(),n.find("tr").each(function(){return function(e,i){return t(i).find("td").eq(r).remove()}}(this)),this.refreshTableWidth(n),this.editor.selection.setRangeAtEndOf(i))},i.prototype.insertCol=function(e,i){var n,o,r,s,a,l,c,d;return null==i&&(i="after"),a=e.parent("tr"),l=a.find("td").index(e),s=e.closest("table"),n=s.find("col").eq(l),s.find("tr").each(function(e){return function(n,o){var r;return r=t("<td/>").append(e.editor.util.phBr),t(o).find("td").eq(l)[i](r)}}(this)),o=t("<col/>"),n[i](o),c=s.width(),d=Math.max(parseFloat(n.attr("width"))/2,50/c*100),n.attr("width",d+"%"),o.attr("width",d+"%"),this.refreshTableWidth(s),r="after"===i?e.next("td"):e.prev("td"),this.editor.selection.setRangeAtStartOf(r)},i.prototype.deleteTable=function(t){var e,i;return i=t.closest(".simditor-table"),e=i.next("p"),i.remove(),e.length>0?this.editor.selection.setRangeAtStartOf(e):void 0},i.prototype.command=function(e){var i,n;if(n=this.editor.selection.getRange(),i=t(n.commonAncestorContainer).closest("td"),i.length>0){if("deleteRow"===e)this.deleteRow(i);else if("insertRowAbove"===e)this.insertRow(i,"before");else if("insertRowBelow"===e)this.insertRow(i);else if("deleteCol"===e)this.deleteCol(i);else if("insertColLeft"===e)this.insertCol(i,"before");else if("insertColRight"===e)this.insertCol(i);else{if("deleteTable"!==e)return;this.deleteTable(i)}return this.editor.trigger("valuechanged")}},i}(s),T.Toolbar.addButton(E),M=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return P(i,e),i.prototype.name="strikethrough",i.prototype.icon="strikethrough",i.prototype.htmlTag="strike",i.prototype.disableTag="pre",i.prototype.status=function(t){var e;return null!=t&&this.setDisabled(t.is(this.disableTag)),this.disabled?!0:(e=document.queryCommandState("strikethrough")===!0,this.setActive(e),e)},i.prototype.command=function(){return document.execCommand("strikethrough"),this.editor.util.support.oninput||this.editor.trigger("valuechanged"),t(document).trigger("selectionchange")},i}(s),T.Toolbar.addButton(M),T}),function(){var t,e;e=function(){return $("[data-role='datetimepicker']").datetimepicker(),$("[data-role='icheck']").iCheck({checkboxClass:"icheckbox_flat-youyu",radioClass:"iradio_flat-youyu"}),$("[data-role='select2']").select2(),0!==$("[data-role='simditor']").size()?new Simditor({textarea:$("[data-role='simditor']")}):void 0},t=function(){var t,e;e=$(".Doc-switcher"),e.size()&&(t=location.search.match(/role=([^&=#]+)/),null!=t&&"developer"===t[1]?($(".Doc-content [data-target='dev']").show(),$(".Doc-content [data-target='ui']").hide(),$("[data-target='dev']",e).addClass("active").siblings(".btn").removeClass("active"),$(".Doc-navs a").each(function(){return this.search="role=developer"})):($(".Doc-content [data-target='ui']").show(),$(".Doc-content [data-target='dev']").hide(),$("[data-target='ui']",e).addClass("active").siblings(".btn").removeClass("active"),$(".Doc-navs a").each(function(){return this.search="role=designer"})))},$(document).ready(function(){return e(),t()})}.call(this);